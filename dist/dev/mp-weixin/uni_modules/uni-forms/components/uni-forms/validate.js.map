{"version":3,"file":"validate.js","sources":["../../../../../../../src/uni_modules/uni-forms/components/uni-forms/validate.js"],"sourcesContent":["var pattern = {\r\n\temail: /^\\S+?@\\S+?\\.\\S+?$/,\r\n\tidcard: /^[1-9]\\d{5}(18|19|([23]\\d))\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$/,\r\n\turl: new RegExp(\r\n\t\t\"^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\\\S+(?::\\\\S*)?@)?(?:(?:(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}(?:\\\\.(?:[0-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]+-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]+-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,})))|localhost)(?::\\\\d{2,5})?(?:(/|\\\\?|#)[^\\\\s]*)?$\",\r\n\t\t'i')\r\n};\r\n\r\nconst FORMAT_MAPPING = {\r\n\t\"int\": 'integer',\r\n\t\"bool\": 'boolean',\r\n\t\"double\": 'number',\r\n\t\"long\": 'number',\r\n\t\"password\": 'string'\r\n\t// \"fileurls\": 'array'\r\n}\r\n\r\nfunction formatMessage(args, resources = '') {\r\n\tvar defaultMessage = ['label']\r\n\tdefaultMessage.forEach((item) => {\r\n\t\tif (args[item] === undefined) {\r\n\t\t\targs[item] = ''\r\n\t\t}\r\n\t})\r\n\r\n\tlet str = resources\r\n\tfor (let key in args) {\r\n\t\tlet reg = new RegExp('{' + key + '}')\r\n\t\tstr = str.replace(reg, args[key])\r\n\t}\r\n\treturn str\r\n}\r\n\r\nfunction isEmptyValue(value, type) {\r\n\tif (value === undefined || value === null) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tif (typeof value === 'string' && !value) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tif (Array.isArray(value) && !value.length) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tif (type === 'object' && !Object.keys(value).length) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nconst types = {\r\n\tinteger(value) {\r\n\t\treturn types.number(value) && parseInt(value, 10) === value;\r\n\t},\r\n\tstring(value) {\r\n\t\treturn typeof value === 'string';\r\n\t},\r\n\tnumber(value) {\r\n\t\tif (isNaN(value)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn typeof value === 'number';\r\n\t},\r\n\t\"boolean\": function(value) {\r\n\t\treturn typeof value === 'boolean';\r\n\t},\r\n\t\"float\": function(value) {\r\n\t\treturn types.number(value) && !types.integer(value);\r\n\t},\r\n\tarray(value) {\r\n\t\treturn Array.isArray(value);\r\n\t},\r\n\tobject(value) {\r\n\t\treturn typeof value === 'object' && !types.array(value);\r\n\t},\r\n\tdate(value) {\r\n\t\treturn value instanceof Date;\r\n\t},\r\n\ttimestamp(value) {\r\n\t\tif (!this.integer(value) || Math.abs(value).toString().length > 16) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tfile(value) {\r\n\t\treturn typeof value.url === 'string';\r\n\t},\r\n\temail(value) {\r\n\t\treturn typeof value === 'string' && !!value.match(pattern.email) && value.length < 255;\r\n\t},\r\n\turl(value) {\r\n\t\treturn typeof value === 'string' && !!value.match(pattern.url);\r\n\t},\r\n\tpattern(reg, value) {\r\n\t\ttry {\r\n\t\t\treturn new RegExp(reg).test(value);\r\n\t\t} catch (e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\tmethod(value) {\r\n\t\treturn typeof value === 'function';\r\n\t},\r\n\tidcard(value) {\r\n\t\treturn typeof value === 'string' && !!value.match(pattern.idcard);\r\n\t},\r\n\t'url-https'(value) {\r\n\t\treturn this.url(value) && value.startsWith('https://');\r\n\t},\r\n\t'url-scheme'(value) {\r\n\t\treturn value.startsWith('://');\r\n\t},\r\n\t'url-web'(value) {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nclass RuleValidator {\r\n\r\n\tconstructor(message) {\r\n\t\tthis._message = message\r\n\t}\r\n\r\n\tasync validateRule(fieldKey, fieldValue, value, data, allData) {\r\n\t\tvar result = null\r\n\r\n\t\tlet rules = fieldValue.rules\r\n\r\n\t\tlet hasRequired = rules.findIndex((item) => {\r\n\t\t\treturn item.required\r\n\t\t})\r\n\t\tif (hasRequired < 0) {\r\n\t\t\tif (value === null || value === undefined) {\r\n\t\t\t\treturn result\r\n\t\t\t}\r\n\t\t\tif (typeof value === 'string' && !value.length) {\r\n\t\t\t\treturn result\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar message = this._message\r\n\r\n\t\tif (rules === undefined) {\r\n\t\t\treturn message['default']\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < rules.length; i++) {\r\n\t\t\tlet rule = rules[i]\r\n\t\t\tlet vt = this._getValidateType(rule)\r\n\r\n\t\t\tObject.assign(rule, {\r\n\t\t\t\tlabel: fieldValue.label || `[\"${fieldKey}\"]`\r\n\t\t\t})\r\n\r\n\t\t\tif (RuleValidatorHelper[vt]) {\r\n\t\t\t\tresult = RuleValidatorHelper[vt](rule, value, message)\r\n\t\t\t\tif (result != null) {\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (rule.validateExpr) {\r\n\t\t\t\tlet now = Date.now()\r\n\t\t\t\tlet resultExpr = rule.validateExpr(value, allData, now)\r\n\t\t\t\tif (resultExpr === false) {\r\n\t\t\t\t\tresult = this._getMessage(rule, rule.errorMessage || this._message['default'])\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (rule.validateFunction) {\r\n\t\t\t\tresult = await this.validateFunction(rule, value, data, allData, vt)\r\n\t\t\t\tif (result !== null) {\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (result !== null) {\r\n\t\t\tresult = message.TAG + result\r\n\t\t}\r\n\r\n\t\treturn result\r\n\t}\r\n\r\n\tasync validateFunction(rule, value, data, allData, vt) {\r\n\t\tlet result = null\r\n\t\ttry {\r\n\t\t\tlet callbackMessage = null\r\n\t\t\tconst res = await rule.validateFunction(rule, value, allData || data, (message) => {\r\n\t\t\t\tcallbackMessage = message\r\n\t\t\t})\r\n\t\t\tif (callbackMessage || (typeof res === 'string' && res) || res === false) {\r\n\t\t\t\tresult = this._getMessage(rule, callbackMessage || res, vt)\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tresult = this._getMessage(rule, e.message, vt)\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n\r\n\t_getMessage(rule, message, vt) {\r\n\t\treturn formatMessage(rule, message || rule.errorMessage || this._message[vt] || message['default'])\r\n\t}\r\n\r\n\t_getValidateType(rule) {\r\n\t\tvar result = ''\r\n\t\tif (rule.required) {\r\n\t\t\tresult = 'required'\r\n\t\t} else if (rule.format) {\r\n\t\t\tresult = 'format'\r\n\t\t} else if (rule.arrayType) {\r\n\t\t\tresult = 'arrayTypeFormat'\r\n\t\t} else if (rule.range) {\r\n\t\t\tresult = 'range'\r\n\t\t} else if (rule.maximum !== undefined || rule.minimum !== undefined) {\r\n\t\t\tresult = 'rangeNumber'\r\n\t\t} else if (rule.maxLength !== undefined || rule.minLength !== undefined) {\r\n\t\t\tresult = 'rangeLength'\r\n\t\t} else if (rule.pattern) {\r\n\t\t\tresult = 'pattern'\r\n\t\t} else if (rule.validateFunction) {\r\n\t\t\tresult = 'validateFunction'\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n}\r\n\r\nconst RuleValidatorHelper = {\r\n\trequired(rule, value, message) {\r\n\t\tif (rule.required && isEmptyValue(value, rule.format || typeof value)) {\r\n\t\t\treturn formatMessage(rule, rule.errorMessage || message.required);\r\n\t\t}\r\n\r\n\t\treturn null\r\n\t},\r\n\r\n\trange(rule, value, message) {\r\n\t\tconst {\r\n\t\t\trange,\r\n\t\t\terrorMessage\r\n\t\t} = rule;\r\n\r\n\t\tlet list = new Array(range.length);\r\n\t\tfor (let i = 0; i < range.length; i++) {\r\n\t\t\tconst item = range[i];\r\n\t\t\tif (types.object(item) && item.value !== undefined) {\r\n\t\t\t\tlist[i] = item.value;\r\n\t\t\t} else {\r\n\t\t\t\tlist[i] = item;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet result = false\r\n\t\tif (Array.isArray(value)) {\r\n\t\t\tresult = (new Set(value.concat(list)).size === list.length);\r\n\t\t} else {\r\n\t\t\tif (list.indexOf(value) > -1) {\r\n\t\t\t\tresult = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!result) {\r\n\t\t\treturn formatMessage(rule, errorMessage || message['enum']);\r\n\t\t}\r\n\r\n\t\treturn null\r\n\t},\r\n\r\n\trangeNumber(rule, value, message) {\r\n\t\tif (!types.number(value)) {\r\n\t\t\treturn formatMessage(rule, rule.errorMessage || message.pattern.mismatch);\r\n\t\t}\r\n\r\n\t\tlet {\r\n\t\t\tminimum,\r\n\t\t\tmaximum,\r\n\t\t\texclusiveMinimum,\r\n\t\t\texclusiveMaximum\r\n\t\t} = rule;\r\n\t\tlet min = exclusiveMinimum ? value <= minimum : value < minimum;\r\n\t\tlet max = exclusiveMaximum ? value >= maximum : value > maximum;\r\n\r\n\t\tif (minimum !== undefined && min) {\r\n\t\t\treturn formatMessage(rule, rule.errorMessage || message['number'][exclusiveMinimum ?\r\n\t\t\t\t'exclusiveMinimum' : 'minimum'\r\n\t\t\t])\r\n\t\t} else if (maximum !== undefined && max) {\r\n\t\t\treturn formatMessage(rule, rule.errorMessage || message['number'][exclusiveMaximum ?\r\n\t\t\t\t'exclusiveMaximum' : 'maximum'\r\n\t\t\t])\r\n\t\t} else if (minimum !== undefined && maximum !== undefined && (min || max)) {\r\n\t\t\treturn formatMessage(rule, rule.errorMessage || message['number'].range)\r\n\t\t}\r\n\r\n\t\treturn null\r\n\t},\r\n\r\n\trangeLength(rule, value, message) {\r\n\t\tif (!types.string(value) && !types.array(value)) {\r\n\t\t\treturn formatMessage(rule, rule.errorMessage || message.pattern.mismatch);\r\n\t\t}\r\n\r\n\t\tlet min = rule.minLength;\r\n\t\tlet max = rule.maxLength;\r\n\t\tlet val = value.length;\r\n\r\n\t\tif (min !== undefined && val < min) {\r\n\t\t\treturn formatMessage(rule, rule.errorMessage || message['length'].minLength)\r\n\t\t} else if (max !== undefined && val > max) {\r\n\t\t\treturn formatMessage(rule, rule.errorMessage || message['length'].maxLength)\r\n\t\t} else if (min !== undefined && max !== undefined && (val < min || val > max)) {\r\n\t\t\treturn formatMessage(rule, rule.errorMessage || message['length'].range)\r\n\t\t}\r\n\r\n\t\treturn null\r\n\t},\r\n\r\n\tpattern(rule, value, message) {\r\n\t\tif (!types['pattern'](rule.pattern, value)) {\r\n\t\t\treturn formatMessage(rule, rule.errorMessage || message.pattern.mismatch);\r\n\t\t}\r\n\r\n\t\treturn null\r\n\t},\r\n\r\n\tformat(rule, value, message) {\r\n\t\tvar customTypes = Object.keys(types);\r\n\t\tvar format = FORMAT_MAPPING[rule.format] ? FORMAT_MAPPING[rule.format] : (rule.format || rule.arrayType);\r\n\r\n\t\tif (customTypes.indexOf(format) > -1) {\r\n\t\t\tif (!types[format](value)) {\r\n\t\t\t\treturn formatMessage(rule, rule.errorMessage || message.typeError);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null\r\n\t},\r\n\r\n\tarrayTypeFormat(rule, value, message) {\r\n\t\tif (!Array.isArray(value)) {\r\n\t\t\treturn formatMessage(rule, rule.errorMessage || message.typeError);\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < value.length; i++) {\r\n\t\t\tconst element = value[i];\r\n\t\t\tlet formatResult = this.format(rule, element, message)\r\n\t\t\tif (formatResult !== null) {\r\n\t\t\t\treturn formatResult\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nclass SchemaValidator extends RuleValidator {\r\n\r\n\tconstructor(schema, options) {\r\n\t\tsuper(SchemaValidator.message);\r\n\r\n\t\tthis._schema = schema\r\n\t\tthis._options = options || null\r\n\t}\r\n\r\n\tupdateSchema(schema) {\r\n\t\tthis._schema = schema\r\n\t}\r\n\r\n\tasync validate(data, allData) {\r\n\t\tlet result = this._checkFieldInSchema(data)\r\n\t\tif (!result) {\r\n\t\t\tresult = await this.invokeValidate(data, false, allData)\r\n\t\t}\r\n\t\treturn result.length ? result[0] : null\r\n\t}\r\n\r\n\tasync validateAll(data, allData) {\r\n\t\tlet result = this._checkFieldInSchema(data)\r\n\t\tif (!result) {\r\n\t\t\tresult = await this.invokeValidate(data, true, allData)\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n\r\n\tasync validateUpdate(data, allData) {\r\n\t\tlet result = this._checkFieldInSchema(data)\r\n\t\tif (!result) {\r\n\t\t\tresult = await this.invokeValidateUpdate(data, false, allData)\r\n\t\t}\r\n\t\treturn result.length ? result[0] : null\r\n\t}\r\n\r\n\tasync invokeValidate(data, all, allData) {\r\n\t\tlet result = []\r\n\t\tlet schema = this._schema\r\n\t\tfor (let key in schema) {\r\n\t\t\tlet value = schema[key]\r\n\t\t\tlet errorMessage = await this.validateRule(key, value, data[key], data, allData)\r\n\t\t\tif (errorMessage != null) {\r\n\t\t\t\tresult.push({\r\n\t\t\t\t\tkey,\r\n\t\t\t\t\terrorMessage\r\n\t\t\t\t})\r\n\t\t\t\tif (!all) break\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n\r\n\tasync invokeValidateUpdate(data, all, allData) {\r\n\t\tlet result = []\r\n\t\tfor (let key in data) {\r\n\t\t\tlet errorMessage = await this.validateRule(key, this._schema[key], data[key], data, allData)\r\n\t\t\tif (errorMessage != null) {\r\n\t\t\t\tresult.push({\r\n\t\t\t\t\tkey,\r\n\t\t\t\t\terrorMessage\r\n\t\t\t\t})\r\n\t\t\t\tif (!all) break\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n\r\n\t_checkFieldInSchema(data) {\r\n\t\tvar keys = Object.keys(data)\r\n\t\tvar keys2 = Object.keys(this._schema)\r\n\t\tif (new Set(keys.concat(keys2)).size === keys2.length) {\r\n\t\t\treturn ''\r\n\t\t}\r\n\r\n\t\tvar noExistFields = keys.filter((key) => {\r\n\t\t\treturn keys2.indexOf(key) < 0;\r\n\t\t})\r\n\t\tvar errorMessage = formatMessage({\r\n\t\t\tfield: JSON.stringify(noExistFields)\r\n\t\t}, SchemaValidator.message.TAG + SchemaValidator.message['defaultInvalid'])\r\n\t\treturn [{\r\n\t\t\tkey: 'invalid',\r\n\t\t\terrorMessage\r\n\t\t}]\r\n\t}\r\n}\r\n\r\nfunction Message() {\r\n\treturn {\r\n\t\tTAG: \"\",\r\n\t\tdefault: '验证错误',\r\n\t\tdefaultInvalid: '提交的字段{field}在数据库中并不存在',\r\n\t\tvalidateFunction: '验证无效',\r\n\t\trequired: '{label}必填',\r\n\t\t'enum': '{label}超出范围',\r\n\t\ttimestamp: '{label}格式无效',\r\n\t\twhitespace: '{label}不能为空',\r\n\t\ttypeError: '{label}类型无效',\r\n\t\tdate: {\r\n\t\t\tformat: '{label}日期{value}格式无效',\r\n\t\t\tparse: '{label}日期无法解析,{value}无效',\r\n\t\t\tinvalid: '{label}日期{value}无效'\r\n\t\t},\r\n\t\tlength: {\r\n\t\t\tminLength: '{label}长度不能少于{minLength}',\r\n\t\t\tmaxLength: '{label}长度不能超过{maxLength}',\r\n\t\t\trange: '{label}必须介于{minLength}和{maxLength}之间'\r\n\t\t},\r\n\t\tnumber: {\r\n\t\t\tminimum: '{label}不能小于{minimum}',\r\n\t\t\tmaximum: '{label}不能大于{maximum}',\r\n\t\t\texclusiveMinimum: '{label}不能小于等于{minimum}',\r\n\t\t\texclusiveMaximum: '{label}不能大于等于{maximum}',\r\n\t\t\trange: '{label}必须介于{minimum}and{maximum}之间'\r\n\t\t},\r\n\t\tpattern: {\r\n\t\t\tmismatch: '{label}格式不匹配'\r\n\t\t}\r\n\t};\r\n}\r\n\r\n\r\nSchemaValidator.message = new Message();\r\n\r\nexport default SchemaValidator\n"],"names":[],"mappings":"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"}