"use strict";var e=require("../../common/vendor.js"),a=require("../../api/user.js"),c=require("../../utils/auth.js"),u=require("../../api/wechat.js");require("../../utils/request.js");const d=()=>"../components/ShowModal.js",h={components:{ShowModal:d},data(){return{codeVisible:!0,loginVisible:!0,demoVisible:!1,sendCaptchaEnabled:!0,codeMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801",counterTimer:60,phoneNumber:null}},methods:{onInput:function(o){console.log("input e=",o),/^1[3456789]\d{9}$/.test(o.detail.value)?(this.codeVisible=!1,this.phoneNumber=o.detail.value):this.codeVisible=!0},onInputCode:function(o){console.log("code=",o),/^\d{6}$/.test(o.detail.value)?this.loginVisible=!1:this.loginVisible=!0},sendCaptcha:function(o){if(console.log("button e=",o),!this.sendCaptchaEnabled)return;this.sendCaptchaEnabled=!1;const t={phone:this.phoneNumber};console.log("params===",t),a.sendCode(t).then(r=>{console.log("res=",r)}),this.codeMessage="\u91CD\u65B0\u53D1\u9001";const l=setInterval(()=>{if(this.counterTimer<=0){this.counterTimer=60,this.sendCaptchaEnabled=!0,clearInterval(l),this.codeMessage="\u83B7\u53D6\u9A8C\u8BC1\u7801";return}this.counterTimer--},1e3)},formSubmit:function(o){console.log("e=",o),console.log("form\u53D1\u751F\u4E86submit\u4E8B\u4EF6\uFF0C\u643A\u5E26\u6570\u636E\u4E3A\uFF1A"+JSON.stringify(o.detail.value));const t=o.detail.value,l=this;console.log("window.navigator=",window.navigator.userAgent),window.navigator.__defineGetter__("userAgent",()=>"myBroser"),setTimeout(()=>{console.log("window.navigator1=",window.navigator.userAgent)},200),a.codePhoneLogin(t).then(r=>{console.log("res========",r);const{code:s,token:n}=r.data;s===200&&(console.log("\u6210\u529F"),c.setToken(n),l.$store.dispatch("user/GetUserInfo"),e.index.reLaunch({url:"/pages/index/index"}))})},miniProLogin:function(o){console.log("e===",o),e.index.login({provider:"weixin",success:function(t){console.log("loginRes=",t.authResult)}})},wechatLogin:function(){e.index.showToast({title:"\u5F85\u4E0A\u7EBF",duration:2e3})},qqLogin:function(){e.index.showToast({title:"\u5F85\u4E0A\u7EBF",duration:2e3})},weiboLogin:function(){e.index.showToast({title:"\u5F85\u4E0A\u7EBF",duration:2e3})},getInfo:function(o){console.log("\u767B\u5F55e=",o),e.index.login({provider:"weixin",success:function(t){console.log("loginRes====",t);const{code:l}=t;u.loginWechat({code:l}).then("res===",res)}})},openDemo:function(){this.demoVisible=!0},onClose:function(){this.demoVisible=!1}}};if(!Array){const o=e.resolveComponent("show-modal"),t=e.resolveComponent("vuew"),l=e.resolveComponent("uni-link");(o+t+l)()}const m=()=>"../../uni_modules/uni-link/components/uni-link/uni-link.js";Math||m();function g(o,t,l,r,s,n){return e.e({a:e.o$1((...i)=>n.onInput&&n.onInput(...i)),b:e.o$1((...i)=>n.onInputCode&&n.onInputCode(...i)),c:e.t(s.codeMessage),d:!s.sendCaptchaEnabled},s.sendCaptchaEnabled?{}:{e:e.t(s.counterTimer)},{f:!s.sendCaptchaEnabled||s.codeVisible,g:e.o$1((...i)=>n.sendCaptcha&&n.sendCaptcha(...i)),h:s.loginVisible,i:e.o$1((...i)=>n.formSubmit&&n.formSubmit(...i)),j:e.o$1((...i)=>o.formReset&&o.formReset(...i)),k:s.demoVisible},s.demoVisible?{l:e.o$1(n.onClose),m:e.p({title:"\u8BF7\u9009\u62E9\u8D26\u53F7",content:"\u8BF7\u4EFB\u610F\u9009\u62E9\u4E00\u4E2A\u8D26\u53F7\u767B\u5F55"})}:{},{n:e.o$1((...i)=>n.openDemo&&n.openDemo(...i)),o:e.o$1((...i)=>n.miniProLogin&&n.miniProLogin(...i)),p:e.o$1((...i)=>n.getInfo&&n.getInfo(...i)),q:e.p({showUnderLine:!1,href:"https://beian.miit.gov.cn/",text:"\u7CA4ICP\u59072021179573\u53F7"})})}var f=e._export_sfc(h,[["render",g],["__scopeId","data-v-247e7dd8"],["__file","C:/myself/social/social/src/pages/login/index.vue"]]);wx.createPage(f);
//# sourceMappingURL=index.js.map
