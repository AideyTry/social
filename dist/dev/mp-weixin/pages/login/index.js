"use strict";var o=require("../../common/vendor.js"),r=require("../../api/user.js"),a=require("../../utils/auth.js"),u=require("../../api/wechat.js");require("../../utils/request.js");const d=()=>"../components/ShowModal.js",h={components:{ShowModal:d},data(){return{codeVisible:!0,loginVisible:!0,demoVisible:!1,sendCaptchaEnabled:!0,codeMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801",counterTimer:60,phoneNumber:null}},methods:{onInput:function(e){console.log("input e=",e),/^1[3456789]\d{9}$/.test(e.detail.value)?(this.codeVisible=!1,this.phoneNumber=e.detail.value):this.codeVisible=!0},onInputCode:function(e){console.log("code=",e),/^\d{6}$/.test(e.detail.value)?this.loginVisible=!1:this.loginVisible=!0},sendCaptcha:function(e){if(console.log("button e=",e),!this.sendCaptchaEnabled)return;this.sendCaptchaEnabled=!1;const n={phone:this.phoneNumber};console.log("params===",n),r.sendCode(n).then(c=>{console.log("res=",c)}),this.codeMessage="\u91CD\u65B0\u53D1\u9001";const l=setInterval(()=>{if(this.counterTimer<=0){this.counterTimer=60,this.sendCaptchaEnabled=!0,clearInterval(l),this.codeMessage="\u83B7\u53D6\u9A8C\u8BC1\u7801";return}this.counterTimer--},1e3)},formSubmit:function(e){console.log("e=",e),console.log("form\u53D1\u751F\u4E86submit\u4E8B\u4EF6\uFF0C\u643A\u5E26\u6570\u636E\u4E3A\uFF1A"+JSON.stringify(e.detail.value));const n=e.detail.value,l=this;r.codePhoneLogin(n).then(c=>{console.log("res========",c);const{code:i,token:s}=c.data;i===200&&(console.log("\u6210\u529F"),a.setToken(s),l.$store.dispatch("user/GetUserInfo"),o.index.reLaunch({url:"/pages/index/index"}))})},miniProLogin:function(e){console.log("e===",e),o.index.login({provider:"weixin",success:function(n){console.log("loginRes=",n.authResult)}})},wechatLogin:function(){o.index.showToast({title:"\u5F85\u4E0A\u7EBF",duration:2e3})},qqLogin:function(){o.index.showToast({title:"\u5F85\u4E0A\u7EBF",duration:2e3})},weiboLogin:function(){o.index.showToast({title:"\u5F85\u4E0A\u7EBF",duration:2e3})},getInfo:function(e){console.log("\u767B\u5F55e=",e),o.index.login({provider:"weixin",success:function(n){console.log("loginRes====",n);const{code:l}=n;u.loginWechat({code:l}).then("res===",res)}})},openDemo:function(){this.demoVisible=!0},onClose:function(){this.demoVisible=!1}}};if(!Array){const e=o.resolveComponent("show-modal"),n=o.resolveComponent("uni-link");(e+n)()}const m=()=>"../../uni_modules/uni-link/components/uni-link/uni-link.js";Math||m();function f(e,n,l,c,i,s){return o.e({a:o.o$1((...t)=>s.onInput&&s.onInput(...t)),b:o.o$1((...t)=>s.onInputCode&&s.onInputCode(...t)),c:o.t(i.codeMessage),d:!i.sendCaptchaEnabled},i.sendCaptchaEnabled?{}:{e:o.t(i.counterTimer)},{f:!i.sendCaptchaEnabled||i.codeVisible,g:o.o$1((...t)=>s.sendCaptcha&&s.sendCaptcha(...t)),h:i.loginVisible,i:o.o$1((...t)=>s.formSubmit&&s.formSubmit(...t)),j:o.o$1((...t)=>e.formReset&&e.formReset(...t)),k:i.demoVisible},i.demoVisible?{l:o.o$1(s.onClose),m:o.p({title:"\u8BF7\u9009\u62E9\u8D26\u53F7",content:"\u8BF7\u4EFB\u610F\u9009\u62E9\u4E00\u4E2A\u8D26\u53F7\u767B\u5F55"})}:{},{n:o.p({showUnderLine:!1,href:"https://beian.miit.gov.cn/",text:"\u7CA4ICP\u59072021179573\u53F7"})})}var g=o._export_sfc(h,[["render",f],["__scopeId","data-v-247e7dd8"],["__file","C:/myself/social/social/src/pages/login/index.vue"]]);wx.createPage(g);
//# sourceMappingURL=index.js.map
