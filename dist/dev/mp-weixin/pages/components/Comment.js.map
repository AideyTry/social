{"version":3,"file":"Comment.js","sources":["../../../../../src/pages/components/Comment.vue","../../../../../uniComponent:/QzovbXlzZWxmL3NvY2lhbC9zb2NpYWwvc3JjL3BhZ2VzL2NvbXBvbmVudHMvQ29tbWVudC52dWU"],"sourcesContent":["<!--\r\n * @Author: Aiden(戴林波)\r\n * @Date: 2022-02-28 14:49:16\r\n * @LastEditTime: 2022-04-10 16:12:13\r\n * @LastEditors: Aiden(戴林波)\r\n * @Description: \r\n * @Email: jason_dlb@sina.cn\r\n-->\r\n<template>\r\n  <div class=\"comment\">\r\n    <view class=\"total\"\r\n      ><text>共</text><text>{{ total }}</text\r\n      ><text>条评论</text></view\r\n    >\r\n    <view class=\"my-comment\">\r\n      <image\r\n        class=\"avatar\"\r\n        mode=\"aspectFit\"\r\n        :src=\"hobbyInfo.avatar || ''\"\r\n      ></image>\r\n      <input\r\n        v-model=\"inputString\"\r\n        type=\"text\"\r\n        class=\"comment-input\"\r\n        placeholder=\"喜欢就给个评论支持一下呗~\"\r\n        @confirm=\"confirm\"\r\n      />\r\n    </view>\r\n    <view class=\"other-comment\" v-for=\"item in comments\" :key=\"item.id\">\r\n      <view>\r\n        <image\r\n          class=\"avatar\"\r\n          mode=\"aspectFit\"\r\n          :src=\"item.avatar || ''\"\r\n        ></image>\r\n      </view>\r\n      <view class=\"comment-info\">\r\n        <view class=\"userinfo\"><text>{{item.username}}</text><text v-if=\"item.isAuthor\" class=\"is-author\">作者</text></view>\r\n        <view class=\"comment-content\"\r\n          ><text\r\n            >{{item.comment}}</text\r\n          ></view>\r\n          <view>\r\n              <text>{{$filters.commentTime(item.create_time)}}</text>\r\n          </view>\r\n      </view>\r\n    </view>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"comment\",\r\n};\r\n</script>\r\n<script setup>\r\nimport { setComment, getComment } from \"@/api/communication.js\";\r\nimport { ref, nextTick, onMounted } from \"vue\";\r\nconst props = defineProps({\r\n  hobbyInfo: {\r\n    type: Object,\r\n    default: {},\r\n  },\r\n});\r\nlet inputString = ref('')\r\nlet total = ref(0)\r\nlet comments = ref([])\r\nconsole.log(\"props=\", props);\r\n\r\nconst confirm = (e) => {\r\n    console.log('e=', e)\r\n    const { detail: { value } } = e\r\n    let params = {\r\n        comment: value,\r\n        detailUserId: props.hobbyInfo.user_id,\r\n        hobbyId: props.hobbyInfo[`hobby_${props.hobbyInfo.hobby}_id`],\r\n        hobby: props.hobbyInfo.hobby\r\n    }\r\n    setComment(params).then(data => {\r\n        if(data.statusCode === 200){\r\n          inputString.value = ''\r\n            getCommentData()\r\n        }\r\n    })\r\n}\r\n\r\nconst getCommentData = () => {\r\n  console.log('props.hobbyInfo=======================', props.hobbyInfo)\r\n    let params = {\r\n        hobbyId: props.hobbyInfo[`hobby_${props.hobbyInfo.hobby}_id`],\r\n        hobby: props.hobbyInfo.hobby\r\n    }\r\n    getComment(params).then(data => {\r\n            console.log('data666666===', data)\r\n            if(data.data.code === 200){\r\n                comments.value = data.data.data\r\n                total.value= data.data.data.length\r\n            }\r\n        })\r\n}\r\n\r\nonMounted(() => {\r\n  nextTick(() => {\r\n    getCommentData()\r\n  })\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.comment {\r\n  .total {\r\n    font-size: 28rpx;\r\n  }\r\n  .my-comment {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 60rpx;\r\n    padding: 20rpx 0;\r\n  }\r\n  .avatar {\r\n    width: 52rpx;\r\n    height: 52rpx;\r\n    border-radius: 50%;\r\n    background-color: #fdfdfd;\r\n    margin-right: 15rpx;\r\n  }\r\n  .comment-input {\r\n    margin-left: 20rpx;\r\n    width: calc(100vw - 124rpx);\r\n    height: 100%;\r\n    background: #ddd;\r\n    border-radius: 40rpx;\r\n  }\r\n  .other-comment {\r\n    display: flex;\r\n    font-size: 28rpx;\r\n    padding-bottom: 10rpx;\r\n    border-bottom: 1rpx solid #ccc;\r\n    .comment-info {\r\n      color: #363636;\r\n      & > view{\r\n          margin-bottom: 10rpx;\r\n      }\r\n      .is-author{\r\n          display: inline-block;\r\n          margin-left: 10rpx;\r\n          background-color: #dfdfdf;\r\n          font-size: 24rpx;\r\n          border-radius: 10rpx;\r\n          color: #888;\r\n      }\r\n      .userinfo {\r\n        color: #ddd;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import Component from 'C:/myself/social/social/src/pages/components/Comment.vue'\nwx.createComponent(Component)"],"names":["ref","setComment","getComment","onMounted","nextTick"],"mappings":";;;;;AAmDA,oBAAe;AAAA,EACb,MAAM;AACR;;;;;;;;;;AAWA,QAAI,cAAcA,kBAAI,EAAE;AACxB,QAAI,QAAQA,kBAAI,CAAC;AACjB,QAAI,WAAWA,kBAAI,EAAE;AACrB,YAAQ,IAAI,UAAU,KAAK;AAE3B,UAAM,UAAU,CAAC,MAAM;AACnB,cAAQ,IAAI,MAAM,CAAC;AACnB,YAAM,EAAE,QAAQ,EAAE,YAAY;AAC9B,UAAI,SAAS;AAAA,QACT,SAAS;AAAA,QACT,cAAc,MAAM,UAAU;AAAA,QAC9B,SAAS,MAAM,UAAU,SAAS,MAAM,UAAU;AAAA,QAClD,OAAO,MAAM,UAAU;AAAA;AAE3BC,mCAAW,MAAM,EAAE,KAAK,UAAQ;AAC5B,YAAG,KAAK,eAAe,KAAI;AACzB,sBAAY,QAAQ;AAClB;;OAEP;AAAA,IACL;AAEA,UAAM,iBAAiB,MAAM;AAC3B,cAAQ,IAAI,0CAA0C,MAAM,SAAS;AACnE,UAAI,SAAS;AAAA,QACT,SAAS,MAAM,UAAU,SAAS,MAAM,UAAU;AAAA,QAClD,OAAO,MAAM,UAAU;AAAA;AAE3BC,mCAAW,MAAM,EAAE,KAAK,UAAQ;AACxB,gBAAQ,IAAI,iBAAiB,IAAI;AACjC,YAAG,KAAK,KAAK,SAAS,KAAI;AACtB,mBAAS,QAAQ,KAAK,KAAK;AAC3B,gBAAM,QAAO,KAAK,KAAK,KAAK;AAAA;OAEnC;AAAA,IACT;AAEAC,4BAAU,MAAM;AACdC,6BAAS,MAAM;AACb;OACD;AAAA,IACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;ACxGD,GAAG,gBAAgB,SAAS;"}