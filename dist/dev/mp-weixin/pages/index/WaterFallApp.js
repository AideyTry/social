"use strict";var e=require("../../common/vendor.js"),v=require("../../api/communication.js");require("../../utils/request.js");require("../../utils/auth.js");const k={name:"waterFall"},_=Object.assign(k,{props:{list:{type:Array,default:[]},activeIndex:{type:Number,default:1}},setup(u){const i=u;e.ref([]);let r=e.ref(i.list),n=e.reactive([{height:0,list:[]},{height:0,list:[]}]),c=e.ref(328);const h=l=>{console.log("item=",l),console.log("props===",i),console.log("item.id========",l.id),console.log("props.activeIndex=====",i.activeIndex),e.index.navigateTo({url:`/pages/index/HobbyDetailMountain?id=${l.id}&hobby=${i.activeIndex}`})},f=(l,s)=>{console.log("ev================",l),console.log("item================,",s);let t=l.detail.height*c.value/l.detail.width;console.log("height==================",t),n[0].height<=n[1].height?(n[0].list.push(r.value.shift()),n[0].height+=t):(n[1].list.push(r.value.shift()),n[1].height+=t)},g=l=>{console.log("item=",l);let s=e.index.getStorageSync("like")||[];if(s.includes(l.id)){console.log("isOK=",s);for(let a=0;a<s.length;a++)s[a]===l.id&&s.splice(a,1);l.likes-=1,l.likeFlag=!1,e.index.setStorageSync("like",s)}else l.likes+=1,l.likeFlag=!0,console.log("likeIds=",s),s.unshift(l.id),e.index.setStorageSync("like",s);const t={hobby:i.activeIndex,hobbyId:l.id};v.setLike(t).then(a=>{console.log("like data=",a)})};return e.watchEffect(()=>{r.value=i.list}),e.onMounted(()=>{console.log("list1=",i.list),console.log("6666lists================",r)}),e.onUpdated(()=>{console.log("list2=",i.list),console.log("6666lists================",r.value),console.log("waterfall.value===",n)}),e.onBeforeUnmount(()=>{console.log("onBeforeUnmount==========================")}),e.onUnmounted(()=>{console.log("===\u5378\u8F7D\u5566\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002"),n=e.reactive([{height:0,list:[]},{height:0,list:[]}])}),(l,s)=>({a:e.f(i.list,(t,a,p)=>e.e({a:t.url},t.url?{b:t.url,c:e.o$1(o=>f(o,t))}:{},{d:t.id})),b:e.f(e.unref(n),(t,a,p)=>({a:e.f(t.list,(o,x,y)=>e.e({a:e.t(o.title),b:o.url,c:o.fileType},o.fileType?{}:{},{d:e.t(o.title),e:o.avatar,f:e.t(o.username),g:o.likeFlag},o.likeFlag?{h:e.o$1(d=>g(o))}:{i:e.o$1(d=>g(o))},{j:e.t(o.likes),k:o.id,l:e.o$1(d=>h(o),o.id)})),b:t.height})),c:e.unref(c)+"rpx"})}});var b=e._export_sfc(_,[["__scopeId","data-v-6deeb950"],["__file","C:/myself/social/social/src/pages/index/WaterFallApp.vue"]]);wx.createComponent(b);
//# sourceMappingURL=WaterFallApp.js.map
