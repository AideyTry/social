"use strict";var e=require("../../common/vendor.js"),I=require("../../utils/auth.js"),l=require("../../api/communication.js"),c=require("../../api/publish.js");require("../../utils/openIM.js");var b=require("../../utils/storage.js");require("../../utils/request.js");Math||j();const j=()=>"../components/InfoList.js",q={onShow:function(){b.getTotalIM()>0?e.index.setTabBarBadge({index:2,text:"\xB7\xB7\xB7"}):e.index.removeTabBarBadge({index:2})}},F=Object.assign(q,{setup(y){const f="/static/images/default_avatar.png",g=e.useStore(),o=e.computed$1(()=>g.state.user.userInfo).value,d=()=>{new Promise((t,n)=>{I.removeToken(),t()}).then(()=>{e.index.reLaunch({url:"/pages/login/index"})})},v=()=>{e.index.navigateTo({url:"/pages/user/info/index"})};let r=e.ref([]),i=e.ref([]),p=()=>{l.getFollows().then(t=>{console.log("getfollows =",t),t.data.code===200&&(r.value=t.data.follows)})},h=()=>{l.getFans().then(t=>{console.log("getfans =",t),t.data.code===200&&(i.value=t.data.fans)})};const m=()=>{const t=[];for(let n of r.value)t.push(n.follow_id);e.index.navigateTo({url:`/pages/user/info/Follow?type=${0}&userids=${encodeURIComponent(JSON.stringify(t))}`})},_=()=>{const t=[];for(let n of i.value)t.push(n.user_id);e.index.navigateTo({url:`/pages/user/info/Follow?type=${1}&userids=${encodeURIComponent(JSON.stringify(t))}`})};let a=e.ref(0),s=e.ref([]);const x=()=>{s.value=[],c.getPublish().then(t=>{console.log("data getPublish=",t),t.data.code===200&&(s.value=t.data.data)})};e.ref([]);const w=()=>{s.value=[],c.getMylikes().then(t=>{console.log("data likes=",t),t.data.code===200&&(s.value=t.data.data)})},u=t=>{a.value=t};return e.watchEffect(()=>{a.value===0?x():w()},a.value),e.onMounted(()=>{p(),h()}),(t,n)=>e.e({a:e.unref(o).avatar?e.unref(o).avatar:f,b:!e.unref(o).avatar},e.unref(o).avatar?{}:{},{c:e.o$1(v),d:e.t(e.unref(o).username),e:e.t(e.unref(o).motto),f:e.t(e.unref(r).length),g:e.o$1(m),h:e.t(e.unref(i).length),i:e.o$1(_),j:e.unref(a)===0?1:"",k:e.o$1($=>u(0)),l:e.unref(a)===1?1:"",m:e.o$1($=>u(1)),n:e.p({list:e.unref(s),activeIndex:e.unref(a)}),o:e.o$1(d)},{})}});var T=e._export_sfc(F,[["__scopeId","data-v-4070cfdc"],["__file","C:/myself/social/social/src/pages/user/index.vue"]]);wx.createPage(T);
//# sourceMappingURL=index.js.map
