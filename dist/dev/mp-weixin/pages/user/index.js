"use strict";var e=require("../../common/vendor.js"),$=require("../../utils/auth.js"),l=require("../../api/communication.js"),f=require("../../api/publish.js");require("../../utils/openIM.js");var b=require("../../utils/storage.js");require("../../utils/request.js");Math||j();const j=()=>"../components/InfoList.js",q={onShow:function(){b.getTotalIM()>0?e.index.setTabBarBadge({index:2,text:"\xB7\xB7\xB7"}):e.index.removeTabBarBadge({index:2})}},F=Object.assign(q,{setup(y){const c="/static/images/default_avatar.png",g=e.useStore(),o=e.computed$1(()=>g.state.user.userInfo).value,d=()=>{new Promise((t,s)=>{$.removeToken(),t()}).then(()=>{e.index.reLaunch({url:"/pages/login/index"})})},v=()=>{e.index.navigateTo({url:"/pages/userInfo/infoIndex/InfoIndex"})};let r=e.ref([]),i=e.ref([]),p=()=>{l.getFollows().then(t=>{console.log("getfollows =",t),t.data.code===200&&(r.value=t.data.follows)})},h=()=>{l.getFans().then(t=>{console.log("getfans =",t),t.data.code===200&&(i.value=t.data.fans)})};const m=()=>{const t=[];for(let s of r.value)t.push(s.follow_id);e.index.navigateTo({url:`/pages/user/info/Follow?type=${0}&userids=${encodeURIComponent(JSON.stringify(t))}`})},_=()=>{const t=[];for(let s of i.value)t.push(s.user_id);e.index.navigateTo({url:`/pages/user/info/Follow?type=${1}&userids=${encodeURIComponent(JSON.stringify(t))}`})};let n=e.ref(0),a=e.ref([]);const x=()=>{a.value=[],f.getPublish().then(t=>{console.log("data getPublish=",t),t.data.code===200&&(a.value=t.data.data)})};e.ref([]);const I=()=>{a.value=[],f.getMylikes().then(t=>{console.log("data likes=",t),t.data.code===200&&(a.value=t.data.data)})},u=t=>{n.value=t};return e.watchEffect(()=>{n.value===0?x():I()},n.value),e.onMounted(()=>{p(),h()}),(t,s)=>e.e({a:e.unref(o).avatar?e.unref(o).avatar:c,b:!e.unref(o).avatar},e.unref(o).avatar?{}:{},{c:e.o$1(v),d:e.t(e.unref(o).username),e:e.t(e.unref(o).motto),f:e.t(e.unref(r).length),g:e.o$1(m),h:e.t(e.unref(i).length),i:e.o$1(_),j:e.unref(n)===0?1:"",k:e.o$1(w=>u(0)),l:e.unref(n)===1?1:"",m:e.o$1(w=>u(1)),n:e.p({list:e.unref(a),activeIndex:e.unref(n)}),o:e.o$1(d)},{})}});var T=e._export_sfc(F,[["__scopeId","data-v-4070cfdc"],["__file","C:/myself/social/social/src/pages/user/index.vue"]]);wx.createPage(T);
//# sourceMappingURL=index.js.map
