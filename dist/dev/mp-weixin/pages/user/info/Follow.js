"use strict";var o=require("../../../common/vendor.js"),f=require("../../../api/communication.js");require("../../../utils/request.js");require("../../../utils/auth.js");const w={name:"follow",setup(c){let a=o.ref([]),r=o.ref(!1),l=o.ref("\u5173\u6CE8");const d=t=>{if(r.value){o.index.showModal({content:"\u786E\u8BA4\u4E0D\u518D\u5173\u6CE8\uFF1F",success:function(e){if(e.confirm){let i={followId:t.user_id};f.deleteFollow(i).then(g=>{g.data.code===200&&(l.value="\u5173\u6CE8",r.value=!1,n(JSON.parse(decodeURIComponent(c.userids))))})}else e.cancel&&console.log("\u7528\u6237\u70B9\u51FB\u53D6\u6D88")}});return}let s={followId:t.user_id};f.setFollow(s).then(e=>{console.log("data===",e),e.data.code===200?(l.value="\u5DF2\u5173\u6CE8",r.value=!0):e.data.code===400&&o.index.showToast({title:e.data.msg,icon:"none",duration:2e3})})},u=t=>{let s={followId:t.user_id};console.log("params===",s),f.getFollow(s).then(e=>{console.log("data1===",e),e.data.code===200&&(r.value=e.data.isFollow,e.data.isFollow?l.value="\u5DF2\u5173\u6CE8":l.value="\u5173\u6CE8")})},n=t=>{const s={userids:t};parseInt(c.type)===0?(o.index.setNavigationBarTitle({title:"\u5173\u6CE8"}),f.getFollowsInfo(s).then(e=>{e.data.code===200&&(a.value=e.data.followsInfo,a.value=a.value.filter(i=>i),console.log("infoList.value====",a.value),a.value.forEach(i=>{u(i)}))})):parseInt(c.type)===1&&(o.index.setNavigationBarTitle({title:"\u7C89\u4E1D"}),f.getFansInfo(s).then(e=>{console.log("getFansInfo===",e),e.data.code===200&&(a.value=e.data.fansInfo,a.value=a.value.filter(i=>i),a.value.forEach(i=>{u(i)}))}))},v=t=>{console.log("info======",t),o.index.navigateTo({url:`/pages/user/info/User?id=${t.user_id}`})};return o.onMounted(()=>{n(JSON.parse(decodeURIComponent(c.userids)))}),{infoList:a,followText:l,isFlollow:r,following:d,goUserDetail:v}}};function _(c,a,r,l,d,u){return{a:o.f(l.infoList,(n,v,t)=>({a:n.avatar||"",b:o.t(n.title),c:o.t(n.username),d:o.t(n.motto),e:o.o$1(s=>l.following(n)),f:n.id,g:o.o$1(s=>l.goUserDetail(n),n.id)})),b:o.t(l.followText),c:l.isFlollow?"":1,d:l.isFlollow?1:""}}var m=o._export_sfc(w,[["render",_],["__scopeId","data-v-37177592"],["__file","C:/myself/social/social/src/pages/user/info/Follow.vue"]]);wx.createPage(m);
//# sourceMappingURL=Follow.js.map
