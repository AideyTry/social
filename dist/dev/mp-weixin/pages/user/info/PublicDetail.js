"use strict";var o=require("../../../common/vendor.js"),p=require("../../../api/hobby.js"),_=require("../../../api/publish.js"),x=require("../../../utils/util.js");require("../../../utils/request.js");require("../../../utils/auth.js");const j=()=>"../../components/Comment.js",P=()=>"../../components/VideoPlayer.js",q={components:{Comment:j,VideoPlayer:P},onLoad:function(n){console.log("options===",n)},onReady:function(){},setup(n){console.log("props=",n);const s=o.useStore(),u=o.computed$1(()=>s.state.user.userInfo).value,e=o.reactive({poster:"",src:""});let y=o.ref([{content:"https://social-1308251497.cos.ap-guangzhou.myqcloud.com/images/4.jfif"}]);o.ref(0),o.ref("default");let c=o.ref({});const l=a=>{const{id:i,hobby:f}=a,h={id:i,hobby:f};p.getHobbyDetail(h).then(t=>{console.log("data===",t),t.data.code===200&&(c.value=t.data.data,b.value=x.formatDate(t.data.data.create_time),console.log("hobbyInfo.value===",c.value),console.log("data.data.data.url===",t.data.data.url),e.poster=t.data.data.url,e.src=t.data.data.video_url)})},r=()=>{o.index.switchTab({url:"/pages/user/index"})};let b=o.ref(null),m=o.ref(["\u7F16\u8F91","\u5220\u9664"]),d=o.ref(0);const g=a=>{console.log("info==",a),o.index.navigateTo({url:`/pages/user/info/EditDetail?id=${a.id}&hobby=${a.hobby}`})},I=a=>{console.log("info==",a),o.index.showModal({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\uFF1F",success:function(i){if(i.confirm){const f={hobby:n.hobby,id:n.id};_.deletePublish(f).then(h=>{h.data.code===200&&(o.index.showToast({title:"\u5220\u9664\u6210\u529F",duration:2e3}),o.index.switchTab({url:"/pages/user/index",success(){let t=getCurrentPages().pop();console.log("page==============",t),t&&t.onLoad()}}))})}else i.cancel}})},v=a=>{o.index.showActionSheet({itemList:m,success:function(i){console.log("\u9009\u4E2D\u4E86\u7B2C"+(i.tapIndex+1)+"\u4E2A\u6309\u94AE"),d.value=i.tapIndex,d.value===1?I(n):g(n)},fail:function(i){console.log(i.errMsg)}})};return o.onMounted(()=>{console.log("userInfo===",u),l({id:n.id,hobby:n.hobby})}),{hobbyInfo:c,info:y,publishDate:b,options:e,goBack:r,onEdit:v,operations:m,activeOperationIndex:d}}};if(!Array){const n=o.resolveComponent("VideoPlayer"),s=o.resolveComponent("Comment");(n+s)()}function C(n,s,u,e,y,c){return o.e({a:o.o$1((...l)=>e.goBack&&e.goBack(...l)),b:e.hobbyInfo.avatar||"",c:o.t(e.hobbyInfo.username||""),d:o.o$1((...l)=>e.onEdit&&e.onEdit(...l)),e:e.hobbyInfo.fileType===0},e.hobbyInfo.fileType===0?{f:o.f(e.hobbyInfo.photos,(l,r,b)=>({a:l,b:r})),g:e.hobbyInfo.photos.length>1}:{},{h:e.hobbyInfo.fileType===1},e.hobbyInfo.fileType===1?{i:e.hobbyInfo.id,j:o.p({options:{src:e.hobbyInfo.video_url,poster:e.hobbyInfo.url}})}:{},{k:o.t(e.hobbyInfo.title),l:o.t(e.hobbyInfo.content),m:o.t(e.publishDate),n:e.hobbyInfo.id},e.hobbyInfo.id?{o:e.hobbyInfo.id,p:o.p({hobbyInfo:e.hobbyInfo})}:{})}var D=o._export_sfc(q,[["render",C],["__scopeId","data-v-cc42b28a"],["__file","C:/myself/social/social/src/pages/user/info/PublicDetail.vue"]]);wx.createPage(D);
//# sourceMappingURL=PublicDetail.js.map
