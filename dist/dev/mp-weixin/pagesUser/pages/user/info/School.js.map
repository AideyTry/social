{"version":3,"file":"School.js","sources":["../../../../../../../src/pagesUser/pages/user/info/School.vue","../../../../../../../uniPage:/cGFnZXNVc2VyXHBhZ2VzXHVzZXJcaW5mb1xTY2hvb2wudnVl"],"sourcesContent":["<!--\r\n * @Author: Aiden(戴林波)\r\n * @Date: 2021-12-29 14:06:11\r\n * @LastEditTime: 2022-01-01 15:50:27\r\n * @LastEditors: Aiden(戴林波)\r\n * @Description: \r\n * @Email: jason_dlb@sina.cn\r\n-->\r\n<template>\r\n  <div class=\"school\">\r\n    <uni-search-bar placeholder=\"请输入学校名称\" @confirm=\"search\" v-model=\"schoolName\"></uni-search-bar>\r\n    <uni-list v-if=\"schools.length\">\r\n      <uni-list-item\r\n        v-for=\"item in schools\"\r\n        :key=\"item.code\"\r\n        :title=\"item.name\"\r\n        :clickable=\"true\"\r\n        @click=\"onChecked(item)\"\r\n        style=\"text-align: center\"\r\n      ></uni-list-item>\r\n      <uni-list-item\r\n        v-if=\"isShowMore\"\r\n        :clickable=\"true\"\r\n        title=\"加载更多...\"\r\n        style=\"text-align: center\"\r\n        @click=\"onLoadMore\"\r\n      ></uni-list-item>\r\n    </uni-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"school\",\r\n};\r\n</script>\r\n\r\n<script setup>\r\nimport { ref, reactive } from \"vue\";\r\nimport { getSchool } from \"../../../../api/user\";\r\n\r\nlet schools = ref([]);\r\nlet pageNum = ref(1)\r\nlet queryString = ref('')\r\nlet schoolName = ref('')\r\nlet isShowMore = ref(false)\r\n\r\nconst searchSchool = (query, page) => {\r\n    const params = {\r\n    name: query,\r\n    page: String(page),\r\n  }\r\n  getSchool(params).then((data) => {\r\n    console.log(\"data===\", data);\r\n    schools.value = [...schools.value, ...data.data.data];\r\n    console.log('schools.value=====', schools.value)\r\n    isShowMore.value = true\r\n    if(data.data.data.length < 10){\r\n      isShowMore.value = false\r\n    }\r\n    if(page === 1 && schools.value.length === 0){\r\n      schools.value = [{name: '其他学校'}]\r\n    }\r\n    console.log('schools=', schools)\r\n  })\r\n}\r\n\r\nconst search = (e) => {\r\n  console.log(\"e===\", e);\r\n  const { value } = e;\r\n  queryString.value = value\r\n  schools.value = []\r\n  searchSchool(value, 1)\r\n};\r\nconst onLoadMore = () => {\r\n  pageNum.value++\r\n  console.log('pageNum.value===', pageNum.value)\r\n  searchSchool(queryString.value, pageNum.value)\r\n\r\n}\r\nconst onChecked = (item) => {\r\n  schoolName.value = item.name\r\n  schools.value = []\r\n    uni.navigateTo({\r\n    url: `/pages/user/info/Editor?schoolName=${schoolName.value}`\r\n});\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>","import MiniProgramPage from 'C:/myself/social/social/src/pagesUser/pages/user/info/School.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getSchool","uni"],"mappings":";;;;;;;;;;;;;;;;;AAgCA,oBAAe;AAAA,EACb,MAAM;AACR;;;AAOA,QAAI,UAAUA,kBAAI,EAAE;AACpB,QAAI,UAAUA,kBAAI,CAAC;AACnB,QAAI,cAAcA,kBAAI,EAAE;AACxB,QAAI,aAAaA,kBAAI,EAAE;AACvB,QAAI,aAAaA,kBAAI,KAAK;AAE1B,UAAM,eAAe,CAAC,OAAO,SAAS;AAClC,YAAM,SAAS;AAAA,QACf,MAAM;AAAA,QACN,MAAM,OAAO,IAAI;AAAA;AAEnBC,yBAAU,MAAM,EAAE,KAAK,CAAC,SAAS;AAC/B,gBAAQ,IAAI,WAAW,IAAI;AAC3B,gBAAQ,QAAQ,CAAC,GAAG,QAAQ,OAAO,GAAG,KAAK,KAAK,IAAI;AACpD,gBAAQ,IAAI,sBAAsB,QAAQ,KAAK;AAC/C,mBAAW,QAAQ;AACnB,YAAG,KAAK,KAAK,KAAK,SAAS,IAAG;AAC5B,qBAAW,QAAQ;AAAA;AAErB,YAAG,SAAS,KAAK,QAAQ,MAAM,WAAW,GAAE;AAC1C,kBAAQ,QAAQ,CAAC,EAAC,MAAM,2BAAM,CAAC;AAAA;AAEjC,gBAAQ,IAAI,YAAY,OAAO;AAAA,OAChC;AAAA,IACH;AAEA,UAAM,SAAS,CAAC,MAAM;AACpB,cAAQ,IAAI,QAAQ,CAAC;AACrB,YAAM,EAAE,UAAU;AAClB,kBAAY,QAAQ;AACpB,cAAQ,QAAQ;AAChB,mBAAa,OAAO,CAAC;AAAA,IACvB;AACA,UAAM,aAAa,MAAM;AACvB,cAAQ;AACR,cAAQ,IAAI,oBAAoB,QAAQ,KAAK;AAC7C,mBAAa,YAAY,OAAO,QAAQ,KAAK;AAAA,IAE/C;AACA,UAAM,YAAY,CAAC,SAAS;AAC1B,iBAAW,QAAQ,KAAK;AACxB,cAAQ,QAAQ;AACdC,0BAAI,WAAW;AAAA,QACf,KAAK,sCAAsC,WAAW;AAAA,MAC1D,CAAC;AAAA,IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrFA,GAAG,WAAW,eAAe;"}