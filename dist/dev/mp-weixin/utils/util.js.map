{"version":3,"file":"util.js","sources":["../../../../src/utils/util.js"],"sourcesContent":["/*\r\n * @Author: Aiden(戴林波)\r\n * @Date: 2022-02-10 16:27:29\r\n * @LastEditTime: 2022-05-17 17:46:58\r\n * @LastEditors: Aiden(戴林波)\r\n * @Description: \r\n * @Email: jason_dlb@sina.cn\r\n */\r\nimport moment from 'moment'\r\nmoment.updateLocale('en', {\r\n  relativeTime: {\r\n    s: '%d秒前',\r\n    m: \"1分钟前\",\r\n    mm: \"%d分钟前\",\r\n    h: \"1小时前\",\r\n    hh: \"%d小时前\",\r\n    d: \"1天前\",\r\n    dd: \"%d天前\",\r\n    M: \"1个月前\",\r\n    MM: \"%d个月前\",\r\n    y: \"1年前\",\r\n    yy: \"%d年前\"\r\n  }\r\n})\r\n\r\nexport function fileParse(file, type = 'base64') {\r\n    return new Promise(resolve => {\r\n        const fileRead = new FileReader()\r\n        if(type === 'base64'){\r\n            fileRead.readAsDataURL(file)\r\n        } else if(type === 'buffer'){\r\n            fileRead.readAsArrayBuffer(file)\r\n        }\r\n        fileRead.onload = (event) => resolve(event.target.result)\r\n    })\r\n}\r\n\r\nexport function formatDate(createTime){\r\n    return moment(createTime).toNow(true)\r\n}\r\n\r\nexport const formatMsgDate = (timestamp) => {\r\n    const week = (w) => {\r\n        switch(w){\r\n            case '1': return '一';\r\n            case '2': return '二';\r\n            case '3': return '三';\r\n            case '4': return '四';\r\n            case '5': return '五';\r\n            case '6': return '六';\r\n            case '7': return '日';\r\n        }\r\n    }\r\n    if(moment(timestamp).isSameOrAfter(moment(), \"day\")){\r\n       return moment(timestamp).format('H:mm');\r\n    } else if(moment(timestamp).isSameOrAfter(moment().subtract(1, 'day'), \"day\")){\r\n        return `昨天${moment(timestamp).format('H:mm')}`;\r\n    } else if(moment(timestamp).isSameOrAfter(moment().subtract(7, 'day'), \"day\")){\r\n        return `星期${week(moment(timestamp).format('E'))} ${moment(timestamp).format('H:mm')}`;\r\n    }else {\r\n        return moment(timestamp).format('YYYY年M月D日 H:mm');\r\n    }\r\n  };"],"names":["moment"],"mappings":"kDASAA,QAAO,aAAa,KAAM,CACxB,aAAc,CACZ,EAAG,iBACH,EAAG,sBACH,GAAI,uBACJ,EAAG,sBACH,GAAI,uBACJ,EAAG,gBACH,GAAI,iBACJ,EAAG,sBACH,GAAI,uBACJ,EAAG,gBACH,GAAI,iBAER,CAAC,EAEM,WAAmB,EAAM,EAAO,SAAU,CAC7C,MAAO,IAAI,SAAQ,GAAW,CAC1B,KAAM,GAAW,GAAI,YACrB,AAAG,IAAS,SACR,EAAS,cAAc,CAAI,EACrB,IAAS,UACf,EAAS,kBAAkB,CAAI,EAEnC,EAAS,OAAS,AAAC,GAAU,EAAQ,EAAM,OAAO,MAAM,EAC3D,CACL,CAEO,WAAoB,EAAW,CAClC,MAAOA,SAAO,CAAU,EAAE,MAAM,EAAI,CACxC,CAEY,KAAC,GAAgB,AAAC,GAAc,CACxC,KAAM,GAAO,AAAC,GAAM,CAChB,OAAO,OACE,IAAK,MAAO,aACZ,IAAK,MAAO,aACZ,IAAK,MAAO,aACZ,IAAK,MAAO,aACZ,IAAK,MAAO,aACZ,IAAK,MAAO,aACZ,IAAK,MAAO,WAGzB,MAAGA,SAAO,CAAS,EAAE,cAAcA,UAAU,KAAK,EACxCA,QAAO,CAAS,EAAE,OAAO,MAAM,EAC/BA,QAAO,CAAS,EAAE,cAAcA,UAAS,SAAS,EAAG,KAAK,EAAG,KAAK,EACjE,eAAKA,QAAO,CAAS,EAAE,OAAO,MAAM,IACrCA,QAAO,CAAS,EAAE,cAAcA,UAAS,SAAS,EAAG,KAAK,EAAG,KAAK,EACjE,eAAK,EAAKA,QAAO,CAAS,EAAE,OAAO,GAAG,CAAC,KAAKA,QAAO,CAAS,EAAE,OAAO,MAAM,IAE3EA,QAAO,CAAS,EAAE,OAAO,+BAAgB"}