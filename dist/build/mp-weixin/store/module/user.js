"use strict";var e=require("../../common/vendor.js"),s=require("../../api/user.js"),t=require("../../utils/validate.js"),r=require("../../utils/im.js"),o=require("../../utils/storage.js");const n={namespaced:!0,state:{userInfo:o.getStoreUserInfo()},getters:{getUserInfo:e=>e.userInfo||o.getStoreUserInfo()},mutations:{setUserInfo(s,r){t.validataGender(r)?t.validateObjAttr(r)||e.index.showModal({title:"提示",content:"请完善头像、昵称等个人信息资料",success:function(s){s.confirm&&e.index.reLaunch({url:"/pages/user/index"})}}):(console.log("不应该=",r),e.index.redirectTo({url:"/pages/user/gender/index"})),s.userInfo=r,o.setStoreUserInfo(r)}},actions:{async GetUserInfo({commit:e}){const{data:{code:t,data:o}}=await s.getUserInfo();console.log("data=",o),200===t&&(r.login(),e("setUserInfo",o))},async IMLogin({commit:e}){r.login()}}};exports.user=n;
//# sourceMappingURL=user.js.map
