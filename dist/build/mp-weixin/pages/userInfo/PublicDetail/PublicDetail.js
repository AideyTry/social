"use strict";var o=require("../../../common/vendor.js"),e=require("../../../api/hobby.js"),t=require("../../../api/publish.js"),n=require("../../../utils/util.js");require("../../../utils/request.js"),require("../../../utils/auth.js");const a={components:{Comment:()=>"../../components/Comment.js",VideoPlayer:()=>"../../components/VideoPlayer.js"},onLoad:function(o){console.log("options===",o)},onReady:function(){},setup(a){console.log("props=",a);const i=o.useStore(),s=o.computed$1((()=>i.state.user.userInfo)).value,l=o.reactive({poster:"",src:""});let r=o.ref([{content:"https://social-1308251497.cos.ap-guangzhou.myqcloud.com/images/4.jfif"}]);o.ref(0),o.ref("default");let b=o.ref({});let d=o.ref(null),c=o.ref(["编辑","删除"]),u=o.ref(0);return o.onMounted((()=>{console.log("userInfo===",s),(o=>{const{id:t,hobby:a}=o,i={id:t,hobby:a};e.getHobbyDetail(i).then((o=>{console.log("data===",o),200===o.data.code&&(b.value=o.data.data,d.value=n.formatDate(o.data.data.create_time),console.log("hobbyInfo.value===",b.value),console.log("data.data.data.url===",o.data.data.url),l.poster=o.data.data.url,l.src=o.data.data.video_url)}))})({id:a.id,hobby:a.hobby})})),{hobbyInfo:b,info:r,publishDate:d,options:l,goBack:()=>{o.index.switchTab({url:"/pages/user/index"})},onEdit:e=>{o.index.showActionSheet({itemList:c,success:function(e){var n;console.log("选中了第"+(e.tapIndex+1)+"个按钮"),u.value=e.tapIndex,1===u.value?(n=a,console.log("info==",n),o.index.showModal({title:"删除",content:"确定删除？",success:function(e){if(e.confirm){const e={hobby:a.hobby,id:a.id};t.deletePublish(e).then((e=>{200===e.data.code&&(o.index.showToast({title:"删除成功",duration:2e3}),o.index.switchTab({url:"/pages/user/index",success(){let o=getCurrentPages().pop();console.log("page==============",o),o&&o.onLoad()}}))}))}else e.cancel}})):(e=>{console.log("info==",e),o.index.navigateTo({url:`/pages/userInfo/EditDetail/EditDetail?id=${e.id}&hobby=${e.hobby}`})})(a)},fail:function(o){console.log(o.errMsg)}})},operations:c,activeOperationIndex:u}}};if(!Array){(o.resolveComponent("VideoPlayer")+o.resolveComponent("Comment"))()}var i=o._export_sfc(a,[["render",function(e,t,n,a,i,s){return o.e({a:o.o$1(((...o)=>a.goBack&&a.goBack(...o))),b:a.hobbyInfo.avatar||"",c:o.t(a.hobbyInfo.username||""),d:o.o$1(((...o)=>a.onEdit&&a.onEdit(...o))),e:0===a.hobbyInfo.fileType},0===a.hobbyInfo.fileType?{f:o.f(a.hobbyInfo.photos,((o,e,t)=>({a:o,b:e}))),g:a.hobbyInfo.photos.length>1}:{},{h:1===a.hobbyInfo.fileType},1===a.hobbyInfo.fileType?{i:a.hobbyInfo.id,j:o.p({options:{src:a.hobbyInfo.video_url,poster:a.hobbyInfo.url}})}:{},{k:o.t(a.hobbyInfo.title),l:o.t(a.hobbyInfo.content),m:o.t(a.publishDate),n:a.hobbyInfo.id},a.hobbyInfo.id?{o:a.hobbyInfo.id,p:o.p({hobbyInfo:a.hobbyInfo})}:{})}],["__scopeId","data-v-5c19c704"]]);wx.createPage(i);
//# sourceMappingURL=PublicDetail.js.map
