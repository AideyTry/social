"use strict";var e=require("../../common/vendor.js"),o=require("../../api/user.js"),n=require("../../utils/auth.js"),i=require("../../api/wechat.js");require("../../utils/request.js");const t={components:{ShowModal:()=>"../components/ShowModal.js"},data:()=>({codeVisible:!0,loginVisible:!0,demoVisible:!1,sendCaptchaEnabled:!0,codeMessage:"获取验证码",counterTimer:60,phoneNumber:null}),methods:{onInput:function(e){console.log("input e=",e),/^1[3456789]\d{9}$/.test(e.detail.value)?(this.codeVisible=!1,this.phoneNumber=e.detail.value):this.codeVisible=!0},onInputCode:function(e){console.log("code=",e),/^\d{6}$/.test(e.detail.value)?this.loginVisible=!1:this.loginVisible=!0},sendCaptcha:function(e){if(console.log("button e=",e),!this.sendCaptchaEnabled)return;this.sendCaptchaEnabled=!1;const n={phone:this.phoneNumber};console.log("params===",n),o.sendCode(n).then((e=>{console.log("res=",e)})),this.codeMessage="重新发送";const i=setInterval((()=>{if(this.counterTimer<=0)return this.counterTimer=60,this.sendCaptchaEnabled=!0,clearInterval(i),void(this.codeMessage="获取验证码");this.counterTimer--}),1e3)},formSubmit:function(i){console.log("e=",i),console.log("form发生了submit事件，携带数据为："+JSON.stringify(i.detail.value));const t=i.detail.value,s=this;console.log("window.navigator=",window.navigator.userAgent),window.navigator.__defineGetter__("userAgent",(()=>"myBroser")),setTimeout((()=>{console.log("window.navigator1=",window.navigator.userAgent)}),200),o.codePhoneLogin(t).then((o=>{console.log("res========",o);const{code:i,token:t}=o.data;200===i&&(console.log("成功"),n.setToken(t),s.$store.dispatch("user/GetUserInfo"),e.index.reLaunch({url:"/pages/index/index"}))}))},miniProLogin:function(o){console.log("e===",o),e.index.login({provider:"weixin",success:function(e){console.log("loginRes=",e.authResult)}})},wechatLogin:function(){e.index.showToast({title:"待上线",duration:2e3})},qqLogin:function(){e.index.showToast({title:"待上线",duration:2e3})},weiboLogin:function(){e.index.showToast({title:"待上线",duration:2e3})},getInfo:function(o){console.log("登录e=",o),e.index.login({provider:"weixin",success:function(e){console.log("loginRes====",e);const{code:o}=e;i.loginWechat({code:o}).then("res===",res)}})},openDemo:function(){this.demoVisible=!0},onClose:function(){this.demoVisible=!1}}};if(!Array){(e.resolveComponent("show-modal")+e.resolveComponent("vuew")+e.resolveComponent("uni-link"))()}Math;var s=e._export_sfc(t,[["render",function(o,n,i,t,s,l){return e.e({a:e.o$1(((...e)=>l.onInput&&l.onInput(...e))),b:e.o$1(((...e)=>l.onInputCode&&l.onInputCode(...e))),c:e.t(s.codeMessage),d:!s.sendCaptchaEnabled},s.sendCaptchaEnabled?{}:{e:e.t(s.counterTimer)},{f:!s.sendCaptchaEnabled||s.codeVisible,g:e.o$1(((...e)=>l.sendCaptcha&&l.sendCaptcha(...e))),h:s.loginVisible,i:e.o$1(((...e)=>l.formSubmit&&l.formSubmit(...e))),j:e.o$1(((...e)=>o.formReset&&o.formReset(...e))),k:s.demoVisible},s.demoVisible?{l:e.o$1(l.onClose),m:e.p({title:"请选择账号",content:"请任意选择一个账号登录"})}:{},{n:e.o$1(((...e)=>l.openDemo&&l.openDemo(...e))),o:e.o$1(((...e)=>l.miniProLogin&&l.miniProLogin(...e))),p:e.o$1(((...e)=>l.getInfo&&l.getInfo(...e))),q:e.p({showUnderLine:!1,href:"https://beian.miit.gov.cn/",text:"粤ICP备2021179573号"})})}],["__scopeId","data-v-36a073d6"]]);wx.createPage(s);
//# sourceMappingURL=index.js.map
