"use strict";var e=require("../../common/vendor.js"),l=require("../../api/communication.js");require("../../utils/request.js"),require("../../utils/auth.js");const t={name:"waterFall"},i=Object.assign(t,{props:{list:{type:Array,default:[]},activeIndex:{type:Number,default:1}},setup(t){const i=t;e.ref([]);let o=e.ref(i.list),s=e.reactive([{height:0,list:[]},{height:0,list:[]}]),n=e.ref(328);const a=t=>{console.log("item=",t);let o=e.index.getStorageSync("like")||[];if(o.includes(t.id)){console.log("isOK=",o);for(let e=0;e<o.length;e++)o[e]===t.id&&o.splice(e,1);t.likes-=1,t.likeFlag=!1,e.index.setStorageSync("like",o)}else t.likes+=1,t.likeFlag=!0,console.log("likeIds=",o),o.unshift(t.id),e.index.setStorageSync("like",o);const s={hobby:i.activeIndex,hobbyId:t.id};l.setLike(s).then((e=>{console.log("like data=",e)}))};return e.watchEffect((()=>{o.value=i.list})),e.onMounted((()=>{console.log("list1=",i.list),console.log("6666lists================",o)})),e.onUpdated((()=>{console.log("list2=",i.list),console.log("6666lists================",o.value),console.log("waterfall.value===",s)})),e.onBeforeUnmount((()=>{console.log("onBeforeUnmount==========================")})),e.onUnmounted((()=>{console.log("===卸载啦。。。。。。。。。。。。。。。。。。。。。"),s=e.reactive([{height:0,list:[]},{height:0,list:[]}])})),(l,t)=>({a:e.f(i.list,((l,t,i)=>e.e({a:l.url},l.url?{b:l.url,c:e.o$1((e=>((e,l)=>{console.log("ev================",e),console.log("item================,",l);let t=e.detail.height*n.value/e.detail.width;console.log("height==================",t),s[0].height<=s[1].height?(s[0].list.push(o.value.shift()),s[0].height+=t):(s[1].list.push(o.value.shift()),s[1].height+=t)})(e,l)))}:{},{d:l.id}))),b:e.f(e.unref(s),((l,t,o)=>({a:e.f(l.list,((l,t,o)=>e.e({a:e.t(l.title),b:l.url,c:l.fileType},(l.fileType,{}),{d:e.t(l.title),e:l.avatar,f:e.t(l.username),g:l.likeFlag},l.likeFlag?{h:e.o$1((e=>a(l)))}:{i:e.o$1((e=>a(l)))},{j:e.t(l.likes),k:l.id,l:e.o$1((t=>(l=>{console.log("item=",l),console.log("props===",i),console.log("item.id========",l.id),console.log("props.activeIndex=====",i.activeIndex),e.index.navigateTo({url:`/pages/index/HobbyDetailMountain?id=${l.id}&hobby=${i.activeIndex}`})})(l)),l.id)}))),b:l.height}))),c:e.unref(n)+"rpx"})}});var o=e._export_sfc(i,[["__scopeId","data-v-6f228db3"]]);wx.createComponent(o);
//# sourceMappingURL=WaterFallApp.js.map
