"use strict";var o=require("../../common/vendor.js"),e=require("../../api/hobby.js"),t=require("../../api/communication.js"),a=require("../../utils/util.js");require("../../utils/request.js"),require("../../utils/auth.js");const l={components:{Comment:()=>"../components/Comment.js",VideoPlayer:()=>"../components/VideoPlayer.js"},onLoad:function(o){console.log("options===",o),this.propsOptions=o},onReady:function(){},setup(l,n){console.log("props=",l),console.log("context==========",n);const i=o.useStore(),s=o.computed$1((()=>i.state.user.userInfo)).value,r=o.reactive({poster:"",src:""});let d=o.ref(null),u=o.ref([{content:"https://social-1308251497.cos.ap-guangzhou.myqcloud.com/images/4.jfif"}]),b=o.ref({});let c=o.ref(!1),f=o.ref("关注");let h=o.ref(null);const p=()=>{let o={followId:b.value.user_id};console.log("params===",o),t.getFollow(o).then((o=>{console.log("data1===",o),200===o.data.code&&(c.value=o.data.isFollow,o.data.isFollow?f.value="已关注":f.value="关注")}))};return o.onMounted((()=>{console.log("userInfo===",s),console.log("propsOptions===========",d),(e=>{console.log("obj===================================================================================",e);const{hobby:t}=e;switch(t){case 2:default:o.index.setNavigationBarTitle({title:"狼人杀"});break;case 3:o.index.setNavigationBarTitle({title:"剧本杀"});break;case 4:o.index.setNavigationBarTitle({title:"登山"});break;case 5:o.index.setNavigationBarTitle({title:"旅游"});break;case 6:o.index.setNavigationBarTitle({title:"视频"});break;case 7:o.index.setNavigationBarTitle({title:"电影"})}})(d.value),(o=>{const{id:t,hobby:l}=o,n={id:t,hobby:l};e.getHobbyDetail(n).then((o=>{console.log("data===",o),200===o.data.code&&(b.value=o.data.data,h.value=a.formatDate(o.data.data.create_time),console.log("hobbyInfo.value===",b.value),console.log("data.data.data.url===",o.data.data.url),r.poster=o.data.data.url,r.src=o.data.data.video_url,p())}))})({id:d.value.id,hobby:d.value.hobby})})),{followText:f,isFlollow:c,following:()=>{if(c.value)return void o.index.showModal({content:"确认不再关注？",success:function(o){if(o.confirm){let o={followId:b.value.user_id};t.deleteFollow(o).then((o=>{200===o.data.code&&(f.value="关注",c.value=!1)}))}else o.cancel&&console.log("用户点击取消")}});console.log("userInfo===",s);let e={followId:b.value.user_id};t.setFollow(e).then((e=>{console.log("data===",e),200===e.data.code?(f.value="已关注",c.value=!0):400===e.data.code&&o.index.showToast({title:e.data.msg,icon:"none",duration:2e3})}))},hobbyInfo:b,info:u,publishDate:h,options:r,propsOptions:d}}};if(!Array){(o.resolveComponent("VideoPlayer")+o.resolveComponent("Comment"))()}var n=o._export_sfc(l,[["render",function(e,t,a,l,n,i){return o.e({a:0===l.hobbyInfo.fileType},0===l.hobbyInfo.fileType?{b:o.f(l.hobbyInfo.photos,((o,e,t)=>({a:o,b:e}))),c:l.hobbyInfo.photos.length>1}:{},{d:1===l.hobbyInfo.fileType},1===l.hobbyInfo.fileType?{e:l.hobbyInfo.id,f:o.p({options:{src:l.hobbyInfo.video_url,poster:l.hobbyInfo.url}})}:{},{g:l.hobbyInfo.avatar||"",h:o.t(l.hobbyInfo.username||""),i:o.t(l.followText),j:l.isFlollow?"":1,k:l.isFlollow?1:"",l:o.o$1(((...o)=>l.following&&l.following(...o))),m:o.t(l.hobbyInfo.title),n:o.t(l.hobbyInfo.content),o:o.t(l.publishDate),p:l.hobbyInfo.id},l.hobbyInfo.id?{q:l.hobbyInfo.id,r:o.p({hobbyInfo:l.hobbyInfo})}:{})}],["__scopeId","data-v-b5baaf34"]]);wx.createPage(n);
//# sourceMappingURL=HobbyDetailMountain.js.map
