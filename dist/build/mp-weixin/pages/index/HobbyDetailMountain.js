"use strict";var o=require("../../common/vendor.js"),e=require("../../api/hobby.js"),t=require("../../api/communication.js"),l=require("../../utils/util.js");require("../../utils/request.js"),require("../../utils/auth.js");const a={components:{Comment:()=>"../components/Comment.js",VideoPlayer:()=>"../components/VideoPlayer.js"},onLoad:function(o){console.log("options===",o)},onReady:function(){},setup(a){console.log("props=",a);const n=o.useStore(),i=o.computed$1((()=>n.state.user.userInfo)).value,s=o.reactive({poster:"",src:""});let r=o.ref([{content:"https://social-1308251497.cos.ap-guangzhou.myqcloud.com/images/4.jfif"}]),b=o.ref({});let d=o.ref(!1),u=o.ref("关注");let c=o.ref(null);const f=()=>{let o={followId:b.value.user_id};console.log("params===",o),t.getFollow(o).then((o=>{console.log("data1===",o),200===o.data.code&&(d.value=o.data.isFollow,o.data.isFollow?u.value="已关注":u.value="关注")}))};return o.onMounted((()=>{console.log("userInfo===",i),(e=>{console.log("obj===================================================================================",e);const{hobby:t}=e;({hobby2:()=>o.index.setNavigationBarTitle({title:"狼人杀"}),hobby3:()=>o.index.setNavigationBarTitle({title:"剧本杀"}),hobby4:()=>o.index.setNavigationBarTitle({title:"登山"}),hobby5:()=>o.index.setNavigationBarTitle({title:"旅游"}),hobby6:()=>o.index.setNavigationBarTitle({title:"视频"}),hobby7:()=>o.index.setNavigationBarTitle({title:"电影"})})[`hobby${t}`]()})(a),(o=>{const{id:t,hobby:a}=o,n={id:t,hobby:a};e.getHobbyDetail(n).then((o=>{console.log("data===",o),200===o.data.code&&(b.value=o.data.data,c.value=l.formatDate(o.data.data.create_time),console.log("hobbyInfo.value===",b.value),console.log("data.data.data.url===",o.data.data.url),s.poster=o.data.data.url,s.src=o.data.data.video_url,f())}))})({id:a.id,hobby:a.hobby})})),{followText:u,isFlollow:d,following:()=>{if(d.value)return void o.index.showModal({content:"确认不再关注？",success:function(o){if(o.confirm){let o={followId:b.value.user_id};t.deleteFollow(o).then((o=>{200===o.data.code&&(u.value="关注",d.value=!1)}))}else o.cancel&&console.log("用户点击取消")}});console.log("userInfo===",i);let e={followId:b.value.user_id};t.setFollow(e).then((e=>{console.log("data===",e),200===e.data.code?(u.value="已关注",d.value=!0):400===e.data.code&&o.index.showToast({title:e.data.msg,icon:"none",duration:2e3})}))},hobbyInfo:b,info:r,publishDate:c,options:s}}};if(!Array){(o.resolveComponent("VideoPlayer")+o.resolveComponent("Comment"))()}var n=o._export_sfc(a,[["render",function(e,t,l,a,n,i){return o.e({a:0===a.hobbyInfo.fileType},0===a.hobbyInfo.fileType?{b:o.f(a.hobbyInfo.photos,((o,e,t)=>({a:o,b:e}))),c:a.hobbyInfo.photos.length>1}:{},{d:1===a.hobbyInfo.fileType},1===a.hobbyInfo.fileType?{e:a.hobbyInfo.id,f:o.p({options:{src:a.hobbyInfo.video_url,poster:a.hobbyInfo.url}})}:{},{g:a.hobbyInfo.avatar||"",h:o.t(a.hobbyInfo.username||""),i:o.t(a.followText),j:a.isFlollow?"":1,k:a.isFlollow?1:"",l:o.o$1(((...o)=>a.following&&a.following(...o))),m:o.t(a.hobbyInfo.title),n:o.t(a.hobbyInfo.content),o:o.t(a.publishDate),p:a.hobbyInfo.id},a.hobbyInfo.id?{q:a.hobbyInfo.id,r:o.p({hobbyInfo:a.hobbyInfo})}:{})}],["__scopeId","data-v-ce639240"]]);wx.createPage(n);
//# sourceMappingURL=HobbyDetailMountain.js.map
