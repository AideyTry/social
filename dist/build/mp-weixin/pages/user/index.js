"use strict";var e=require("../../common/vendor.js"),a=require("../../utils/auth.js"),t=require("../../api/communication.js"),o=require("../../api/publish.js");require("../../utils/openIM.js");var n=require("../../utils/storage.js");require("../../utils/request.js"),Math||r();const r=()=>"../components/InfoList.js",s={onShow:function(){n.getTotalIM()>0?e.index.setTabBarBadge({index:2,text:"···"}):e.index.removeTabBarBadge({index:2})}},u=Object.assign(s,{setup(n){const r=e.useStore(),s=e.computed$1((()=>r.state.user.userInfo)).value,u=()=>{new Promise(((e,t)=>{a.removeToken(),e()})).then((()=>{location.reload()}))},l=()=>{e.index.navigateTo({url:"/pages/user/info/index"})};let i=e.ref([]),d=e.ref([]);const f=()=>{const a=[];for(let e of i.value)a.push(e.follow_id);e.index.navigateTo({url:`/pages/user/info/Follow?type=0&userids=${encodeURIComponent(JSON.stringify(a))}`})},c=()=>{const a=[];for(let e of d.value)a.push(e.user_id);e.index.navigateTo({url:`/pages/user/info/Follow?type=1&userids=${encodeURIComponent(JSON.stringify(a))}`})};let g=e.ref(0),v=e.ref([]);e.ref([]);const p=e=>{g.value=e};return e.watchEffect((()=>{0===g.value?(v.value=[],o.getPublish().then((e=>{console.log("data getPublish=",e),200===e.data.code&&(v.value=e.data.data)}))):(v.value=[],o.getMylikes().then((e=>{console.log("data likes=",e),200===e.data.code&&(v.value=e.data.data)})))}),g.value),e.onMounted((()=>{t.getFollows().then((e=>{console.log("getfollows =",e),200===e.data.code&&(i.value=e.data.follows)})),t.getFans().then((e=>{console.log("getfans =",e),200===e.data.code&&(d.value=e.data.fans)}))})),(a,t)=>e.e({a:e.unref(s).avatar?e.unref(s).avatar:"/static/images/default_avatar.png",b:!e.unref(s).avatar},(e.unref(s).avatar,{}),{c:e.o$1(l),d:e.t(e.unref(s).username),e:e.t(e.unref(s).motto),f:e.t(e.unref(i).length),g:e.o$1(f),h:e.t(e.unref(d).length),i:e.o$1(c),j:0===e.unref(g)?1:"",k:e.o$1((e=>p(0))),l:1===e.unref(g)?1:"",m:e.o$1((e=>p(1))),n:e.p({list:e.unref(v),activeIndex:e.unref(g)}),o:e.o$1(u)},{})}});var l=e._export_sfc(u,[["__scopeId","data-v-b713a6be"]]);wx.createPage(l);
//# sourceMappingURL=index.js.map
