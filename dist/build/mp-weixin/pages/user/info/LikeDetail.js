"use strict";var o=require("../../../common/vendor.js"),e=require("../../../api/hobby.js"),l=require("../../../api/communication.js"),t=require("../../../utils/util.js");require("../../../utils/request.js"),require("../../../utils/auth.js");const a={components:{Comment:()=>"../../components/Comment.js",VideoPlayer:()=>"../../components/VideoPlayer.js"},onLoad:function(o){console.log("options===",o),this.propsOptions=o},onReady:function(){},setup(a){console.log("props=",a);const n=o.useStore(),s=o.computed$1((()=>n.state.user.userInfo)).value,i=o.reactive({poster:"",src:""});let r=o.ref(null),d=o.ref([{content:"https://social-1308251497.cos.ap-guangzhou.myqcloud.com/images/4.jfif"}]);o.ref(0),o.ref("default");let u=o.ref({});let f=o.ref(!1),c=o.ref("关注");let b=o.ref(null);const h=()=>{let o={followId:u.value.user_id};console.log("params===",o),l.getFollow(o).then((o=>{console.log("data1===",o),200===o.data.code&&(f.value=o.data.isFollow,o.data.isFollow?c.value="已关注":c.value="关注")}))};return o.onMounted((()=>{console.log("userInfo===",s),(o=>{const{id:l,hobby:a}=o,n={id:l,hobby:a};e.getHobbyDetail(n).then((o=>{console.log("data===",o),200===o.data.code&&(u.value=o.data.data,b.value=t.formatDate(o.data.data.create_time),console.log("hobbyInfo.value===",u.value),console.log("data.data.data.url===",o.data.data.url),i.poster=o.data.data.url,i.src=o.data.data.video_url,h())}))})({id:r.value.id,hobby:r.value.hobby})})),{followText:c,isFlollow:f,following:()=>{if(f.value)return void o.index.showModal({content:"确认不再关注？",success:function(o){if(o.confirm){let o={followId:u.value.user_id};l.deleteFollow(o).then((o=>{200===o.data.code&&(c.value="关注",f.value=!1)}))}else o.cancel&&console.log("用户点击取消")}});console.log("userInfo===",s);let e={followId:u.value.user_id};l.setFollow(e).then((e=>{console.log("data===",e),200===e.data.code?(c.value="已关注",f.value=!0):400===e.data.code&&o.index.showToast({title:e.data.msg,icon:"none",duration:2e3})}))},hobbyInfo:u,info:d,publishDate:b,options:i,propsOptions:r}}};if(!Array){(o.resolveComponent("VideoPlayer")+o.resolveComponent("Comment"))()}var n=o._export_sfc(a,[["render",function(e,l,t,a,n,s){return o.e({a:a.hobbyInfo.avatar||"",b:o.t(a.hobbyInfo.username||""),c:o.t(a.followText),d:a.isFlollow?"":1,e:a.isFlollow?1:"",f:o.o$1(((...o)=>a.following&&a.following(...o))),g:0===a.hobbyInfo.fileType},0===a.hobbyInfo.fileType?{h:a.hobbyInfo.url}:{},{i:1===a.hobbyInfo.fileType},1===a.hobbyInfo.fileType?{j:a.hobbyInfo.id,k:o.p({options:{src:a.hobbyInfo.video_url,poster:a.hobbyInfo.url}})}:{},{l:o.t(a.hobbyInfo.title),m:o.t(a.hobbyInfo.content),n:o.t(a.publishDate),o:a.hobbyInfo.id},a.hobbyInfo.id?{p:a.hobbyInfo.id,q:o.p({hobbyInfo:a.hobbyInfo})}:{})}],["__scopeId","data-v-38dda8fd"]]);wx.createPage(n);
//# sourceMappingURL=LikeDetail.js.map
