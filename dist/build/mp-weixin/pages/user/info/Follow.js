"use strict";var e=require("../../../common/vendor.js"),o=require("../../../api/communication.js");require("../../../utils/request.js"),require("../../../utils/auth.js");const l={name:"follow",onLoad:function(e){console.log("options===",e),this.propsOptions=e},setup(l){let t=e.ref([]),a=e.ref(null),n=e.ref(!1),s=e.ref("关注");const i=e=>{let l={followId:e.user_id};console.log("params===",l),o.getFollow(l).then((e=>{console.log("data1===",e),200===e.data.code&&(n.value=e.data.isFollow,e.data.isFollow?s.value="已关注":s.value="关注")}))},r=l=>{const n={userids:l};0===parseInt(a.value.type)?(e.index.setNavigationBarTitle({title:"关注"}),o.getFollowsInfo(n).then((e=>{200===e.data.code&&(t.value=e.data.followsInfo,t.value=t.value.filter((e=>e)),console.log("infoList.value====",t.value),t.value.forEach((e=>{i(e)})))}))):1===parseInt(a.value.type)&&(e.index.setNavigationBarTitle({title:"粉丝"}),o.getFansInfo(n).then((e=>{console.log("getFansInfo===",e),200===e.data.code&&(t.value=e.data.fansInfo,t.value=t.value.filter((e=>e)),t.value.forEach((e=>{i(e)})))})))};return e.onMounted((()=>{console.log("follow props=====================================================",a),r(JSON.parse(decodeURIComponent(a.value.userids)))})),{propsOptions:a,infoList:t,followText:s,isFlollow:n,following:l=>{if(n.value)return void e.index.showModal({content:"确认不再关注？",success:function(e){if(e.confirm){let e={followId:l.user_id};o.deleteFollow(e).then((e=>{200===e.data.code&&(s.value="关注",n.value=!1,r(JSON.parse(decodeURIComponent(a.value.userids))))}))}else e.cancel&&console.log("用户点击取消")}});let t={followId:l.user_id};o.setFollow(t).then((o=>{console.log("data===",o),200===o.data.code?(s.value="已关注",n.value=!0):400===o.data.code&&e.index.showToast({title:o.data.msg,icon:"none",duration:2e3})}))},goUserDetail:o=>{console.log("info======",o),e.index.navigateTo({url:`/pages/userInfo/User/User?id=${o.user_id}`})}}}};var t=e._export_sfc(l,[["render",function(o,l,t,a,n,s){return{a:e.f(a.infoList,((o,l,t)=>({a:o.avatar||"",b:e.t(o.title),c:e.t(o.username),d:e.t(o.motto),e:e.o$1((e=>a.following(o))),f:o.id,g:e.o$1((e=>a.goUserDetail(o)),o.id)}))),b:e.t(a.followText),c:a.isFlollow?"":1,d:a.isFlollow?1:""}}],["__scopeId","data-v-22e2896d"]]);wx.createPage(t);
//# sourceMappingURL=Follow.js.map
