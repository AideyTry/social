"use strict";var e=require("../../../common/vendor.js"),o=require("../../../api/communication.js");require("../../../utils/request.js"),require("../../../utils/auth.js");const l={name:"follow",setup(l){let t=e.ref([]),a=e.ref(!1),n=e.ref("关注");const s=e=>{let l={followId:e.user_id};console.log("params===",l),o.getFollow(l).then((e=>{console.log("data1===",e),200===e.data.code&&(a.value=e.data.isFollow,e.data.isFollow?n.value="已关注":n.value="关注")}))},i=a=>{const n={userids:a};0===parseInt(l.type)?(e.index.setNavigationBarTitle({title:"关注"}),o.getFollowsInfo(n).then((e=>{200===e.data.code&&(t.value=e.data.followsInfo,t.value=t.value.filter((e=>e)),console.log("infoList.value====",t.value),t.value.forEach((e=>{s(e)})))}))):1===parseInt(l.type)&&(e.index.setNavigationBarTitle({title:"粉丝"}),o.getFansInfo(n).then((e=>{console.log("getFansInfo===",e),200===e.data.code&&(t.value=e.data.fansInfo,t.value=t.value.filter((e=>e)),t.value.forEach((e=>{s(e)})))})))};return e.onMounted((()=>{i(JSON.parse(decodeURIComponent(l.userids)))})),{infoList:t,followText:n,isFlollow:a,following:t=>{if(a.value)return void e.index.showModal({content:"确认不再关注？",success:function(e){if(e.confirm){let e={followId:t.user_id};o.deleteFollow(e).then((e=>{200===e.data.code&&(n.value="关注",a.value=!1,i(JSON.parse(decodeURIComponent(l.userids))))}))}else e.cancel&&console.log("用户点击取消")}});let s={followId:t.user_id};o.setFollow(s).then((o=>{console.log("data===",o),200===o.data.code?(n.value="已关注",a.value=!0):400===o.data.code&&e.index.showToast({title:o.data.msg,icon:"none",duration:2e3})}))},goUserDetail:o=>{console.log("info======",o),e.index.navigateTo({url:`/pages/user/info/User?id=${o.user_id}`})}}}};var t=e._export_sfc(l,[["render",function(o,l,t,a,n,s){return{a:e.f(a.infoList,((o,l,t)=>({a:o.avatar||"",b:e.t(o.title),c:e.t(o.username),d:e.t(o.motto),e:e.o$1((e=>a.following(o))),f:o.id,g:e.o$1((e=>a.goUserDetail(o)),o.id)}))),b:e.t(a.followText),c:a.isFlollow?"":1,d:a.isFlollow?1:""}}],["__scopeId","data-v-c54c6064"]]);wx.createPage(t);
//# sourceMappingURL=Follow.js.map
