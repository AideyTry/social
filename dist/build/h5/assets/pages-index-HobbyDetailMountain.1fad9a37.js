import{o as t,c as e,w as o,a3 as s,J as l,H as a,I as d,P as n,Z as r,Y as c,e as i,L as u,M as f,S as m,T as h,D as b,E as _,K as p,a6 as y,R as g,a7 as w,a8 as v,W as k,X as x,a1 as I,n as C,$ as j,a0 as S}from"./vendor.3b43a146.js";import{_ as B}from"./plugin-vue_export-helper.21dcd24c.js";import{r as F}from"./uni-app.es.54819d9d.js";import{b as O}from"./hobby.f8967f9e.js";import{a as D,b as T,d as $,c as U,e as V}from"./communication.0f04c17a.js";import{f as A}from"./index.0f82816b.js";var L=B({name:"UniSwiperDot",emits:["clickItem"],props:{info:{type:Array,default:()=>[]},current:{type:Number,default:0},dotsStyles:{type:Object,default:()=>({})},mode:{type:String,default:"default"},field:{type:String,default:""}},data:()=>({dots:{width:6,height:6,bottom:10,color:"#fff",backgroundColor:"rgba(0, 0, 0, .3)",border:"1px rgba(0, 0, 0, .3) solid",selectedBackgroundColor:"#333",selectedBorder:"1px rgba(0, 0, 0, .9) solid"}}),watch:{dotsStyles(t){this.dots=Object.assign(this.dots,this.dotsStyles)},mode(t){"indexes"===t?(this.dots.width=14,this.dots.height=14):(this.dots.width=6,this.dots.height=6)}},created(){"indexes"===this.mode&&(this.dots.width=12,this.dots.height=12),this.dots=Object.assign(this.dots,this.dotsStyles)},methods:{clickItem(t){this.$emit("clickItem",t)}}},[["render",function(b,_,p,y,g,w){const v=m,k=h;return t(),e(v,{class:"uni-swiper__warp"},{default:o((()=>[s(b.$slots,"default",{},void 0,!0),"default"===p.mode?(t(),e(v,{style:l({bottom:g.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"default"},{default:o((()=>[(t(!0),a(n,null,d(p.info,((o,s)=>(t(),e(v,{onClick:t=>w.clickItem(s),style:l({width:(s===p.current?2*g.dots.width:g.dots.width)+"px",height:g.dots.width/2+"px","background-color":s!==p.current?g.dots.backgroundColor:g.dots.selectedBackgroundColor,"border-radius":"0px"}),key:s,class:"uni-swiper__dots-item uni-swiper__dots-bar"},null,8,["onClick","style"])))),128))])),_:1},8,["style"])):r("v-if",!0),"dot"===p.mode?(t(),e(v,{style:l({bottom:g.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"dot"},{default:o((()=>[(t(!0),a(n,null,d(p.info,((o,s)=>(t(),e(v,{onClick:t=>w.clickItem(s),style:l({width:g.dots.width+"px",height:g.dots.height+"px","background-color":s!==p.current?g.dots.backgroundColor:g.dots.selectedBackgroundColor,border:s!==p.current?g.dots.border:g.dots.selectedBorder}),key:s,class:"uni-swiper__dots-item"},null,8,["onClick","style"])))),128))])),_:1},8,["style"])):r("v-if",!0),"round"===p.mode?(t(),e(v,{style:l({bottom:g.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"round"},{default:o((()=>[(t(!0),a(n,null,d(p.info,((o,s)=>(t(),e(v,{onClick:t=>w.clickItem(s),class:c([[s===p.current&&"uni-swiper__dots-long"],"uni-swiper__dots-item"]),style:l({width:(s===p.current?3*g.dots.width:g.dots.width)+"px",height:g.dots.height+"px","background-color":s!==p.current?g.dots.backgroundColor:g.dots.selectedBackgroundColor,border:s!==p.current?g.dots.border:g.dots.selectedBorder}),key:s},null,8,["onClick","class","style"])))),128))])),_:1},8,["style"])):r("v-if",!0),"nav"===p.mode?(t(),e(v,{key:"nav",style:l({"background-color":p.dotsStyles.backgroundColor,bottom:"0"}),class:"uni-swiper__dots-box uni-swiper__dots-nav"},{default:o((()=>[i(k,{style:l({color:p.dotsStyles.color}),class:"uni-swiper__dots-nav-item"},{default:o((()=>[u(f(p.current+1+"/"+p.info.length+" "+p.info[p.current][p.field]),1)])),_:1},8,["style"])])),_:1},8,["style"])):r("v-if",!0),"indexes"===p.mode?(t(),e(v,{key:"indexes",style:l({bottom:g.dots.bottom+"px"}),class:"uni-swiper__dots-box"},{default:o((()=>[(t(!0),a(n,null,d(p.info,((s,a)=>(t(),e(v,{onClick:t=>w.clickItem(a),style:l({width:g.dots.width+"px",height:g.dots.height+"px",color:a===p.current?g.dots.selectedColor:g.dots.color,"background-color":a!==p.current?g.dots.backgroundColor:g.dots.selectedBackgroundColor,border:a!==p.current?g.dots.border:g.dots.selectedBorder}),key:a,class:"uni-swiper__dots-item uni-swiper__dots-indexes"},{default:o((()=>[i(k,{class:"uni-swiper__dots-indexes-text"},{default:o((()=>[u(f(a+1),1)])),_:2},1024)])),_:2},1032,["onClick","style"])))),128))])),_:1},8,["style"])):r("v-if",!0)])),_:3})}],["__scopeId","data-v-1e2b3f8b"]]);const q={name:"comment"};var z=B({components:{Comment:B(Object.assign(q,{props:{hobbyInfo:{type:Object,default:{}}},setup(s){const l=s;let c=b(""),v=b(0),k=b([]);console.log("props=",l);const x=t=>{console.log("e=",t);const{detail:{value:e}}=t;let o={comment:e,detailUserId:l.hobbyInfo.user_id,hobbyId:l.hobbyInfo.hobby_4_id};D(o).then((t=>{200===t.statusCode&&(c.value="",I())}))},I=()=>{let t={hobbyId:l.hobbyInfo.hobby_4_id};T(t).then((t=>{console.log("data666666===",t),200===t.statusCode&&(k.value=t.data.data,v.value=t.data.data.length)}))};return _((()=>{I()})),(l,b)=>{const _=h,I=m,C=g,j=w;return t(),a("div",{class:"comment"},[i(I,{class:"total"},{default:o((()=>[i(_,null,{default:o((()=>[u("共")])),_:1}),i(_,null,{default:o((()=>[u(f(p(v)),1)])),_:1}),i(_,null,{default:o((()=>[u("条评论")])),_:1})])),_:1}),i(I,{class:"my-comment"},{default:o((()=>[i(C,{class:"avatar",mode:"aspectFit",src:s.hobbyInfo.avatar||""},null,8,["src"]),i(j,{modelValue:p(c),"onUpdate:modelValue":b[0]||(b[0]=t=>y(c)?c.value=t:c=t),type:"text",class:"comment-input",placeholder:"喜欢就给个评论支持一下呗~",onConfirm:x},null,8,["modelValue"])])),_:1}),(t(!0),a(n,null,d(p(k),(s=>(t(),e(I,{class:"other-comment",key:s.id},{default:o((()=>[i(I,null,{default:o((()=>[i(C,{class:"avatar",mode:"aspectFit",src:s.avatar||""},null,8,["src"])])),_:2},1024),i(I,{class:"comment-info"},{default:o((()=>[i(I,{class:"userinfo"},{default:o((()=>[i(_,null,{default:o((()=>[u(f(s.username),1)])),_:2},1024),s.isAuthor?(t(),e(_,{key:0,class:"is-author"},{default:o((()=>[u("作者")])),_:1})):r("v-if",!0)])),_:2},1024),i(I,{class:"comment-content"},{default:o((()=>[i(_,null,{default:o((()=>[u(f(s.comment),1)])),_:2},1024)])),_:2},1024),i(I,null,{default:o((()=>[i(_,null,{default:o((()=>[u(f(l.$filters.commentTime(s.create_time)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])}}}),[["__scopeId","data-v-6c8a20ea"]])},onLoad:function(t){console.log("options===",t)},setup(t){const e=v(),o=k((()=>e.state.user.userInfo)).value;let s=b([{content:"https://social-1308251497.cos.ap-guangzhou.myqcloud.com/images/4.jfif"}]);b(0),b("default");let l=b({});let a=b(!1),d=b("关注");let n=b(null);const r=()=>{let t={followId:l.value.user_id};console.log("params===",t),V(t).then((t=>{console.log("data1===",t),200===t.data.code&&(a.value=t.data.isFollow,t.data.isFollow?d.value="已关注":d.value="关注")}))};return _((()=>{var e;console.log("userInfo===",o),e=t.id,O({id:e}).then((t=>{console.log("data===",t),200===t.data.code&&(l.value=t.data.data,n.value=A(t.data.data.create_time),r())}))})),{followText:d,isFlollow:a,following:()=>{if(a.value)return void C({content:"确认不再关注？",success:function(t){if(t.confirm){let t={followId:l.value.user_id};$(t).then((t=>{200===t.data.code&&(d.value="关注",a.value=!1)}))}else t.cancel&&console.log("用户点击取消")}});console.log("userInfo===",o);let t={followId:l.value.user_id};U(t).then((t=>{console.log("data===",t),200===t.data.code&&(d.value="已关注",a.value=!0)}))},hobbyInfo:l,info:s,publishDate:n}}},[["render",function(s,l,b,_,p,y){const w=g,v=m,k=j,C=S,B=F(x("uni-swiper-dot"),L),O=h,D=I("Comment");return t(),a("div",{class:"hobby-detail"},[i(B,{info:_.info,current:s.current,field:"content",mode:s.mode},{default:o((()=>[i(C,{class:"swiper-box",onChange:s.change},{default:o((()=>[(t(!0),a(n,null,d(_.info,((s,l)=>(t(),e(k,{key:l},{default:o((()=>[i(v,{class:"swiper-item"},{default:o((()=>[i(w,{src:s.content,class:"image"},null,8,["src"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["onChange"])])),_:1},8,["info","current","mode"]),i(v,{class:"author-wraper"},{default:o((()=>[i(v,{class:"author"},{default:o((()=>[i(v,{class:"author-info"},{default:o((()=>[i(w,{class:"avatar",mode:"aspectFit",src:_.hobbyInfo.avatar||""},null,8,["src"]),i(O,null,{default:o((()=>[u(f(_.hobbyInfo.username||""),1)])),_:1})])),_:1}),i(v,{class:c({follow:!_.isFlollow,active:_.isFlollow}),onClick:_.following},{default:o((()=>[i(O,null,{default:o((()=>[u(f(_.followText),1)])),_:1})])),_:1},8,["class","onClick"])])),_:1})])),_:1}),i(v,{class:"content-wraper"},{default:o((()=>[i(v,{class:"content"},{default:o((()=>[i(v,{class:"title"},{default:o((()=>[u(f(_.hobbyInfo.title),1)])),_:1}),i(v,{class:"main"},{default:o((()=>[u(f(_.hobbyInfo.content),1)])),_:1}),i(v,{class:"publish-date"},{default:o((()=>[i(O,null,{default:o((()=>[u("发布于: ")])),_:1}),i(O,null,{default:o((()=>[u(f(_.publishDate),1)])),_:1})])),_:1})])),_:1})])),_:1}),i(v,{class:"comment-wraper"},{default:o((()=>[_.hobbyInfo.hobby_4_id?(t(),e(D,{key:0,hobbyInfo:_.hobbyInfo},null,8,["hobbyInfo"])):r("v-if",!0)])),_:1})])}],["__scopeId","data-v-a3b20d08"]]);export{z as default};
