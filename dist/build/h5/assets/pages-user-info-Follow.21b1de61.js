import{A as a,B as e,o as l,c as s,w as o,e as t,E as n,F as i,N as u,p as d,l as c,a6 as r,O as f,Q as v,K as p,L as _,W as m,M as w,P as g,R as I}from"./vendor.ae4da609.js";import{d as h,a as F,i as b,j as C,b as j}from"./communication.a1b9ba9b.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.8cb8be1f.js";var x=k({name:"follow",setup(l){let s=a([]),o=a(!1),t=a("关注");const n=a=>{const e={userids:a};0===parseInt(l.type)?(r({title:"关注"}),b(e).then((a=>{200===a.data.code&&(s.value=a.data.followsInfo,s.value=s.value.filter((a=>a)),console.log("infoList.value====",s.value),s.value.forEach((a=>{(a=>{let e={followId:a.user_id};console.log("params===",e),j(e).then((a=>{console.log("data1===",a),200===a.data.code&&(o.value=a.data.isFollow,a.data.isFollow?t.value="已关注":t.value="关注")}))})(a)})))}))):1===parseInt(l.type)&&(r({title:"粉丝"}),C(e).then((a=>{console.log("getFansInfo===",a),200===a.data.code&&(s.value=a.data.fansInfo,s.value=s.value.filter((a=>a)),console.log("infoList.value====",s.value))})))};return e((()=>{n(JSON.parse(decodeURIComponent(l.userids)))})),{infoList:s,followText:t,isFlollow:o,following:a=>{if(o.value)return void d({content:"确认不再关注？",success:function(e){if(e.confirm){let e={followId:a.user_id};h(e).then((a=>{200===a.data.code&&(t.value="关注",o.value=!1,n(JSON.parse(decodeURIComponent(l.userids))))}))}else e.cancel&&console.log("用户点击取消")}});let e={followId:a.user_id};F(e).then((a=>{console.log("data===",a),200===a.data.code?(t.value="已关注",o.value=!0):400===a.data.code&&c({title:a.data.msg,icon:"none",duration:2e3})}))},goUserDetail:a=>{console.log("info======",a),f({url:`/pages/user/info/User?id=${a.user_id}`})}}}},[["render",function(a,e,d,c,r,f){const h=g,F=v,b=I;return l(),s(F,{class:"info-list"},{default:o((()=>[t(F,{class:"ul"},{default:o((()=>[(l(!0),n(u,null,i(c.infoList,(a=>(l(),s(F,{class:"li",key:a.id,onClick:e=>c.goUserDetail(a)},{default:o((()=>[t(F,{class:"userinfo-wraper"},{default:o((()=>[t(F,{class:"avatar-wraper"},{default:o((()=>[t(h,{class:"avatar",mode:"aspectFit",src:a.avatar||""},null,8,["src"])])),_:2},1024),t(F,{class:"publish-info"},{default:o((()=>[t(F,{class:"title"},{default:o((()=>[p(_(a.title),1)])),_:2},1024),t(F,{class:"userinfo"},{default:o((()=>[t(b,{class:"username"},{default:o((()=>[p(_(a.username),1)])),_:2},1024)])),_:2},1024),t(F,{class:"userinfo"},{default:o((()=>[t(b,{class:"username"},{default:o((()=>[p(_(a.motto),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),t(F,{class:m({follow:!c.isFlollow,active:c.isFlollow}),onClick:w((e=>c.following(a)),["stop"])},{default:o((()=>[t(b,null,{default:o((()=>[p(_(c.followText),1)])),_:1})])),_:2},1032,["class","onClick"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})}],["__scopeId","data-v-2aea53da"]]);export{x as default};
//# sourceMappingURL=pages-user-info-Follow.21b1de61.js.map
