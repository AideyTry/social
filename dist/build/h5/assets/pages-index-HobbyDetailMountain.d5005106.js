import{a6 as o,X as a,W as e,D as l,E as t,a1 as s,o as n,H as i,M as r,e as c,w as d,c as u,N as f,O as b,Z as m,n as h,l as p,S as y,T as v,U as w,a7 as _}from"./vendor.574fb72a.js";import{b as g}from"./hobby.22d046bf.js";import{d as I,a as j,b as x}from"./communication.0c0d5b5c.js";import{C as k}from"./Comment.fdfa1dac.js";import{V as C}from"./VideoPlayer.19a6a0a0.js";import{f as F}from"./index.08ac6b95.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";var V=T({components:{Comment:k,VideoPlayer:C},onLoad:function(o){console.log("options===",o)},onReady:function(){},setup(s){console.log("props=",s);const n=o(),i=a((()=>n.state.user.userInfo)).value,r=e({poster:"",src:""});let c=l([{content:"https://social-1308251497.cos.ap-guangzhou.myqcloud.com/images/4.jfif"}]);l(0),l("default");let d=l({});let u=l(!1),f=l("关注");let b=l(null);const m=()=>{let o={followId:d.value.user_id};console.log("params===",o),x(o).then((o=>{console.log("data1===",o),200===o.data.code&&(u.value=o.data.isFollow,o.data.isFollow?f.value="已关注":f.value="关注")}))};return t((()=>{console.log("userInfo===",i),(o=>{console.log("obj===================================================================================",o);const{hobby:a}=o;({hobby2:()=>_({title:"狼人杀"}),hobby3:()=>_({title:"剧本杀"}),hobby4:()=>_({title:"登山"}),hobby5:()=>_({title:"旅游"}),hobby6:()=>_({title:"视频"}),hobby7:()=>_({title:"电影"})})[`hobby${a}`]()})(s),(o=>{const{id:a,hobby:e}=o;g({id:a,hobby:e}).then((o=>{console.log("data===",o),200===o.data.code&&(d.value=o.data.data,b.value=F(o.data.data.create_time),console.log("hobbyInfo.value===",d.value),console.log("data.data.data.url===",o.data.data.url),r.poster=o.data.data.url,r.src=o.data.data.video_url,m())}))})({id:s.id,hobby:s.hobby})})),{followText:f,isFlollow:u,following:()=>{if(u.value)return void h({content:"确认不再关注？",success:function(o){if(o.confirm){let o={followId:d.value.user_id};I(o).then((o=>{200===o.data.code&&(f.value="关注",u.value=!1)}))}else o.cancel&&console.log("用户点击取消")}});console.log("userInfo===",i);let o={followId:d.value.user_id};j(o).then((o=>{console.log("data===",o),200===o.data.code?(f.value="已关注",u.value=!0):400===o.data.code&&p({title:o.data.msg,icon:"none",duration:2e3})}))},hobbyInfo:d,info:c,publishDate:b,options:r}}},[["render",function(o,a,e,l,t,h){const p=y,_=s("VideoPlayer"),g=v,I=w,j=s("Comment");return n(),i("div",{class:"hobby-detail"},[r(' <uni-swiper-dot\r\n      :info="info"\r\n      :current="current"\r\n      field="content"\r\n      :mode="mode"\r\n    >\r\n      <swiper class="swiper-box" @change="change">\r\n        <swiper-item v-for="(item, index) in info" :key="index">\r\n          <view class="swiper-item">\r\n            <image :src="item.content" class="image"></image>\r\n          </view>\r\n        </swiper-item>\r\n      </swiper>\r\n    </uni-swiper-dot> '),c(g,{class:"swiper-box"},{default:d((()=>[c(g,{class:"swiper-item"},{default:d((()=>[0===l.hobbyInfo.fileType?(n(),u(p,{key:0,src:l.hobbyInfo.url,class:"image"},null,8,["src"])):r("v-if",!0),1===l.hobbyInfo.fileType?(n(),u(_,{options:{src:l.hobbyInfo.video_url,poster:l.hobbyInfo.url},key:l.hobbyInfo.id},null,8,["options"])):r("v-if",!0)])),_:1})])),_:1}),c(g,{class:"author-wraper"},{default:d((()=>[c(g,{class:"author"},{default:d((()=>[c(g,{class:"author-info"},{default:d((()=>[c(p,{class:"avatar",mode:"aspectFit",src:l.hobbyInfo.avatar||""},null,8,["src"]),c(I,null,{default:d((()=>[f(b(l.hobbyInfo.username||""),1)])),_:1})])),_:1}),c(g,{class:m({follow:!l.isFlollow,active:l.isFlollow}),onClick:l.following},{default:d((()=>[c(I,null,{default:d((()=>[f(b(l.followText),1)])),_:1})])),_:1},8,["class","onClick"])])),_:1})])),_:1}),c(g,{class:"content-wraper"},{default:d((()=>[c(g,{class:"content"},{default:d((()=>[c(g,{class:"title"},{default:d((()=>[f(b(l.hobbyInfo.title),1)])),_:1}),c(g,{class:"main"},{default:d((()=>[f(b(l.hobbyInfo.content),1)])),_:1}),c(g,{class:"publish-date"},{default:d((()=>[c(I,null,{default:d((()=>[f("发布于: ")])),_:1}),c(I,null,{default:d((()=>[f(b(l.publishDate),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(g,{class:"comment-wraper"},{default:d((()=>[l.hobbyInfo.id?(n(),u(j,{hobbyInfo:l.hobbyInfo,key:l.hobbyInfo.id},null,8,["hobbyInfo"])):r("v-if",!0)])),_:1})])}],["__scopeId","data-v-ce86476c"]]);export{V as default};
