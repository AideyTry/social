import{o as t,c as e,w as s,e as i,L as n,M as o,Y as a,J as l,T as c,S as r,p as u,am as d,l as f,X as h,Z as g,R as p,a7 as m,aa as b,al as w}from"./vendor.3b43a146.js";import{_}from"./plugin-vue_export-helper.21dcd24c.js";import{r as y}from"./uni-app.es.54819d9d.js";import{s as v,c as C,d as S}from"./index.b163819f.js";var x=_({name:"UniTitle",props:{type:{type:String,default:""},title:{type:String,default:""},align:{type:String,default:"left"},color:{type:String,default:"#333333"},stat:{type:[Boolean,String],default:""}},data:()=>({}),computed:{textAlign(){let t="center";switch(this.align){case"left":t="flex-start";break;case"center":t="center";break;case"right":t="flex-end"}return t}},watch:{title(t){this.isOpenStat()&&uni.report&&uni.report("title",this.title)}},mounted(){this.isOpenStat()&&uni.report&&uni.report("title",this.title)},methods:{isOpenStat(){""===this.stat&&(this.isStat=!1);let t="boolean"==typeof this.stat&&this.stat||"string"==typeof this.stat&&""!==this.stat;return""===this.type&&(this.isStat=!0,"false"===this.stat.toString()&&(this.isStat=!1)),""!==this.type&&(this.isStat=!0,this.isStat=!!t),this.isStat}}},[["render",function(u,d,f,h,g,p){const m=c,b=r;return t(),e(b,{class:"uni-title__box",style:l({"align-items":p.textAlign})},{default:s((()=>[i(m,{class:a(["uni-title__base",["uni-"+f.type]]),style:l({color:f.color})},{default:s((()=>[n(o(f.title),1)])),_:1},8,["class","style"])])),_:1},8,["style"])}],["__scopeId","data-v-78f6f244"]]);var I=_({data:()=>({codeVisible:!1,loginVisible:!0,sendCaptchaEnabled:!0,codeMessage:"获取验证码",counterTimer:60,phoneNumber:null}),methods:{onInput:function(t){console.log("input e=",t),/^1[3456789]\d{9}$/.test(t.detail.value)?(this.codeVisible=!0,this.phoneNumber=t.detail.value):this.codeVisible=!1},onInputCode:function(t){console.log("code=",t),/^\d{6}$/.test(t.detail.value)?this.loginVisible=!1:this.loginVisible=!0},sendCaptcha:function(t){if(console.log("button e=",t),!this.sendCaptchaEnabled)return;this.sendCaptchaEnabled=!1;const e={phone:this.phoneNumber};console.log("params===",e),v(e).then((t=>{console.log("res=",t)})),this.codeMessage="重新发送";const s=setInterval((()=>{if(this.counterTimer<=0)return this.counterTimer=60,this.sendCaptchaEnabled=!0,clearInterval(s),void(this.codeMessage="获取验证码");this.counterTimer--}),1e3)},formSubmit:function(t){console.log("e=",t),console.log("form发生了submit事件，携带数据为："+JSON.stringify(t.detail.value));const e=t.detail.value,s=this;console.log("window.navigator=",window.navigator.userAgent),window.navigator.__defineGetter__("userAgent",(()=>"myBroser")),setTimeout((()=>{console.log("window.navigator1=",window.navigator.userAgent)}),200),C(e).then((t=>{console.log("res========",t);const{code:e,token:i}=t.data;200===e&&(console.log("成功"),S(i),s.$store.dispatch("user/GetUserInfo"),u({url:"/pages/index/index"}))}))},miniProLogin:function(t){console.log("e===",t),d({provider:"weixin",success:function(t){console.log("loginRes=",t.authResult)}})},wechatLogin:function(){f({title:"待上线",duration:2e3})},qqLogin:function(){f({title:"待上线",duration:2e3})},weiboLogin:function(){f({title:"待上线",duration:2e3})},getInfo:function(t){console.log("登录e=",t),d({provider:"weixin",success:function(t){console.log("loginRes====",t);const{code:e}=t;loginWechat({code:e}).then("res===",res)}})}}},[["render",function(a,l,u,d,f,_){const v=y(h("uni-title"),x),C=p,S=r,I=c,k=m,L=b,T=w;return t(),e(S,{class:"login-wraper"},{default:s((()=>[i(v,{type:"h1",align:"center",title:"蔓草"}),i(S,{class:"image"},{default:s((()=>[i(C,{style:{width:"100%",height:"100%"},src:"/assets/login-bg.66dcff35.gif",mode:""})])),_:1}),i(S,{class:"login"},{default:s((()=>[i(T,{onSubmit:_.formSubmit,onReset:a.formReset,class:"login-in"},{default:s((()=>[i(S,{class:"row-flex uni-form-item uni-column"},{default:s((()=>[i(I,{class:"title"},{default:s((()=>[n("手机号：")])),_:1}),i(k,{class:"uni-input",name:"phone",placeholder:"请输入手机号",onInput:_.onInput},null,8,["onInput"])])),_:1}),i(S,{class:"row-flex uni-form-item uni-column"},{default:s((()=>[i(I,{class:"title"},{default:s((()=>[n("验证码：")])),_:1}),i(k,{class:"uni-input",name:"code",placeholder:"请输入验证码",onInput:_.onInputCode},null,8,["onInput"]),i(L,{class:"code",disabled:!f.sendCaptchaEnabled,onClick:_.sendCaptcha},{default:s((()=>[n(o(f.codeMessage),1),f.sendCaptchaEnabled?g("v-if",!0):(t(),e(I,{key:0},{default:s((()=>[n("("+o(f.counterTimer)+"s)",1)])),_:1}))])),_:1},8,["disabled","onClick"])])),_:1}),i(S,{class:"uni-btn-v"},{default:s((()=>[i(L,{"form-type":"submit",type:"primary",class:"btn-block",disabled:f.loginVisible},{default:s((()=>[n(" 登录 ")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["onSubmit","onReset"]),i(S,{class:"cut-off-line row"},{default:s((()=>[i(S,{class:"col-8 line-left"}),i(I,null,{default:s((()=>[n("其他登录方式")])),_:1}),i(S,{class:"col-8 line-right"})])),_:1}),i(S,{class:"other-login"},{default:s((()=>[i(L,{onClick:_.wechatLogin,withCredentials:"true",class:"login-way wechat"},{default:s((()=>[i(S,{class:"m-icon m-icon-weixin"})])),_:1},8,["onClick"]),g(" </view> "),i(L,{onClick:_.qqLogin,withCredentials:"true",class:"login-way wechat"},{default:s((()=>[i(S,{class:"m-icon m-icon-QQ"})])),_:1},8,["onClick"]),i(L,{onClick:_.weiboLogin,withCredentials:"true",class:"login-way wechat"},{default:s((()=>[i(S,{class:"m-icon m-icon-weibo"})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-4afcc363"]]);export{I as default};
