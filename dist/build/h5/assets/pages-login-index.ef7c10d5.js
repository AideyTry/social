import{an as e,o as t,G as o,a3 as s,M as n,N as l,Y as a,I as i,c as d,w as u,T as c,a0 as r,C as f,V as m,X as h,e as p,L as g,K as _,O as b,J as w,v,S as y,ai as k,aj as C,ae as S,ac as x,ao as I,l as L,a1 as V,R as M,a9 as T,am as U}from"./vendor.9ff48645.js";import{_ as A}from"./plugin-vue_export-helper.21dcd24c.js";import{r as R}from"./uni-app.es.2e6b1087.js";import{e as j,s as N,c as E,d as z}from"./index.50eaf64b.js";import{_ as $,a as G}from"./uni-forms.51b5b5aa.js";var B=A({name:"uniLink",props:{href:{type:String,default:""},text:{type:String,default:""},download:{type:String,default:""},showUnderLine:{type:[Boolean,String],default:!0},copyTips:{type:String,default:"已自动复制网址，请在手机浏览器里粘贴该网址"},color:{type:String,default:"#999999"},fontSize:{type:[Number,String],default:14}},computed:{isShowA(){return this._isH5=!0,!(!this.isMail()&&!this.isTel()||!0!==this._isH5)}},created(){this._isH5=null},methods:{isMail(){return this.href.startsWith("mailto:")},isTel(){return this.href.startsWith("tel:")},openURL(){window.open(this.href)},makePhoneCall(t){e({phoneNumber:t})}}},[["render",function(e,r,f,m,h,p){const g=c;return p.isShowA?(t(),o("a",{key:0,class:a(["uni-link",{"uni-link--withline":!0===f.showUnderLine||"true"===f.showUnderLine}]),href:f.href,style:i({color:f.color,fontSize:f.fontSize+"px"}),download:f.download},[s(e.$slots,"default",{},(()=>[n(l(f.text),1)]),!0)],14,["href","download"])):(t(),d(g,{key:1,class:a(["uni-link",{"uni-link--withline":!0===f.showUnderLine||"true"===f.showUnderLine}]),style:i({color:f.color,fontSize:f.fontSize+"px"}),onClick:p.openURL},{default:u((()=>[s(e.$slots,"default",{},(()=>[n(l(f.text),1)]),!0)])),_:3},8,["class","style","onClick"]))}],["__scopeId","data-v-11527474"]]);const H={name:"showModal"};var O=A({components:{ShowModal:A(Object.assign(H,{props:{title:{type:String,default:""},content:{type:String,default:""}},emits:["close"],setup(e,{emit:s}){const a=e,i=r(),I=f(null);let L=m({username:"Aiden"});const V=e=>{const{detail:{value:t}}=e;I.value.setValue("username",t)},M=()=>{s("close")},T=()=>{I.value.validate().then((e=>{const t={username:e.username,password:"111111"};console.log("params=======",t),j(t).then((e=>{console.log("res========",e);const{code:t,token:o}=e.data;200===t&&(s("close"),console.log("成功"),N(o),i.dispatch("user/GetUserInfo"),v({url:"/pages/index/index"}))}))})).catch((e=>{console.log("表单错误信息：",e)}))};return(e,s)=>{const i=y,r=c,f=k,m=C,v=S,U=R(h("uni-forms-item"),$),A=R(h("uni-forms"),G),j=x;return t(),d(i,{class:"_showModal"},{default:u((()=>[p(i,{class:"_shade"}),p(i,{class:"_modalBox"},{default:u((()=>[p(i,{class:"_modal"},{default:u((()=>[g(' <slot name="title"> '),p(i,{class:"title-wraper"},{default:u((()=>[p(i,{class:"title"},{default:u((()=>[p(r,null,{default:u((()=>[n(l(a.title),1)])),_:1})])),_:1}),(t(),o("svg",{class:"close-icon","aria-hidden":"true",onClick:b(M,["stop"])},[_("use",{"xlink:href":"#icon-guanbi1"})],8,["onClick"]))])),_:1}),g(" </slot> "),p(i,{class:"content-hint"},{default:u((()=>[n(l(a.content),1)])),_:1}),p(A,{ref_key:"form",ref:I,modelValue:w(L)},{default:u((()=>[g(' <slot name="content"> '),p(U,{name:"username"},{default:u((()=>[p(v,{name:"radio",onChange:V},{default:u((()=>[p(m,null,{default:u((()=>[p(f,{value:"Aiden",checked:"Aiden"===w(L).username},null,8,["checked"]),p(r,null,{default:u((()=>[n("Aiden")])),_:1})])),_:1}),p(m,null,{default:u((()=>[p(f,{value:"Lucy"}),p(r,null,{default:u((()=>[n("Lucy")])),_:1})])),_:1})])),_:1})])),_:1}),g(" </slot> ")])),_:1},8,["modelValue"]),g(' <slot name="btn"> '),p(i,{class:"btnbox"},{default:u((()=>[p(j,{onClick:T,type:"primary",class:"btn"},{default:u((()=>[n("确定")])),_:1})])),_:1}),g(" </slot> ")])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-6f979f4a"]])},data:()=>({codeVisible:!0,loginVisible:!0,demoVisible:!1,sendCaptchaEnabled:!0,codeMessage:"获取验证码",counterTimer:60,phoneNumber:null}),methods:{onInput:function(e){console.log("input e=",e),/^1[3456789]\d{9}$/.test(e.detail.value)?(this.codeVisible=!1,this.phoneNumber=e.detail.value):this.codeVisible=!0},onInputCode:function(e){console.log("code=",e),/^\d{6}$/.test(e.detail.value)?this.loginVisible=!1:this.loginVisible=!0},sendCaptcha:function(e){if(console.log("button e=",e),!this.sendCaptchaEnabled)return;this.sendCaptchaEnabled=!1;const t={phone:this.phoneNumber};console.log("params===",t),E(t).then((e=>{console.log("res=",e)})),this.codeMessage="重新发送";const o=setInterval((()=>{if(this.counterTimer<=0)return this.counterTimer=60,this.sendCaptchaEnabled=!0,clearInterval(o),void(this.codeMessage="获取验证码");this.counterTimer--}),1e3)},formSubmit:function(e){console.log("e=",e),console.log("form发生了submit事件，携带数据为："+JSON.stringify(e.detail.value));const t=e.detail.value,o=this;console.log("window.navigator=",window.navigator.userAgent),window.navigator.__defineGetter__("userAgent",(()=>"myBroser")),setTimeout((()=>{console.log("window.navigator1=",window.navigator.userAgent)}),200),z(t).then((e=>{console.log("res========",e);const{code:t,token:s}=e.data;200===t&&(console.log("成功"),N(s),o.$store.dispatch("user/GetUserInfo"),v({url:"/pages/index/index"}))}))},miniProLogin:function(e){console.log("e===",e),I({provider:"weixin",success:function(e){console.log("loginRes=",e.authResult)}})},wechatLogin:function(){L({title:"待上线",duration:2e3})},qqLogin:function(){L({title:"待上线",duration:2e3})},weiboLogin:function(){L({title:"待上线",duration:2e3})},getInfo:function(e){console.log("登录e=",e),I({provider:"weixin",success:function(e){console.log("loginRes====",e);const{code:t}=e;loginWechat({code:t}).then("res===",res)}})},openDemo:function(){this.demoVisible=!0},onClose:function(){this.demoVisible=!1}}},[["render",function(e,o,s,a,i,r){const f=M,m=c,_=y,b=T,w=x,v=U,k=V("show-modal"),C=V("vuew"),S=R(h("uni-link"),B);return t(),d(_,{class:"login-wraper"},{default:u((()=>[p(_,{class:"image-wraper"},{default:u((()=>[g(' <image\r\n        style="width: 100%; height: 100%"\r\n        src="../../static/images/login-bg.gif"\r\n        mode=""\r\n      ></image> '),p(f,{class:"image",src:"/assets/logo.8ed403c9.png"}),p(m,{class:"logo-title"},{default:u((()=>[n("蔓草兴趣")])),_:1})])),_:1}),p(_,{class:"login"},{default:u((()=>[p(v,{onSubmit:r.formSubmit,onReset:e.formReset,class:"login-in"},{default:u((()=>[p(_,{class:"row-flex uni-form-item uni-column"},{default:u((()=>[p(m,{class:"title"},{default:u((()=>[n("手机号：")])),_:1}),p(b,{class:"uni-input",name:"phone",placeholder:"请输入手机号",onInput:r.onInput},null,8,["onInput"])])),_:1}),p(_,{class:"row-flex uni-form-item uni-column"},{default:u((()=>[p(m,{class:"title"},{default:u((()=>[n("验证码：")])),_:1}),p(b,{class:"uni-input",name:"code",placeholder:"请输入验证码",onInput:r.onInputCode},null,8,["onInput"]),p(w,{class:"code",disabled:!i.sendCaptchaEnabled||i.codeVisible,onClick:r.sendCaptcha},{default:u((()=>[n(l(i.codeMessage),1),i.sendCaptchaEnabled?g("v-if",!0):(t(),d(m,{key:0},{default:u((()=>[n("("+l(i.counterTimer)+"s)",1)])),_:1}))])),_:1},8,["disabled","onClick"])])),_:1}),p(_,{class:"uni-btn-v"},{default:u((()=>[p(w,{"form-type":"submit",type:"primary",class:"btn-block",disabled:i.loginVisible},{default:u((()=>[n(" 登录 ")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["onSubmit","onReset"]),i.demoVisible?(t(),d(k,{key:0,title:"请选择账号",content:"请任意选择一个账号登录",onClose:r.onClose},null,8,["onClose"])):g("v-if",!0),p(C,{class:"demo"},{default:u((()=>[p(w,{class:"demo-title",onClick:r.openDemo},{default:u((()=>[n("点击可使用演示账号登录")])),_:1},8,["onClick"])])),_:1})])),_:1}),p(_,{class:"gov-wraper"},{default:u((()=>[p(S,{class:"gov",showUnderLine:!1,href:"https://beian.miit.gov.cn/",text:"粤ICP备2021179573号"})])),_:1})])),_:1})}],["__scopeId","data-v-7a375118"]]);export{O as default};
//# sourceMappingURL=pages-login-index.ef7c10d5.js.map
