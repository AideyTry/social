import{r as e,x as l,Q as s,y as a,o,b as t,c as n,d as u,g as i,i as c,t as p,h as r,e as d,f as m,F as f,ao as g,a4 as v,q as h,p as _,S as b,U as I,Y as x,$ as k,m as y,a2 as F}from"./index.11d2ceab.js";import{_ as S}from"./plugin-vue_export-helper.21dcd24c.js";var O=S({onLoad:function(e){console.log("options===",e),this.propsOptions=e},setup(){let t=e(null),n=l([""]),u=e(""),i=e(null),c=e(!0);s(u,(e=>{console.log("current======",e),"0"==i.value.title&&(c.value=!!e)}));let p=a((()=>u.value.length));const r=e=>{k({success:l=>{console.log("chooseImageRes===",l);const{tempFilePaths:s,tempFiles:a}=l;console.log("tempFilePaths[0]===",s[0]),((e,l)=>{console.log("index, filePath===",e,l),F({url:"https://mancao.social/prod/users/uploadFile",filePath:l,name:"file",formData:{user:"test"},success:l=>{console.log("uploadFileRes===",l);const{data:s}=l,a=JSON.parse(s);console.log("imgData=",a),n[e]=a.url,n.push(""),console.log("index===",e)}})})(e,s[0])}})};return o((()=>{t.value=i.value.title,"0"===t.value&&(c.value=!1)})),{title:t,inputInform:u,count:p,images:n,propsOptions:i,submitvisible:c,onUpload:(e,l)=>{console.log("item, index===",e,l),e||r(l)},onInput:e=>{console.log("einput= ",e),u.value=e.detail.value},onSubmit:()=>{console.log("title============",t.value),console.log("inputInform=====================",u.value);const e=JSON.parse(JSON.stringify(n));console.log("resultImages==========================",e.splice(e.length-1,1)),console.log("resultImages result=",e);const l={account:i.value.account,title:t.value,content:u.value,images:e};g(l).then((e=>{200===e.data.code&&v({title:e.data.msg,duration:2e3})}))}}}},[["render",function(e,l,s,a,o,g){const v=h,k=_,F=y,S=b,O=I,C=x;return t(),n(k,{class:"inform-detail-wrapper"},{default:u((()=>["0"!==a.title?(t(),n(k,{key:0,class:"title"},{default:u((()=>[i(v,null,{default:u((()=>[c(p(a.title),1)])),_:1})])),_:1})):r("v-if",!0),i(k,{class:"content"},{default:u((()=>[i(v,null,{default:u((()=>[c("上传截图、提高举报准确度")])),_:1})])),_:1}),i(S,{"scroll-x":"true",class:"photos"},{default:u((()=>[i(k,{class:"photos"},{default:u((()=>[(t(!0),d(f,null,m(a.images,((e,l)=>(t(),n(k,{class:"photo-wraper",onClick:s=>a.onUpload(e,l),key:l},{default:u((()=>[i(F,{mode:"aspectFill",src:e||"",class:"photo"},null,8,["src"]),!e&&a.images[l-1]||0===l&&!a.images[0]?(t(),d("span",{key:0,class:"iconfont photo-add"}," ")):r("v-if",!0)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),i(O,{placeholder:"0"===a.title?"请填写不少于10个字的举报理由（必填项）":"还有其他想说的...（选填）",value:a.inputInform,onInput:a.onInput,maxlength:100},null,8,["placeholder","value","onInput"]),i(k,null,{default:u((()=>[i(v,null,{default:u((()=>[c(p(a.count)+"/100",1)])),_:1})])),_:1}),i(k,{class:"submit-wraper"},{default:u((()=>[i(C,{onClick:a.onSubmit,type:"primary",disabled:!a.submitvisible},{default:u((()=>[c(" 提交 ")])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})}],["__scopeId","data-v-e7c48d90"]]);export{O as default};
//# sourceMappingURL=pages-message-InformDetail.1d49580c.js.map
