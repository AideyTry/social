import{x as o,v as a,r as e,o as s,b as t,e as l,g as n,d as i,i as d,t as c,c as u,F as r,f,h as b,G as p,af as h,ar as y,aj as m,m as _,l as g,p as I,B as v,H as x,P as k,a2 as j,a1 as C,aC as w,A as P}from"./index.5db6d7a1.js";import{b as V}from"./hobby.99fba805.js";import{d as B}from"./publish.96d4d4e3.js";import{C as D}from"./Comment.7c83fe75.js";import{V as E}from"./VideoPlayer.54c7e1f7.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";import"./communication.2a2ffb84.js";var L=F({components:{Comment:D,VideoPlayer:E},onLoad:function(o){console.log("options===",o)},onReady:function(){},setup(t){console.log("props=",t);const l=p(),n=o((()=>l.state.user.userInfo)).value,i=a({poster:"",src:""});let d=e([{content:"https://social-1308251497.cos.ap-guangzhou.myqcloud.com/images/4.jfif"}]);e(0),e("default");let c=e({});let u=e(null),r=e(["编辑","删除"]),f=e(0);return s((()=>{console.log("userInfo===",n),(o=>{const{id:a,hobby:e}=o;V({id:a,hobby:e}).then((o=>{console.log("data===",o),200===o.data.code&&(c.value=o.data.data,u.value=h(o.data.data.create_time),console.log("hobbyInfo.value===",c.value),console.log("data.data.data.url===",o.data.data.url),i.poster=o.data.data.url,i.src=o.data.data.video_url)}))})({id:t.id,hobby:t.hobby})})),{hobbyInfo:c,info:d,publishDate:u,options:i,goBack:()=>{y({url:"/pages/user/index"})},onEdit:o=>{m({itemList:r,success:function(o){var a;console.log("选中了第"+(o.tapIndex+1)+"个按钮"),f.value=o.tapIndex,1===f.value?(a=t,console.log("info==",a),j({title:"删除",content:"确定删除？",success:function(o){if(o.confirm){const o={hobby:t.hobby,id:t.id};B(o).then((o=>{200===o.data.code&&(C({title:"删除成功",duration:2e3}),y({url:"/pages/user/index",success(){let o=w().pop();console.log("page==============",o),o&&o.onLoad()}}))}))}else o.cancel}})):(o=>{console.log("info==",o),k({url:`/pages/user/info/EditDetail?id=${o.id}&hobby=${o.hobby}`})})(t)},fail:function(o){console.log(o.errMsg)}})},operations:r,activeOperationIndex:f}}},[["render",function(o,a,e,s,p,h){const y=_,m=g,k=I,j=P,C=v,w=x("VideoPlayer"),V=x("Comment");return t(),l("div",{class:"hobby-detail"},[n(y,{class:"author-wraper"},{default:i((()=>[n(y,{class:"author"},{default:i((()=>[n(y,{onClick:s.goBack},{default:i((()=>[d("返回")])),_:1},8,["onClick"]),n(y,{class:"author-info"},{default:i((()=>[n(m,{class:"avatar",mode:"aspectFit",src:s.hobbyInfo.avatar||""},null,8,["src"]),n(k,null,{default:i((()=>[d(c(s.hobbyInfo.username||""),1)])),_:1})])),_:1}),n(y,{onClick:s.onEdit},{default:i((()=>[n(k,null,{default:i((()=>[d("...")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),0===s.hobbyInfo.fileType?(t(),u(y,{key:0,class:"swiper-box"},{default:i((()=>[n(C,{class:"swiper-box","indicator-dots":s.hobbyInfo.photos.length>1},{default:i((()=>[(t(!0),l(r,null,f(s.hobbyInfo.photos,((o,a)=>(t(),u(j,{key:a},{default:i((()=>[n(y,{class:"swiper-item"},{default:i((()=>[n(m,{src:o,class:"image",mode:"aspectFit"},null,8,["src"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["indicator-dots"])])),_:1})):b("v-if",!0),1===s.hobbyInfo.fileType?(t(),u(y,{key:1,class:"swiper-box"},{default:i((()=>[n(y,{class:"swiper-item"},{default:i((()=>[(t(),u(w,{options:{src:s.hobbyInfo.video_url,poster:s.hobbyInfo.url},key:s.hobbyInfo.id},null,8,["options"]))])),_:1})])),_:1})):b("v-if",!0),n(y,{class:"content-wraper"},{default:i((()=>[n(y,{class:"content"},{default:i((()=>[n(y,{class:"title"},{default:i((()=>[d(c(s.hobbyInfo.title),1)])),_:1}),n(y,{class:"main"},{default:i((()=>[d(c(s.hobbyInfo.content),1)])),_:1}),n(y,{class:"publish-date"},{default:i((()=>[n(k,null,{default:i((()=>[d("发布于: ")])),_:1}),n(k,null,{default:i((()=>[d(c(s.publishDate),1)])),_:1})])),_:1})])),_:1})])),_:1}),n(y,{class:"comment-wraper"},{default:i((()=>[s.hobbyInfo.id?(t(),u(V,{hobbyInfo:s.hobbyInfo,key:s.hobbyInfo.id},null,8,["hobbyInfo"])):b("v-if",!0)])),_:1})])}],["__scopeId","data-v-674604e3"]]);export{L as default};
//# sourceMappingURL=pages-user-info-PublicDetail.f97059d9.js.map
