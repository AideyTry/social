import{r as a,Q as e,o as s,b as l,c as t,d as n,h as u,g as i,e as o,f as c,R as r,i as d,t as f,u as p,F as m,k as _,q as v,p as g,m as h,y as b,w as y,A as k,D as w,E as x,G as C,T as I,H as F}from"./index.11d2ceab.js";import{a as $,b as j}from"./communication.cab9d041.js";import{g as D,a as O}from"./publish.f83e46c8.js";import{_ as R}from"./plugin-vue_export-helper.21dcd24c.js";const S={name:"infoList"};var L=R(Object.assign(S,{props:{list:{type:Array,default:[]},activeIndex:{type:Number,default:0}},setup(b){const y=b;let k=a([]);return e((()=>y.list),(a=>{console.log("state=",a),k.value=a}),{deep:!0}),s((()=>{console.log("props=",y)})),(a,e)=>{const s=v,b=g,w=h;return l(),t(b,{class:"info-list"},{default:n((()=>[u(' <uni-list>\r\n      <uni-list-item\r\n        v-for="item in infoList"\r\n        :key="item.id"\r\n        :title="item.username"\r\n        :note="item.title"\r\n        :thumb="item.avatar"\r\n        thumb-size="lg"\r\n      ></uni-list-item>\r\n    </uni-list> '),i(b,{class:"ul"},{default:n((()=>[(l(!0),o(m,null,c(p(k),(e=>(l(),t(b,{class:"li",key:e.id,onClick:a=>(a=>{console.log("item=",a),0===y.activeIndex?_({url:`/pages/user/info/PublicDetail?id=${a.id}&hobby=${a.hobby}`}):_({url:`/pages/user/info/LikeDetail?id=${a.id}&hobby=${a.hobby}`})})(e)},{default:n((()=>[i(b,{class:"comment"},{default:n((()=>[u(' <svg class="replay-icon" aria-hidden="true">\r\n            <use xlink:href="#icon-pinglunhuifu"></use>\r\n          </svg> '),r("span",{class:"iconfont replay-icon"},""),i(b,null,{default:n((()=>[i(s,null,{default:n((()=>[d(f(e.comments||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(b,{class:"publish-info"},{default:n((()=>[i(b,{class:"title"},{default:n((()=>[d(f(e.title),1)])),_:2},1024),i(b,{class:"userinfo"},{default:n((()=>[i(w,{class:"avatar",mode:"aspectFit",src:e.avatar||""},null,8,["src"]),i(s,{class:"username"},{default:n((()=>[d(f(e.username),1)])),_:2},1024),i(s,{class:"update-time"},{default:n((()=>[d(f(a.$filters.commentTime(e.create_time||""))+" 更新",1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(b,{class:"img"},{default:n((()=>[i(w,{class:"img-url",mode:"aspectFit",src:e.url||""},null,8,["src"])])),_:2},1024)])),_:2},1032,["onClick"])))),128)),p(k).length<=0?(l(),t(b,{key:0,class:"li empty"},{default:n((()=>[d("暂无数据")])),_:1})):u("v-if",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-f301d8ec"]]);const N={onShow:function(){w()>0?x({index:2,text:"···"}):C({index:2})},onPullDownRefresh(){this.getFollowsData(),this.getFansData(),I()}};var P=R(Object.assign(N,{setup(e){const o=F(),c=b((()=>o.state.user.userInfo)).value,m=()=>{_({url:"/pages/user/setting/Setting"})},w=()=>{_({url:"/pages/user/info/index"})};let x=a([]),C=a([]);const I=()=>{const a=[];for(let e of x.value)a.push(e.follow_id);_({url:`/pages/user/info/Follow?type=0&userids=${encodeURIComponent(JSON.stringify(a))}`})},R=()=>{const a=[];for(let e of C.value)a.push(e.user_id);_({url:`/pages/user/info/Follow?type=1&userids=${encodeURIComponent(JSON.stringify(a))}`})};let S=a(0),N=a([]);a([]);const P=a=>{S.value=a};return y((()=>{0===S.value?(N.value=[],D().then((a=>{console.log("data getPublish=",a),200===a.data.code&&(N.value=a.data.data)}))):(N.value=[],O().then((a=>{console.log("data likes=",a),200===a.data.code&&(N.value=a.data.data)})))}),S.value),s((()=>{$().then((a=>{console.log("getfollows =",a),200===a.data.code&&(x.value=a.data.follows)})),j().then((a=>{console.log("getfans =",a),200===a.data.code&&(C.value=a.data.fans)}))})),(a,e)=>{const s=h,o=v,_=g;return l(),t(_,{class:"userinfo-wraper"},{default:n((()=>[i(_,{class:"userinfo"},{default:n((()=>[i(_,{class:"avatar-warper",onClick:w},{default:n((()=>[i(s,{src:p(c).avatar?p(c).avatar:"/static/images/default_avatar.png",class:"avatar"},null,8,["src"]),p(c).avatar?u("v-if",!0):(l(),t(o,{key:0,class:"avatar-title"},{default:n((()=>[d("请上传图片")])),_:1}))])),_:1}),i(_,{class:"userinfo-detail"},{default:n((()=>[i(_,{class:"title-wraper"},{default:n((()=>[i(o,{class:"username"},{default:n((()=>[d("用户名："+f(p(c).username),1)])),_:1}),i(_,{onClick:m,class:"config-wraper"},{default:n((()=>[r("span",{class:"iconfont"},"  "),i(o,null,{default:n((()=>[d("设置")])),_:1})])),_:1})])),_:1}),i(_,{class:"motto"},{default:n((()=>[i(o,null,{default:n((()=>[d("签   名：")])),_:1}),i(o,null,{default:n((()=>[d(f(p(c).motto),1)])),_:1})])),_:1})])),_:1})])),_:1}),i(_,{class:"fans-wraper"},{default:n((()=>[i(_,{class:"follows",onClick:I},{default:n((()=>[i(o,null,{default:n((()=>[d("关注")])),_:1}),d(" "),i(o,null,{default:n((()=>[d(f(p(x).length),1)])),_:1})])),_:1}),i(_,{class:"fans",onClick:R},{default:n((()=>[i(o,null,{default:n((()=>[d("粉丝")])),_:1}),d(" "),i(o,null,{default:n((()=>[d(f(p(C).length),1)])),_:1})])),_:1})])),_:1}),i(_,{class:"publish-wraper"},{default:n((()=>[i(_,{class:"my-publishs",onClick:e[0]||(e[0]=a=>P(0))},{default:n((()=>[i(o,null,{default:n((()=>[d("我发布的")])),_:1}),i(_,{class:k({active:0===p(S)})},null,8,["class"])])),_:1}),i(_,{class:"my-likes",onClick:e[1]||(e[1]=a=>P(1))},{default:n((()=>[i(o,null,{default:n((()=>[d("我喜欢的")])),_:1}),i(_,{class:k({active:1===p(S)})},null,8,["class"])])),_:1})])),_:1}),i(_,null,{default:n((()=>[i(L,{list:p(N),activeIndex:p(S)},null,8,["list","activeIndex"])])),_:1}),u("v-if",!0)])),_:1})}}}),[["__scopeId","data-v-9b62efe2"]]);export{P as default};
//# sourceMappingURL=pages-user-index.34da2001.js.map
