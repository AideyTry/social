import{z as a,A as e,o as l,c as s,w as o,e as t,D as n,E as i,M as u,n as d,l as c,a3 as r,N as f,P as v,J as p,K as _,V as m,L as w,O as g,Q as I}from"./vendor.ada0ecfb.js";import{d as h,a as F,i as C,j,b as k}from"./communication.127f8003.js";import{_ as x}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.e89f36a6.js";var L=x({name:"follow",setup(l){let s=a([]),o=a(!1),t=a("关注");const n=a=>{const e={userids:a};0===parseInt(l.type)?(r({title:"关注"}),C(e).then((a=>{200===a.data.code&&(s.value=a.data.followsInfo,s.value=s.value.filter((a=>a)),console.log("infoList.value====",s.value),s.value.forEach((a=>{(a=>{let e={followId:a.user_id};console.log("params===",e),k(e).then((a=>{console.log("data1===",a),200===a.data.code&&(o.value=a.data.isFollow,a.data.isFollow?t.value="已关注":t.value="关注")}))})(a)})))}))):1===parseInt(l.type)&&(r({title:"粉丝"}),j(e).then((a=>{console.log("getFansInfo===",a),200===a.data.code&&(s.value=a.data.fansInfo,s.value=s.value.filter((a=>a)),console.log("infoList.value====",s.value))})))};return e((()=>{n(JSON.parse(decodeURIComponent(l.userids)))})),{infoList:s,followText:t,isFlollow:o,following:a=>{if(o.value)return void d({content:"确认不再关注？",success:function(e){if(e.confirm){let e={followId:a.user_id};h(e).then((a=>{200===a.data.code&&(t.value="关注",o.value=!1,n(JSON.parse(decodeURIComponent(l.userids))))}))}else e.cancel&&console.log("用户点击取消")}});let e={followId:a.user_id};F(e).then((a=>{console.log("data===",a),200===a.data.code?(t.value="已关注",o.value=!0):400===a.data.code&&c({title:a.data.msg,icon:"none",duration:2e3})}))},goUserDetail:a=>{console.log("info======",a),f({url:`/pages/user/info/User?id=${a.user_id}`})}}}},[["render",function(a,e,d,c,r,f){const h=g,F=v,C=I;return l(),s(F,{class:"info-list"},{default:o((()=>[t(F,{class:"ul"},{default:o((()=>[(l(!0),n(u,null,i(c.infoList,(a=>(l(),s(F,{class:"li",key:a.id,onClick:e=>c.goUserDetail(a)},{default:o((()=>[t(F,{class:"userinfo-wraper"},{default:o((()=>[t(F,{class:"avatar-wraper"},{default:o((()=>[t(h,{class:"avatar",mode:"aspectFit",src:a.avatar||""},null,8,["src"])])),_:2},1024),t(F,{class:"publish-info"},{default:o((()=>[t(F,{class:"title"},{default:o((()=>[p(_(a.title),1)])),_:2},1024),t(F,{class:"userinfo"},{default:o((()=>[t(C,{class:"username"},{default:o((()=>[p(_(a.username),1)])),_:2},1024)])),_:2},1024),t(F,{class:"userinfo"},{default:o((()=>[t(C,{class:"username"},{default:o((()=>[p(_(a.motto),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),t(F,{class:m({follow:!c.isFlollow,active:c.isFlollow}),onClick:w((e=>c.following(a)),["stop"])},{default:o((()=>[t(C,null,{default:o((()=>[p(_(c.followText),1)])),_:1})])),_:2},1032,["class","onClick"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})}],["__scopeId","data-v-2aea53da"]]);export{L as default};
//# sourceMappingURL=pages-user-info-Follow.b2b0dd5e.js.map
