import{a7 as e,b as t,e as o,J as l,i as s,t as i,z as n,n as a,c,d as r,p as d,G as p,r as u,v as h,y as f,g as m,h as b,N as g,j as _,u as x,a8 as w,a9 as k,m as v,Z as y,_ as C,U as S,V as $,aa as V,ab as I,ac as L,ad as z,ae as M,a1 as T,P as U,l as P,R,H as j,a4 as A}from"./index.5db6d7a1.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";import{r as E}from"./uni-app.es.737f45e5.js";import{_ as O,a as H}from"./uni-forms.0b65dcb8.js";import"./uni-icons.eb5ebe58.js";var B=N({name:"uniLink",props:{href:{type:String,default:""},text:{type:String,default:""},download:{type:String,default:""},showUnderLine:{type:[Boolean,String],default:!0},copyTips:{type:String,default:"已自动复制网址，请在手机浏览器里粘贴该网址"},color:{type:String,default:"#999999"},fontSize:{type:[Number,String],default:14}},computed:{isShowA(){return this._isH5=!0,!(!this.isMail()&&!this.isTel()||!0!==this._isH5)}},created(){this._isH5=null},methods:{isMail(){return this.href.startsWith("mailto:")},isTel(){return this.href.startsWith("tel:")},openURL(){window.open(this.href)},makePhoneCall(t){e({phoneNumber:t})}}},[["render",function(e,p,u,h,f,m){const b=d;return m.isShowA?(t(),o("a",{key:0,class:n(["uni-link",{"uni-link--withline":!0===u.showUnderLine||"true"===u.showUnderLine}]),href:u.href,style:a({color:u.color,fontSize:u.fontSize+"px"}),download:u.download},[l(e.$slots,"default",{},(()=>[s(i(u.text),1)]),!0)],14,["href","download"])):(t(),c(b,{key:1,class:n(["uni-link",{"uni-link--withline":!0===u.showUnderLine||"true"===u.showUnderLine}]),style:a({color:u.color,fontSize:u.fontSize+"px"}),onClick:m.openURL},{default:r((()=>[l(e.$slots,"default",{},(()=>[s(i(u.text),1)]),!0)])),_:3},8,["class","style","onClick"]))}],["__scopeId","data-v-11527474"]]);const W={name:"showModal"};var q=N(Object.assign(W,{props:{title:{type:String,default:""},content:{type:String,default:""}},emits:["close"],setup(e,{emit:o}){const l=e,n=p(),a=u(null);let V=h({username:"Aiden"});const I=e=>{const{detail:{value:t}}=e;a.value.setValue("username",t)},L=()=>{o("close")},z=()=>{a.value.validate().then((e=>{const t={username:e.username,password:"111111"};console.log("params=======",t),w(t).then((e=>{console.log("res========",e);const{code:t,token:l}=e.data;200===t&&(o("close"),console.log("成功"),k(l),n.dispatch("user/GetUserInfo"),uni.reLaunch({url:"/pages/index/index"}))}))})).catch((e=>{console.log("表单错误信息：",e)}))};return(e,o)=>{const n=v,p=d,u=y,h=C,w=S,k=E(f("uni-forms-item"),O),M=E(f("uni-forms"),H),T=$;return t(),c(n,{class:"_showModal"},{default:r((()=>[m(n,{class:"_shade"}),m(n,{class:"_modalBox"},{default:r((()=>[m(n,{class:"_modal"},{default:r((()=>[b(' <slot name="title"> '),m(n,{class:"title-wraper"},{default:r((()=>[m(n,{class:"title"},{default:r((()=>[m(p,null,{default:r((()=>[s(i(l.title),1)])),_:1})])),_:1}),b(' <svg class="close-icon" aria-hidden="true" @click.stop="onClose">\r\n              <use xlink:href="#icon-guanbi1"></use>\r\n              </svg> '),g("span",{class:"iconfont close-icon",onClick:_(L,["stop"])},"",8,["onClick"])])),_:1}),b(" </slot> "),m(n,{class:"content-hint"},{default:r((()=>[s(i(l.content),1)])),_:1}),m(M,{ref_key:"form",ref:a,modelValue:x(V)},{default:r((()=>[b(' <slot name="content"> '),m(k,{name:"username"},{default:r((()=>[m(w,{name:"radio",onChange:I},{default:r((()=>[m(h,null,{default:r((()=>[m(u,{value:"Aiden",checked:"Aiden"===x(V).username},null,8,["checked"]),m(p,null,{default:r((()=>[s("Aiden")])),_:1})])),_:1}),m(h,null,{default:r((()=>[m(u,{value:"Lucy"}),m(p,null,{default:r((()=>[s("Lucy")])),_:1})])),_:1})])),_:1})])),_:1}),b(" </slot> ")])),_:1},8,["modelValue"]),b(' <slot name="btn"> '),m(n,{class:"btnbox"},{default:r((()=>[m(T,{onClick:z,type:"primary",class:"btn"},{default:r((()=>[s("确定")])),_:1})])),_:1}),b(" </slot> ")])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-258b3eca"]]);var G=N({props:{visible:Boolean,color:{type:String,default:"#303133"},placement:{type:String,default:"top"},content:{type:String,default:""},show:{type:Boolean,default:!1}},data(){return{isShow:this.visible,title:"Hello",arrowLeft:0,query:null,style:{},arrowStyle:{}}},onLoad(){},watch:{isShow:{handler(e){this.$emit("update:visible",e)},immediate:!0},visible:{handler(e){this.isShow=e,e&&this.$nextTick((()=>{this.handleClick()}))},immediate:!0}},mounted(){},methods:{close(){this.isShow=!1},fixedWrap(){this.isShow=!1},handleClick(){V().in(this).selectAll(".zb_tooltip_content,.zb_tooltip__popper").boundingClientRect((async e=>{let{left:t,bottom:o,right:l,top:s,width:i,height:n}=e[0],a=e[1],c={},r={};switch(this.placement){case"top":a.width>i?c.left=`-${(a.width-i)/2}px`:c.left=Math.abs(a.width-i)/2+"px",c.bottom=`${n+8}px`,r.left=a.width/2-6+"px";break;case"top-start":c.left="0px",c.bottom=`${n+8}px`;break;case"top-end":c.right="0px",c.bottom=`${n+8}px`,r.right="8px";break;case"bottom":a.width>i?c.left=`-${(a.width-i)/2}px`:c.left=Math.abs(a.width-i)/2+"px",c.top=`${n+8}px`,r.left=a.width/2-6+"px";break;case"bottom-start":c.left="0px",c.top=`${n+8}px`,r.left="8px";break;case"bottom-end":c.right="0px",c.top=`${n+8}px`,r.right="8px";break;case"right":c.left=`${i+8}px`,a.height>n?c.top=`-${(a.height-n)/2}px`:c.top=`${Math.abs((a.height-n)/2)}px`,r.top=a.height/2-6+"px";break;case"right-start":c.left=`${i+8}px`,c.top="0px",r.top="8px";break;case"right-end":c.left=`${i+8}px`,c.bottom="0px",r.bottom="8px";break;case"left":c.right=`${i+8}px`,a.height>n?c.top=`-${(a.height-n)/2}px`:c.top=`${Math.abs((a.height-n)/2)}px`,r.top=a.height/2-6+"px";break;case"left-start":c.right=`${i+8}px`,c.top="0px",r.top="8px";break;case"left-end":c.right=`${i+8}px`,c.bottom="0px",r.bottom="8px"}this.style=c,this.arrowStyle=r,this.isShow=!0})).exec()}}},[["render",function(e,o,d,p,u,h){const f=v;return t(),c(f,{class:"zb-tooltip",style:a({"--theme-bg-color":d.color})},{default:r((()=>[m(f,{class:"zb_tooltip_content"},{default:r((()=>[l(e.$slots,"default",{},void 0,!0),m(f,{class:"zb_tooltip__popper",style:a([u.style,{visibility:u.isShow?"visible":"hidden",color:"white"===d.color?"":"#fff",boxShadow:"white"===d.color?"0 3px 6px -4px #0000001f, 0 6px 16px #00000014, 0 9px 28px 8px #0000000d":""}])},{default:r((()=>[l(e.$slots,"content",{},(()=>[s(i(d.content),1)]),!0),m(f,{class:n(["zb_popper__icon",[{zb_popper__up:0===d.placement.indexOf("bottom"),zb_popper__arrow:0===d.placement.indexOf("top"),zb_popper__right:0===d.placement.indexOf("right"),zb_popper__left:0===d.placement.indexOf("left")}]]),style:a([u.arrowStyle])},null,8,["style","class"])])),_:3},8,["style"])])),_:3})])),_:3},8,["style"])}],["__scopeId","data-v-2f1ee06b"]]);var D=N({components:{ShowModal:q,mcTooltip:G},data:()=>({codeVisible:!0,loginVisible:!0,demoVisible:!1,sendCaptchaEnabled:!0,codeMessage:"获取验证码",counterTimer:60,phoneNumber:null,protocolChecked:!1,tooltipVisible:!1,timer:null}),methods:{onInput:function(e){console.log("input e=",e),/^1[3456789]\d{9}$/.test(e.detail.value)?(this.codeVisible=!1,this.phoneNumber=e.detail.value):this.codeVisible=!0},onInputCode:function(e){console.log("code=",e),/^\d{6}$/.test(e.detail.value)?this.loginVisible=!1:this.loginVisible=!0},sendCaptcha:function(e){if(console.log("button e=",e),!this.sendCaptchaEnabled)return;this.sendCaptchaEnabled=!1;const t={phone:this.phoneNumber};console.log("params===",t),I(t).then((e=>{console.log("res=",e)})),this.codeMessage="重新发送";const o=setInterval((()=>{if(this.counterTimer<=0)return this.counterTimer=60,this.sendCaptchaEnabled=!0,clearInterval(o),void(this.codeMessage="获取验证码");this.counterTimer--}),1e3)},formSubmit:function(e){console.log("e=",e),console.log("form发生了submit事件，携带数据为："+JSON.stringify(e.detail.value));const t=e.detail.value,o=this;if(!o.protocolChecked)return o.tooltipVisible=!0,console.log("this.tooltipVisible===",o.tooltipVisible),void(o.timer=setTimeout((()=>{o.tooltipVisible=!1,console.log("this.tooltipVisible2222===",o.tooltipVisible)}),2e3));L(t).then((e=>{console.log("res========",e);const{code:t,token:l}=e.data;200===t&&(console.log("成功"),o.timer=null,k(l),o.$store.dispatch("user/GetUserInfo"),z({url:"/pages/index/index"}))}))},miniProLogin:function(e){console.log("e===",e),M({provider:"weixin",success:function(e){console.log("loginRes=",e.authResult)}})},wechatLogin:function(){T({title:"待上线",duration:2e3})},qqLogin:function(){T({title:"待上线",duration:2e3})},weiboLogin:function(){T({title:"待上线",duration:2e3})},getInfo:function(e){console.log("登录e=",e),M({provider:"weixin",success:function(e){console.log("loginRes====",e);const{code:t}=e;loginWechat({code:t}).then("res===",res)}})},openDemo:function(){this.demoVisible=!0},onClose:function(){this.demoVisible=!1},protocolChange:function(e){console.log("value===",e),this.protocolChecked=!e.detail.value,this.protocolChecked&&(this.tooltipVisible=!1)},goProtocol:function(){U({url:"/pages/protocol/Protocol"})},goPrivacy:function(){U({url:"/pages/privacy/Privacy"})}}},[["render",function(e,o,l,a,p,u){const h=P,g=d,x=v,w=R,k=$,V=y,I=C,L=S,z=j("mc-tooltip"),M=A,T=j("show-modal"),U=j("vuew"),N=E(f("uni-link"),B);return t(),c(x,{class:"login-wraper"},{default:r((()=>[m(x,{class:"image-wraper"},{default:r((()=>[b(' <image\r\n        style="width: 100%; height: 100%"\r\n        src="../../static/images/login-bg.gif"\r\n        mode=""\r\n      ></image> '),m(h,{class:"image",src:"/assets/logo.8ed403c9.png"}),m(g,{class:"logo-title"},{default:r((()=>[s("蔓草兴趣")])),_:1})])),_:1}),m(x,{class:"login"},{default:r((()=>[m(M,{onSubmit:u.formSubmit,onReset:e.formReset,class:"login-in"},{default:r((()=>[m(x,{class:"row-flex uni-form-item uni-column"},{default:r((()=>[m(g,{class:"title"},{default:r((()=>[s("手机号：")])),_:1}),m(w,{class:"uni-input",name:"phone",placeholder:"请输入手机号",onInput:u.onInput},null,8,["onInput"])])),_:1}),m(x,{class:"row-flex uni-form-item uni-column"},{default:r((()=>[m(g,{class:"title"},{default:r((()=>[s("验证码：")])),_:1}),m(w,{class:"uni-input",name:"code",placeholder:"请输入验证码",onInput:u.onInputCode},null,8,["onInput"]),m(k,{class:"code",disabled:!p.sendCaptchaEnabled||p.codeVisible,onClick:u.sendCaptcha},{default:r((()=>[s(i(p.codeMessage),1),p.sendCaptchaEnabled?b("v-if",!0):(t(),c(g,{key:0},{default:r((()=>[s("("+i(p.counterTimer)+"s)",1)])),_:1}))])),_:1},8,["disabled","onClick"])])),_:1}),m(x,{class:"uni-btn-v"},{default:r((()=>[m(k,{"form-type":"submit",type:"primary",class:"btn-block",disabled:p.loginVisible},{default:r((()=>[s(" 登录 ")])),_:1},8,["disabled"])])),_:1}),m(z,{placement:"top-start",visible:p.tooltipVisible,content:"请先勾选同意后再进行登录"},{default:r((()=>[m(x,{class:n({"protocol-wraper":!0,shake:p.tooltipVisible})},{default:r((()=>[m(L,{onChange:u.protocolChange},{default:r((()=>[m(I,null,{default:r((()=>[m(V,{value:p.protocolChecked,checked:p.protocolChecked},null,8,["value","checked"]),m(g,{class:"agreement"},{default:r((()=>[s("我已阅读并同意")])),_:1}),m(g,{class:"protocol",onClick:_(u.goProtocol,["stop"])},{default:r((()=>[s("用户协议")])),_:1},8,["onClick"]),s("和"),m(g,{class:"privacy",onClick:_(u.goPrivacy,["stop"])},{default:r((()=>[s("隐私政策")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["onChange"])])),_:1},8,["class"])])),_:1},8,["visible"])])),_:1},8,["onSubmit","onReset"]),p.demoVisible?(t(),c(T,{key:0,title:"请选择账号",content:"请任意选择一个账号登录",onClose:u.onClose},null,8,["onClose"])):b("v-if",!0),m(U,{class:"demo"},{default:r((()=>[m(k,{class:"demo-title",onClick:u.openDemo},{default:r((()=>[s(" 点击可使用演示账号登录 ")])),_:1},8,["onClick"])])),_:1})])),_:1}),m(x,{class:"gov-wraper"},{default:r((()=>[m(N,{class:"gov",showUnderLine:!1,href:"https://beian.miit.gov.cn/",text:"粤ICP备2021179573号"})])),_:1})])),_:1})}],["__scopeId","data-v-e6c484e0"]]);export{D as default};
//# sourceMappingURL=pages-login-index.80bd8031.js.map
