import{x as o,v as a,r as l,o as e,b as s,e as t,c as n,d as i,g as d,F as c,f as u,h as f,i as r,t as b,z as p,G as h,af as y,a2 as m,a1 as v,l as _,m as g,B as I,H as w,p as x,ag as j,A as F}from"./index.5db6d7a1.js";import{b as k}from"./hobby.99fba805.js";import{d as C,c as T,e as V}from"./communication.2a2ffb84.js";import{C as O}from"./Comment.7c83fe75.js";import{V as P}from"./VideoPlayer.54c7e1f7.js";import{_ as z}from"./plugin-vue_export-helper.21dcd24c.js";var D=z({components:{Comment:O,VideoPlayer:P},onLoad:function(o){console.log("options===",o),this.propsOptions=o},onReady:function(){},setup(s,t){console.log("props=",s),console.log("context==========",t);const n=h(),i=o((()=>n.state.user.userInfo)).value,d=a({poster:"",src:""});let c=l(null),u=l([{content:"https://social-1308251497.cos.ap-guangzhou.myqcloud.com/images/4.jfif"}]),f=l({});let r=l(!1),b=l("关注");let p=l(null);const _=()=>{let o={followId:f.value.user_id};console.log("params===",o),V(o).then((o=>{console.log("data1===",o),200===o.data.code&&(r.value=o.data.isFollow,o.data.isFollow?b.value="已关注":b.value="关注")}))};return e((()=>{console.log("userInfo===",i),console.log("propsOptions===========",c),(o=>{console.log("obj===================================================================================",o);const{hobby:a}=o;({hobby2:()=>j({title:"狼人杀"}),hobby3:()=>j({title:"剧本杀"}),hobby4:()=>j({title:"登山"}),hobby5:()=>j({title:"旅游"}),hobby6:()=>j({title:"视频"}),hobby7:()=>j({title:"电影"})})[`hobby${a}`]()})(c.value),(o=>{const{id:a,hobby:l}=o;k({id:a,hobby:l}).then((o=>{console.log("data===",o),200===o.data.code&&(f.value=o.data.data,p.value=y(o.data.data.create_time),console.log("hobbyInfo.value===",f.value),console.log("data.data.data.url===",o.data.data.url),d.poster=o.data.data.url,d.src=o.data.data.video_url,_())}))})({id:c.value.id,hobby:c.value.hobby})})),{followText:b,isFlollow:r,following:()=>{if(r.value)return void m({content:"确认不再关注？",success:function(o){if(o.confirm){let o={followId:f.value.user_id};C(o).then((o=>{200===o.data.code&&(b.value="关注",r.value=!1)}))}else o.cancel&&console.log("用户点击取消")}});console.log("userInfo===",i);let o={followId:f.value.user_id};T(o).then((o=>{console.log("data===",o),200===o.data.code?(b.value="已关注",r.value=!0):400===o.data.code&&v({title:o.data.msg,icon:"none",duration:2e3})}))},hobbyInfo:f,info:u,publishDate:p,options:d,propsOptions:c}}},[["render",function(o,a,l,e,h,y){const m=_,v=g,j=F,k=I,C=w("VideoPlayer"),T=x,V=w("Comment");return s(),t("div",{class:"hobby-detail"},[0===e.hobbyInfo.fileType?(s(),n(v,{key:0,class:"swiper-box"},{default:i((()=>[d(k,{class:"swiper-box","indicator-dots":e.hobbyInfo.photos.length>1},{default:i((()=>[(s(!0),t(c,null,u(e.hobbyInfo.photos,((o,a)=>(s(),n(j,{key:a},{default:i((()=>[d(v,{class:"swiper-item"},{default:i((()=>[d(m,{src:o,class:"image",mode:"aspectFit"},null,8,["src"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["indicator-dots"])])),_:1})):f("v-if",!0),1===e.hobbyInfo.fileType?(s(),n(v,{key:1,class:"swiper-box"},{default:i((()=>[d(v,{class:"swiper-item"},{default:i((()=>[(s(),n(C,{options:{src:e.hobbyInfo.video_url,poster:e.hobbyInfo.url},key:e.hobbyInfo.id},null,8,["options"]))])),_:1})])),_:1})):f("v-if",!0),d(v,{class:"author-wraper"},{default:i((()=>[d(v,{class:"author"},{default:i((()=>[d(v,{class:"author-info"},{default:i((()=>[d(m,{class:"avatar",mode:"aspectFit",src:e.hobbyInfo.avatar||""},null,8,["src"]),d(T,null,{default:i((()=>[r(b(e.hobbyInfo.username||""),1)])),_:1})])),_:1}),d(v,{class:p({follow:!e.isFlollow,active:e.isFlollow}),onClick:e.following},{default:i((()=>[d(T,null,{default:i((()=>[r(b(e.followText),1)])),_:1})])),_:1},8,["class","onClick"])])),_:1})])),_:1}),d(v,{class:"content-wraper"},{default:i((()=>[d(v,{class:"content"},{default:i((()=>[d(v,{class:"title"},{default:i((()=>[r(b(e.hobbyInfo.title),1)])),_:1}),d(v,{class:"main"},{default:i((()=>[r(b(e.hobbyInfo.content),1)])),_:1}),d(v,{class:"publish-date"},{default:i((()=>[d(T,null,{default:i((()=>[r("发布于: ")])),_:1}),d(T,null,{default:i((()=>[r(b(e.publishDate),1)])),_:1})])),_:1})])),_:1})])),_:1}),d(v,{class:"comment-wraper"},{default:i((()=>[e.hobbyInfo.id?(s(),n(V,{hobbyInfo:e.hobbyInfo,key:e.hobbyInfo.id},null,8,["hobbyInfo"])):f("v-if",!0)])),_:1})])}],["__scopeId","data-v-8e67f4d8"]]);export{D as default};
//# sourceMappingURL=pages-index-HobbyDetailMountain.dfe83123.js.map
