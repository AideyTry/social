import{r as l,v as e,M as s,x as a,o,b as t,c as n,d as u,g as i,i as c,t as p,h as r,e as d,f as m,F as f,am as g,a1 as v,p as h,m as _,S as b,Q as I,V as x,Y as k,l as F,$ as y}from"./index.5db6d7a1.js";import{_ as S}from"./plugin-vue_export-helper.21dcd24c.js";var O=S({onLoad:function(l){console.log("options===",l),this.propsOptions=l},setup(){let t=l(null),n=e([""]),u=l(""),i=l(null),c=l(!0);s(u,(l=>{console.log("current======",l),"0"==i.value.title&&(c.value=!!l)}));let p=a((()=>u.value.length));const r=l=>{k({success:e=>{console.log("chooseImageRes===",e);const{tempFilePaths:s,tempFiles:a}=e;console.log("tempFilePaths[0]===",s[0]),((l,e)=>{console.log("index, filePath===",l,e),y({url:"https://mancao.social/prod/users/uploadFile",filePath:e,name:"file",formData:{user:"test"},success:e=>{console.log("uploadFileRes===",e);const{data:s}=e,a=JSON.parse(s);console.log("imgData=",a),n[l]=a.url,n.push(""),console.log("index===",l)}})})(l,s[0])}})};return o((()=>{t.value=i.value.title,"0"===t.value&&(c.value=!1)})),{title:t,inputInform:u,count:p,images:n,propsOptions:i,submitvisible:c,onUpload:(l,e)=>{console.log("item, index===",l,e),l||r(e)},onInput:l=>{console.log("einput= ",l),u.value=l.detail.value},onSubmit:()=>{console.log("title============",t.value),console.log("inputInform=====================",u.value);const l=JSON.parse(JSON.stringify(n));console.log("resultImages==========================",l.splice(l.length-1,1)),console.log("resultImages result=",l);const e={account:i.value.account,title:t.value,content:u.value,images:l};g(e).then((l=>{200===l.data.code&&v({title:l.data.msg,duration:2e3})}))}}}},[["render",function(l,e,s,a,o,g){const v=h,k=_,y=F,S=b,O=I,C=x;return t(),n(k,{class:"inform-detail-wrapper"},{default:u((()=>["0"!==a.title?(t(),n(k,{key:0,class:"title"},{default:u((()=>[i(v,null,{default:u((()=>[c(p(a.title),1)])),_:1})])),_:1})):r("v-if",!0),i(k,{class:"content"},{default:u((()=>[i(v,null,{default:u((()=>[c("上传截图、提高举报准确度")])),_:1})])),_:1}),i(S,{"scroll-x":"true",class:"photos"},{default:u((()=>[i(k,{class:"photos"},{default:u((()=>[(t(!0),d(f,null,m(a.images,((l,e)=>(t(),n(k,{class:"photo-wraper",onClick:s=>a.onUpload(l,e),key:e},{default:u((()=>[i(y,{mode:"aspectFill",src:l||"",class:"photo"},null,8,["src"]),!l&&a.images[e-1]||0===e&&!a.images[0]?(t(),d("span",{key:0,class:"iconfont photo-add"}," ")):r("v-if",!0)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),i(O,{placeholder:"0"===a.title?"请填写不少于10个字的举报理由（必填项）":"还有其他想说的...（选填）",value:a.inputInform,onInput:a.onInput,maxlength:100},null,8,["placeholder","value","onInput"]),i(k,null,{default:u((()=>[i(v,null,{default:u((()=>[c(p(a.count)+"/100",1)])),_:1})])),_:1}),i(k,{class:"submit-wraper"},{default:u((()=>[i(C,{onClick:a.onSubmit,type:"primary",disabled:!a.submitvisible},{default:u((()=>[c(" 提交 ")])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})}],["__scopeId","data-v-e7c48d90"]]);export{O as default};
//# sourceMappingURL=pages-message-InformDetail.a9055f1e.js.map
