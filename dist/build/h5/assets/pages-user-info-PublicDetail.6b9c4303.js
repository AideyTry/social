import{a6 as a,X as o,W as e,D as t,E as s,a1 as l,o as n,H as c,e as i,w as d,N as r,O as u,c as f,M as b,a4 as p,T as h,S as m,U as y,as as v,n as _,l as I}from"./vendor.574fb72a.js";import{b as g}from"./hobby.96bfee9c.js";import{d as j}from"./publish.c4b1d371.js";import{C}from"./Comment.cecb55f3.js";import{V as k}from"./VideoPlayer.19a6a0a0.js";import{f as x}from"./index.c6bf79e9.js";import{_ as w}from"./plugin-vue_export-helper.21dcd24c.js";import"./communication.d7b6c8a7.js";var V=w({components:{Comment:C,VideoPlayer:k},onLoad:function(a){console.log("options===",a)},onReady:function(){},setup(l){console.log("props=",l);const n=a(),c=o((()=>n.state.user.userInfo)).value,i=e({poster:"",src:""});let d=t([{content:"https://social-1308251497.cos.ap-guangzhou.myqcloud.com/images/4.jfif"}]);t(0),t("default");let r=t({});const u=()=>{p({url:"/pages/user/index"})};let f=t(null),b=t(["编辑","删除"]),h=t(0);return s((()=>{console.log("userInfo===",c),(a=>{const{id:o,hobby:e}=a;g({id:o,hobby:e}).then((a=>{console.log("data===",a),200===a.data.code&&(r.value=a.data.data,f.value=x(a.data.data.create_time),console.log("hobbyInfo.value===",r.value),console.log("data.data.data.url===",a.data.data.url),i.poster=a.data.data.url,i.src=a.data.data.video_url)}))})({id:l.id,hobby:l.hobby})})),{hobbyInfo:r,info:d,publishDate:f,options:i,goBack:u,onEdit:a=>{const{detail:{value:o}}=a;var e;console.log("value=",o),h.value=o,1===h.value&&(e=l,console.log("info==",e),_({title:"删除",content:"确定删除？",success:function(a){if(a.confirm){const a={hobby:l.hobby,id:l.id};j(a).then((a=>{200===a.data.code&&(I({title:"删除成功",duration:2e3}),u())}))}else a.cancel}}))},operations:b,activeOperationIndex:h}}},[["render",function(a,o,e,t,s,p){const _=h,I=m,g=y,j=v,C=l("VideoPlayer"),k=l("Comment");return n(),c("div",{class:"hobby-detail"},[i(_,{class:"author-wraper"},{default:d((()=>[i(_,{class:"author"},{default:d((()=>[i(_,{onClick:t.goBack},{default:d((()=>[r("返回")])),_:1},8,["onClick"]),i(_,{class:"author-info"},{default:d((()=>[i(I,{class:"avatar",mode:"aspectFit",src:t.hobbyInfo.avatar||""},null,8,["src"]),i(g,null,{default:d((()=>[r(u(t.hobbyInfo.username||""),1)])),_:1})])),_:1}),i(_,null,{default:d((()=>[i(j,{range:t.operations,value:t.activeOperationIndex,onChange:t.onEdit},{default:d((()=>[i(g,null,{default:d((()=>[r("...")])),_:1})])),_:1},8,["range","value","onChange"])])),_:1})])),_:1})])),_:1}),i(_,{class:"swiper-box"},{default:d((()=>[i(_,{class:"swiper-item"},{default:d((()=>[0===t.hobbyInfo.fileType?(n(),f(I,{key:0,src:t.hobbyInfo.url,class:"image"},null,8,["src"])):b("v-if",!0),1===t.hobbyInfo.fileType?(n(),f(C,{options:{src:t.hobbyInfo.video_url,poster:t.hobbyInfo.url},key:t.hobbyInfo.id},null,8,["options"])):b("v-if",!0)])),_:1})])),_:1}),i(_,{class:"content-wraper"},{default:d((()=>[i(_,{class:"content"},{default:d((()=>[i(_,{class:"title"},{default:d((()=>[r(u(t.hobbyInfo.title),1)])),_:1}),i(_,{class:"main"},{default:d((()=>[r(u(t.hobbyInfo.content),1)])),_:1}),i(_,{class:"publish-date"},{default:d((()=>[i(g,null,{default:d((()=>[r("发布于: ")])),_:1}),i(g,null,{default:d((()=>[r(u(t.publishDate),1)])),_:1})])),_:1})])),_:1})])),_:1}),i(_,{class:"comment-wraper"},{default:d((()=>[t.hobbyInfo.id?(n(),f(k,{hobbyInfo:t.hobbyInfo,key:t.hobbyInfo.id},null,8,["hobbyInfo"])):b("v-if",!0)])),_:1})])}],["__scopeId","data-v-35365e78"]]);export{V as default};
