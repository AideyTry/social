import{C as a,ab as e,D as l,o as s,c as t,w as o,L as n,e as u,G as i,H as r,K as c,M as d,N as f,J as m,P as p,Q as _,T as v,S as g,R as h,a0 as b,W as y,F as k,Y as C,ac as w}from"./vendor.9ff48645.js";import{a as I,o as x}from"./index.e16b3d60.js";import{f as $,h as j}from"./communication.1f16956f.js";import{g as D,a as F}from"./publish.c10287aa.js";import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";const N={name:"infoList"};var O=L(Object.assign(N,{props:{list:{type:Array,default:[]},activeIndex:{type:Number,default:0}},setup(b){const y=b;let k=a([]);return e((()=>y.list),(a=>{console.log("state=",a),k.value=a}),{deep:!0}),l((()=>{console.log("props=",y)})),(a,e)=>{const l=v,b=g,C=h;return s(),t(b,{class:"info-list"},{default:o((()=>[n(' <uni-list>\r\n      <uni-list-item\r\n        v-for="item in infoList"\r\n        :key="item.id"\r\n        :title="item.username"\r\n        :note="item.title"\r\n        :thumb="item.avatar"\r\n        thumb-size="lg"\r\n      ></uni-list-item>\r\n    </uni-list> '),u(b,{class:"ul"},{default:o((()=>[(s(!0),i(p,null,r(m(k),(e=>(s(),t(b,{class:"li",key:e.id,onClick:a=>(a=>{console.log("item=",a),0===y.activeIndex?_({url:`/pages/user/info/PublicDetail?id=${a.id}&hobby=${a.hobby}`}):_({url:`/pages/user/info/LikeDetail?id=${a.id}&hobby=${a.hobby}`})})(e)},{default:o((()=>[u(b,{class:"comment"},{default:o((()=>[(s(),i("svg",{class:"replay-icon","aria-hidden":"true"},[c("use",{"xlink:href":"#icon-pinglunhuifu"})])),u(b,null,{default:o((()=>[u(l,null,{default:o((()=>[d(f(e.comments||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),u(b,{class:"publish-info"},{default:o((()=>[u(b,{class:"title"},{default:o((()=>[d(f(e.title),1)])),_:2},1024),u(b,{class:"userinfo"},{default:o((()=>[u(C,{class:"avatar",mode:"aspectFit",src:e.avatar||""},null,8,["src"]),u(l,{class:"username"},{default:o((()=>[d(f(e.username),1)])),_:2},1024),u(l,{class:"update-time"},{default:o((()=>[d(f(a.$filters.commentTime(e.create_time||""))+" 更新",1)])),_:2},1024)])),_:2},1024)])),_:2},1024),u(b,{class:"img"},{default:o((()=>[u(C,{class:"img-url",mode:"aspectFit",src:e.url||""},null,8,["src"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})}}}),[["__scopeId","data-v-ddeb386a"]]);var J=L({setup(e){const i=b(),r=y((()=>i.state.user.userInfo)).value,c=()=>{new Promise(((a,e)=>{I(),a()})).then((()=>{location.reload()}))},p=()=>{_({url:"/pages/user/info/index"})};let L=a([]),N=a([]);const J=()=>{const a=[];for(let e of L.value)a.push(e.follow_id);_({url:`/pages/user/info/Follow?type=0&userids=${encodeURIComponent(JSON.stringify(a))}`})},P=()=>{const a=[];for(let e of N.value)a.push(e.user_id);_({url:`/pages/user/info/Follow?type=1&userids=${encodeURIComponent(JSON.stringify(a))}`})};let S=a(0),R=a([]);a([]);const A=a=>{S.value=a},M=()=>{x.logout().then((({data:a})=>{console.log("logout=",a)})).catch((a=>{console.log("logout err=",a)}))},T=()=>{x.getAllConversationList().then((a=>{console.log("res========",a);const e=JSON.parse(a.data);e.forEach((a=>{x.deleteConversation(a.conversationID).then((a=>{console.log("delete res=",a)})).catch((a=>{console.log("err=========",a)}))})),console.log("conversData=",e)})).catch((a=>{}))};return k((()=>{0===S.value?(R.value=[],D().then((a=>{console.log("data getPublish=",a),200===a.data.code&&(R.value=a.data.data)}))):(R.value=[],F().then((a=>{console.log("data likes=",a),200===a.data.code&&(R.value=a.data.data)})))}),S.value),l((()=>{$().then((a=>{console.log("getfollows =",a),200===a.data.code&&(L.value=a.data.follows)})),j().then((a=>{console.log("getfans =",a),200===a.data.code&&(N.value=a.data.fans)}))})),(a,e)=>{const l=h,i=v,_=g,b=w;return s(),t(_,{class:"userinfo-wraper"},{default:o((()=>[u(_,{class:"userinfo"},{default:o((()=>[u(_,{class:"avatar-warper",onClick:p},{default:o((()=>[u(l,{src:m(r).avatar?m(r).avatar:"/static/images/default_avatar.png",class:"avatar"},null,8,["src"]),m(r).avatar?n("v-if",!0):(s(),t(i,{key:0,class:"avatar-title"},{default:o((()=>[d("请上传图片")])),_:1}))])),_:1}),u(_,{class:"userinfo-detail"},{default:o((()=>[u(i,null,{default:o((()=>[d("用户名："+f(m(r).username),1)])),_:1}),u(_,{class:"motto"},{default:o((()=>[u(i,null,{default:o((()=>[d("签   名：")])),_:1}),u(i,null,{default:o((()=>[d(f(m(r).motto),1)])),_:1})])),_:1})])),_:1})])),_:1}),u(_,{class:"fans-wraper"},{default:o((()=>[u(_,{class:"follows",onClick:J},{default:o((()=>[u(i,null,{default:o((()=>[d("关注")])),_:1}),d(" "),u(i,null,{default:o((()=>[d(f(m(L).length),1)])),_:1})])),_:1}),u(_,{class:"fans",onClick:P},{default:o((()=>[u(i,null,{default:o((()=>[d("粉丝")])),_:1}),d(" "),u(i,null,{default:o((()=>[d(f(m(N).length),1)])),_:1})])),_:1})])),_:1}),u(_,{class:"publish-wraper"},{default:o((()=>[u(_,{class:"my-publishs",onClick:e[0]||(e[0]=a=>A(0))},{default:o((()=>[u(i,null,{default:o((()=>[d("我发布的")])),_:1}),u(_,{class:C({active:0===m(S)})},null,8,["class"])])),_:1}),u(_,{class:"my-likes",onClick:e[1]||(e[1]=a=>A(1))},{default:o((()=>[u(i,null,{default:o((()=>[d("我喜欢的")])),_:1}),u(_,{class:C({active:1===m(S)})},null,8,["class"])])),_:1})])),_:1}),u(_,null,{default:o((()=>[u(O,{list:m(R),activeIndex:m(S)},null,8,["list","activeIndex"])])),_:1}),u(b,{onClick:c,style:{"margin-top":"20rpx"}},{default:o((()=>[d("退出")])),_:1}),(s(),t(_,{key:0},{default:o((()=>[u(b,{onClick:M},{default:o((()=>[d("OpenIM logout")])),_:1}),u(b,{onClick:T},{default:o((()=>[d("Delete Conversicon")])),_:1})])),_:1}))])),_:1})}}},[["__scopeId","data-v-3e83fa6a"]]);export{J as default};
//# sourceMappingURL=pages-user-index.fa5f23e7.js.map
