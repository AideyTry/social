import{D as e,E as a,o as l,H as o,e as t,w as s,L as n,M as c,K as u,a6 as d,P as r,I as i,c as f,Z as m,T as b,S as _,R as h,a7 as p,a8 as v,W as y,a1 as w,Y as I,n as g}from"./vendor.3b43a146.js";import{b as x}from"./hobby.1fe4d6f3.js";import{a as j,b as F,d as C,c as k,e as T}from"./communication.208cd3af.js";import{_ as D}from"./plugin-vue_export-helper.21dcd24c.js";import{f as V}from"./index.20960bd1.js";const L={name:"comment"};var O=D({components:{Comment:D(Object.assign(L,{props:{hobbyInfo:{type:Object,default:{}}},setup(v){const y=v;let w=e(""),I=e(0),g=e([]);console.log("props=",y);const x=e=>{console.log("e=",e);const{detail:{value:a}}=e;let l={comment:a,detailUserId:y.hobbyInfo.user_id,hobbyId:y.hobbyInfo.hobby_4_id};j(l).then((e=>{200===e.statusCode&&(w.value="",C())}))},C=()=>{let e={hobbyId:y.hobbyInfo.hobby_4_id};F(e).then((e=>{console.log("data666666===",e),200===e.statusCode&&(g.value=e.data.data,I.value=e.data.data.length)}))};return a((()=>{C()})),(e,a)=>{const y=b,j=_,F=h,C=p;return l(),o("div",{class:"comment"},[t(j,{class:"total"},{default:s((()=>[t(y,null,{default:s((()=>[n("共")])),_:1}),t(y,null,{default:s((()=>[n(c(u(I)),1)])),_:1}),t(y,null,{default:s((()=>[n("条评论")])),_:1})])),_:1}),t(j,{class:"my-comment"},{default:s((()=>[t(F,{class:"avatar",mode:"aspectFit",src:v.hobbyInfo.avatar||""},null,8,["src"]),t(C,{modelValue:u(w),"onUpdate:modelValue":a[0]||(a[0]=e=>d(w)?w.value=e:w=e),type:"text",class:"comment-input",placeholder:"喜欢就给个评论支持一下呗~",onConfirm:x},null,8,["modelValue"])])),_:1}),(l(!0),o(r,null,i(u(g),(a=>(l(),f(j,{class:"other-comment",key:a.id},{default:s((()=>[t(j,null,{default:s((()=>[t(F,{class:"avatar",mode:"aspectFit",src:a.avatar||""},null,8,["src"])])),_:2},1024),t(j,{class:"comment-info"},{default:s((()=>[t(j,{class:"userinfo"},{default:s((()=>[t(y,null,{default:s((()=>[n(c(a.username),1)])),_:2},1024),a.isAuthor?(l(),f(y,{key:0,class:"is-author"},{default:s((()=>[n("作者")])),_:1})):m("v-if",!0)])),_:2},1024),t(j,{class:"comment-content"},{default:s((()=>[t(y,null,{default:s((()=>[n(c(a.comment),1)])),_:2},1024)])),_:2},1024),t(j,null,{default:s((()=>[t(y,null,{default:s((()=>[n(c(e.$filters.commentTime(a.create_time)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])}}}),[["__scopeId","data-v-6c8a20ea"]])},onLoad:function(e){console.log("options===",e)},setup(l){console.log("props=",l);const o=v(),t=y((()=>o.state.user.userInfo)).value;let s=e([{content:"https://social-1308251497.cos.ap-guangzhou.myqcloud.com/images/4.jfif"}]);e(0),e("default");let n=e({});let c=e(!1),u=e("关注");let d=e(null);const r=()=>{let e={followId:n.value.user_id};console.log("params===",e),T(e).then((e=>{console.log("data1===",e),200===e.data.code&&(c.value=e.data.isFollow,e.data.isFollow?u.value="已关注":u.value="关注")}))};return a((()=>{console.log("userInfo===",t),(e=>{const{id:a,hobby:l}=e;x({id:a,hobby:l}).then((e=>{console.log("data===",e),200===e.data.code&&(n.value=e.data.data,d.value=V(e.data.data.create_time),r())}))})({id:l.id,hobby:l.hobby})})),{followText:u,isFlollow:c,following:()=>{if(c.value)return void g({content:"确认不再关注？",success:function(e){if(e.confirm){let e={followId:n.value.user_id};C(e).then((e=>{200===e.data.code&&(u.value="关注",c.value=!1)}))}else e.cancel&&console.log("用户点击取消")}});console.log("userInfo===",t);let e={followId:n.value.user_id};k(e).then((e=>{console.log("data===",e),200===e.data.code&&(u.value="已关注",c.value=!0)}))},hobbyInfo:n,info:s,publishDate:d}}},[["render",function(e,a,u,d,r,i){const p=h,v=_,y=b,g=w("Comment");return l(),o("div",{class:"hobby-detail"},[m(' <uni-swiper-dot\r\n      :info="info"\r\n      :current="current"\r\n      field="content"\r\n      :mode="mode"\r\n    >\r\n      <swiper class="swiper-box" @change="change">\r\n        <swiper-item v-for="(item, index) in info" :key="index">\r\n          <view class="swiper-item">\r\n            <image :src="item.content" class="image"></image>\r\n          </view>\r\n        </swiper-item>\r\n      </swiper>\r\n    </uni-swiper-dot> '),t(v,{class:"swiper-box"},{default:s((()=>[t(v,{class:"swiper-item"},{default:s((()=>[t(p,{src:d.hobbyInfo.url,class:"image"},null,8,["src"])])),_:1})])),_:1}),t(v,{class:"author-wraper"},{default:s((()=>[t(v,{class:"author"},{default:s((()=>[t(v,{class:"author-info"},{default:s((()=>[t(p,{class:"avatar",mode:"aspectFit",src:d.hobbyInfo.avatar||""},null,8,["src"]),t(y,null,{default:s((()=>[n(c(d.hobbyInfo.username||""),1)])),_:1})])),_:1}),t(v,{class:I({follow:!d.isFlollow,active:d.isFlollow}),onClick:d.following},{default:s((()=>[t(y,null,{default:s((()=>[n(c(d.followText),1)])),_:1})])),_:1},8,["class","onClick"])])),_:1})])),_:1}),t(v,{class:"content-wraper"},{default:s((()=>[t(v,{class:"content"},{default:s((()=>[t(v,{class:"title"},{default:s((()=>[n(c(d.hobbyInfo.title),1)])),_:1}),t(v,{class:"main"},{default:s((()=>[n(c(d.hobbyInfo.content),1)])),_:1}),t(v,{class:"publish-date"},{default:s((()=>[t(y,null,{default:s((()=>[n("发布于: ")])),_:1}),t(y,null,{default:s((()=>[n(c(d.publishDate),1)])),_:1})])),_:1})])),_:1})])),_:1}),t(v,{class:"comment-wraper"},{default:s((()=>[d.hobbyInfo.hobby_4_id?(l(),f(g,{key:0,hobbyInfo:d.hobbyInfo},null,8,["hobbyInfo"])):m("v-if",!0)])),_:1})])}],["__scopeId","data-v-15e97685"]]);export{O as default};
