import{r as a,o as e,c as l,d as s,e as o,f as t,g as n,h as i,F as u,O as d,P as c,Q as r,s as f,x as v,i as p,t as _,n as m,a8 as g,y as w,v as h}from"./index.caabeb3a.js";import{d as I,s as F,f as x,h as C,g as k}from"./communication.fd523598.js";import{_ as U}from"./plugin-vue_export-helper.21dcd24c.js";var y=U({name:"follow",setup(l){let s=a([]),o=a(!1),t=a("关注");const n=a=>{let e={followId:a.user_id};console.log("params===",e),k(e).then((a=>{console.log("data1===",a),200===a.data.code&&(o.value=a.data.isFollow,a.data.isFollow?t.value="已关注":t.value="关注")}))},i=a=>{const e={userids:a};0===parseInt(l.type)?(r({title:"关注"}),x(e).then((a=>{200===a.data.code&&(s.value=a.data.followsInfo,s.value=s.value.filter((a=>a)),console.log("infoList.value====",s.value),s.value.forEach((a=>{n(a)})))}))):1===parseInt(l.type)&&(r({title:"粉丝"}),C(e).then((a=>{console.log("getFansInfo===",a),200===a.data.code&&(s.value=a.data.fansInfo,s.value=s.value.filter((a=>a)),s.value.forEach((a=>{n(a)})))})))};return e((()=>{i(JSON.parse(decodeURIComponent(l.userids)))})),{infoList:s,followText:t,isFlollow:o,following:a=>{if(o.value)return void d({content:"确认不再关注？",success:function(e){if(e.confirm){let e={followId:a.user_id};I(e).then((a=>{200===a.data.code&&(t.value="关注",o.value=!1,i(JSON.parse(decodeURIComponent(l.userids))))}))}else e.cancel&&console.log("用户点击取消")}});let e={followId:a.user_id};F(e).then((a=>{console.log("data===",a),200===a.data.code?(t.value="已关注",o.value=!0):400===a.data.code&&c({title:a.data.msg,icon:"none",duration:2e3})}))},goUserDetail:a=>{console.log("info======",a),f({url:`/pages/user/info/User?id=${a.user_id}`})}}}},[["render",function(a,e,d,c,r,f){const I=w,F=v,x=h;return l(),s(F,{class:"info-list"},{default:o((()=>[t(F,{class:"ul"},{default:o((()=>[(l(!0),n(u,null,i(c.infoList,(a=>(l(),s(F,{class:"li",key:a.id,onClick:e=>c.goUserDetail(a)},{default:o((()=>[t(F,{class:"userinfo-wraper"},{default:o((()=>[t(F,{class:"avatar-wraper"},{default:o((()=>[t(I,{class:"avatar",mode:"aspectFit",src:a.avatar||""},null,8,["src"])])),_:2},1024),t(F,{class:"publish-info"},{default:o((()=>[t(F,{class:"title"},{default:o((()=>[p(_(a.title),1)])),_:2},1024),t(F,{class:"userinfo"},{default:o((()=>[t(x,{class:"username"},{default:o((()=>[p(_(a.username),1)])),_:2},1024)])),_:2},1024),t(F,{class:"userinfo"},{default:o((()=>[t(x,{class:"username"},{default:o((()=>[p(_(a.motto),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),t(F,{class:m({follow:!c.isFlollow,active:c.isFlollow}),onClick:g((e=>c.following(a)),["stop"])},{default:o((()=>[t(x,null,{default:o((()=>[p(_(c.followText),1)])),_:1})])),_:2},1032,["class","onClick"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})}],["__scopeId","data-v-c54c6064"]]);export{y as default};
//# sourceMappingURL=pages-user-info-Follow.852ad5a5.js.map
