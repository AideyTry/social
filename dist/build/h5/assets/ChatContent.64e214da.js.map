{"version":3,"file":"ChatContent.64e214da.js","sources":["../../../../src/pages/message/MsgItem.vue","../../../../src/pages/message/ChatContent.vue"],"sourcesContent":["<!--\r\n * @Author: Aiden(戴林波)\r\n * @Date: 2022-05-07 23:18:37\r\n * @LastEditTime: 2022-05-11 16:27:26\r\n * @LastEditors: Aiden(戴林波)\r\n * @Description: \r\n * @Email: jason_dlb@sina.cn\r\n-->\r\n<template>\r\n  <view :class=\"{ 'chat_bg_msg': true, 'chat_bg_omsg': myMsg }\">\r\n    <image\r\n      :src=\"\r\n        msg.senderFaceUrl && msg.senderFaceUrl.includes('https://')\r\n          ? msg.senderFaceUrl\r\n          : defaultAvatar\r\n      \"\r\n      class=\"chat_bg_msg_icon\"\r\n    />\r\n    <view class=\"content-wraper\" :class=\"{'chat_bg_msg_content_text': msg.sendID === selfID}\">\r\n      <text>{{ msg.content }}</text>\r\n      <text>{{ $filters.formatMsgDate(msg.sendTime) }}</text>\r\n    </view>\r\n    <view :style=\"{color: msg.isRead ? '#999':'#428BE5'}\" v-if=\"msg.sendID === selfID\">{{msg.isRead ? '已读' : '未读'}}</view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, computed, ref } from \"vue\";\r\nexport default {\r\n  props: [\"msg\", \"selfID\"],\r\n  setup(props) {\r\n    const defaultAvatar = \"/static/images/default_avatar.png\";\r\n    const myMsg = computed(() => props.selfID === props.msg.sendID).value;\r\n    console.log('mySmg', myMsg)\r\n    console.log(\"props===\", props);\r\n    return {\r\n      defaultAvatar,\r\n      myMsg\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.chat_bg_msg {\r\n  display: flex;\r\n  padding: 12px 24px;\r\n}\r\n.chat_bg_omsg {\r\n  flex-direction: row-reverse;\r\n}\r\n.chat_bg_msg_icon {\r\n  width: 84rpx;\r\n  height: 84rpx;\r\n}\r\n.content-wraper {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 0 12rpx;\r\n  background-color: #f2f2f2;\r\n  text:first-child {\r\n    align-self: flex-start;\r\n    color: #363636;\r\n  }\r\n  text:last-child {\r\n    align-self: flex-end;\r\n    color: #999;\r\n    font-size: 12rpx;\r\n  }\r\n}\r\n.chat_bg_msg_content_text{\r\n    background-color: #E7F4FD;\r\n}\r\n</style>\r\n","<!--\r\n * @Author: Aiden(戴林波)\r\n * @Date: 2021-12-17 17:50:38\r\n * @LastEditTime: 2022-05-14 01:53:07\r\n * @LastEditors: Aiden(戴林波)\r\n * @Description: \r\n * @Email: jason_dlb@sina.cn\r\n-->\r\n<template>\r\n  <view>\r\n    <!-- <scroll-view scroll-y class=\"con\"></scroll-view> -->\r\n    <view class=\"con\">\r\n        <MsgItem v-for=\"(item) in msgList\" :key=\"item.clientMsgID + currentDate\" :msg=\"item\" :selfID=\"userInfo.phone\"></MsgItem>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, computed, ref } from \"vue\";\r\nimport MsgItem from './MsgItem.vue'\r\nimport { useStore } from \"vuex\";\r\nexport default {\r\n  props: [\"msgList\"],\r\n  components: {\r\n      MsgItem\r\n  },\r\n  onShow: function(){\r\n    this.currentDate = new Date() + Math.random()\r\n    console.log('this.currentDate===============================', this.currentDate)\r\n    console.log('msgList============', this.msgList)\r\n  },\r\n  setup() {\r\n    const store = useStore();\r\n    const userInfo = computed(() => store.state.user.userInfo).value;\r\n\r\n    let currentDate = ref('')\r\n\r\n    onMounted(() => {\r\n    });\r\n    return {\r\n        userInfo,\r\n        currentDate\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.con{\r\n    width: 100%;\r\n    height: calc(100vh - 200rpx);\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n    display: flex;\r\n    flex-direction: column-reverse;\r\n    // >>> .uni-scroll-view-content{\r\n    // width: 100%;\r\n    // // height: 716px;\r\n    // overflow-x: hidden;\r\n    // overflow-y: auto;\r\n    // display: flex;\r\n    // flex-direction: column-reverse;\r\n    // }\r\n    // &_nomore{\r\n    //     font-size: 12px;\r\n    //     color: #777;\r\n    //     text-align: center;\r\n    //     padding: 8px;\r\n    // }\r\n    // /*滚动条 start*/\r\n    // &::-webkit-scrollbar {\r\n    //     width: 7px;\r\n    //     height: 4px;\r\n    //     background-color: #f5f5f5;\r\n    //   }\r\n    //   /*定义滚动条轨道 内阴影+圆角*/\r\n    //   &::-webkit-scrollbar-track {\r\n    //     box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n    //     background: #fff;\r\n    //   }\r\n    //   /*定义滑块 内阴影+圆角*/\r\n    //   &::-webkit-scrollbar-thumb {\r\n    //     border-radius: 3px;\r\n    //     box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n    //     background-color: rgba(245, 238, 238, 0.7);\r\n    //   }\r\n    //   &::-webkit-scrollbar-thumb:hover {\r\n    //     border-radius: 3px;\r\n    //     box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n    //     background-color: rgba(245, 238, 238, 1);\r\n    //   }\r\n}\r\n</style>\r\n"],"names":["props","setup","myMsg","computed","selfID","msg","sendID","value","log","defaultAvatar","_createBlock","_component_v_uni_view","class","$setup","_createVNode","_component_v_uni_image","src","$props","senderFaceUrl","includes","_component_v_uni_text","content","_ctx","formatMsgDate","sendTime","style","isRead","components","MsgItem","onShow","currentDate","Date","Math","random","this","msgList","store","useStore","userInfo","state","user","ref","_createCommentVNode","_createElementBlock","_Fragment","item","_component_MsgItem","key","clientMsgID","phone"],"mappings":"iPA6BEA,MAAO,CAAC,MAAO,UACfC,MAAMD,SAEEE,EAAQC,GAAS,IAAMH,EAAMI,SAAWJ,EAAMK,IAAIC,SAAQC,qBACxDC,IAAI,QAASN,WACbM,IAAI,WAAYR,GACjB,CACLS,cALoB,oCAMpBP,MAAAA,mEA5BJQ,EAcOC,GAdAC,qCAA8CC,uBACnD,KAAAC,EAOEC,GANCC,IAAeC,MAAIC,eAAiBD,MAAIC,cAAcC,qBAAkCF,MAAIC,cAA2BL,gBAKxHD,MAAM,oCAERE,EAGOH,GAHDC,SAAM,2CAAsDK,MAAIX,SAAWW,yBAC/E,KAAAH,EAA8BM,mBAAxB,SAAGH,MAAII,qBACbP,EAAuDM,mBAAjD,SAAGE,WAASC,cAAcN,MAAIO,4CAEsBP,MAAIX,SAAWW,cAA3EP,EAAsHC,SAA/Gc,eAAeR,MAAIS,uCAAyD,SAAET,MAAIS,0HCA3F1B,MAAO,CAAC,WACR2B,WAAY,CACRC,QAAAA,GAEJC,OAAQ,gBACDC,YAAc,IAAIC,KAASC,KAAKC,iBAC7BzB,IAAI,kDAAmD0B,KAAKJ,qBAC5DtB,IAAI,sBAAuB0B,KAAKC,UAE1ClC,cACQmC,EAAQC,IACRC,EAAWnC,GAAS,IAAMiC,EAAMG,MAAMC,KAAKF,WAAU/B,UAEvDuB,EAAcW,EAAI,cAEZ,SAEH,CACHH,SAAAA,EACAR,YAAAA,0EAhCNpB,EAKOC,mBAJL,KAAA+B,wDACA5B,EAEOH,GAFDC,MAAM,mBACC,YAAT+B,EAAwHC,SAA9F3B,WAAT4B,QAAjBnC,EAAwHoC,GAApFC,IAAKF,EAAKG,YAAcnC,cAAcR,IAAKwC,EAAOzC,OAAQS,WAASoC"}