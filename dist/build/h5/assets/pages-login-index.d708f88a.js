import{an as e,o as t,G as o,a3 as s,M as n,N as l,Y as a,I as i,c as d,w as c,T as u,C as r,V as f,X as m,e as h,L as p,K as g,O as _,J as b,v as w,S as v,ai as y,aj as k,ae as C,ac as S,ao as x,l as I,a1 as L,R as V,a9 as M,am as T}from"./vendor.9ff48645.js";import{_ as U}from"./plugin-vue_export-helper.21dcd24c.js";import{r as A}from"./uni-app.es.2e6b1087.js";import{e as R,s as j,c as N,d as E}from"./index.e16b3d60.js";import{_ as $,a as z}from"./uni-forms.51b5b5aa.js";var G=U({name:"uniLink",props:{href:{type:String,default:""},text:{type:String,default:""},download:{type:String,default:""},showUnderLine:{type:[Boolean,String],default:!0},copyTips:{type:String,default:"已自动复制网址，请在手机浏览器里粘贴该网址"},color:{type:String,default:"#999999"},fontSize:{type:[Number,String],default:14}},computed:{isShowA(){return this._isH5=!0,!(!this.isMail()&&!this.isTel()||!0!==this._isH5)}},created(){this._isH5=null},methods:{isMail(){return this.href.startsWith("mailto:")},isTel(){return this.href.startsWith("tel:")},openURL(){window.open(this.href)},makePhoneCall(t){e({phoneNumber:t})}}},[["render",function(e,r,f,m,h,p){const g=u;return p.isShowA?(t(),o("a",{key:0,class:a(["uni-link",{"uni-link--withline":!0===f.showUnderLine||"true"===f.showUnderLine}]),href:f.href,style:i({color:f.color,fontSize:f.fontSize+"px"}),download:f.download},[s(e.$slots,"default",{},(()=>[n(l(f.text),1)]),!0)],14,["href","download"])):(t(),d(g,{key:1,class:a(["uni-link",{"uni-link--withline":!0===f.showUnderLine||"true"===f.showUnderLine}]),style:i({color:f.color,fontSize:f.fontSize+"px"}),onClick:p.openURL},{default:c((()=>[s(e.$slots,"default",{},(()=>[n(l(f.text),1)]),!0)])),_:3},8,["class","style","onClick"]))}],["__scopeId","data-v-11527474"]]);const B={name:"showModal"};var H=U({components:{ShowModal:U(Object.assign(B,{props:{title:{type:String,default:""},content:{type:String,default:""}},emits:["close"],setup(e,{emit:s}){const a=e,i=r(null);let x=f({username:"Aiden"});const I=e=>{const{detail:{value:t}}=e;i.value.setValue("username",t)},L=()=>{s("close")},V=()=>{const e=this;i.value.validate().then((t=>{const o={username:t.username,password:"111111"};console.log("params=======",o),R(o).then((t=>{console.log("res========",t);const{code:o,token:n}=t.data;200===o&&(s("close"),console.log("成功"),j(n),e.$store.dispatch("user/GetUserInfo"),w({url:"/pages/index/index"}))}))})).catch((e=>{console.log("表单错误信息：",e)}))};return(e,s)=>{const r=v,f=u,w=y,M=k,T=C,U=A(m("uni-forms-item"),$),R=A(m("uni-forms"),z),j=S;return t(),d(r,{class:"_showModal"},{default:c((()=>[h(r,{class:"_shade"}),h(r,{class:"_modalBox"},{default:c((()=>[h(r,{class:"_modal"},{default:c((()=>[p(' <slot name="title"> '),h(r,{class:"title-wraper"},{default:c((()=>[h(r,{class:"title"},{default:c((()=>[h(f,null,{default:c((()=>[n(l(a.title),1)])),_:1})])),_:1}),(t(),o("svg",{class:"close-icon","aria-hidden":"true",onClick:_(L,["stop"])},[g("use",{"xlink:href":"#icon-guanbi1"})],8,["onClick"]))])),_:1}),p(" </slot> "),h(r,{class:"content-hint"},{default:c((()=>[n(l(a.content),1)])),_:1}),h(R,{ref_key:"form",ref:i,modelValue:b(x)},{default:c((()=>[p(' <slot name="content"> '),h(U,{name:"username"},{default:c((()=>[h(T,{name:"radio",onChange:I},{default:c((()=>[h(M,null,{default:c((()=>[h(w,{value:"Aiden",checked:"Aiden"===b(x).username},null,8,["checked"]),h(f,null,{default:c((()=>[n("Aiden")])),_:1})])),_:1}),h(M,null,{default:c((()=>[h(w,{value:"Lucy"}),h(f,null,{default:c((()=>[n("Lucy")])),_:1})])),_:1})])),_:1})])),_:1}),p(" </slot> ")])),_:1},8,["modelValue"]),p(' <slot name="btn"> '),h(r,{class:"btnbox"},{default:c((()=>[h(j,{onClick:V,type:"primary",class:"btn"},{default:c((()=>[n("确定")])),_:1})])),_:1}),p(" </slot> ")])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-a1f381d4"]])},data:()=>({codeVisible:!0,loginVisible:!0,demoVisible:!1,sendCaptchaEnabled:!0,codeMessage:"获取验证码",counterTimer:60,phoneNumber:null}),methods:{onInput:function(e){console.log("input e=",e),/^1[3456789]\d{9}$/.test(e.detail.value)?(this.codeVisible=!1,this.phoneNumber=e.detail.value):this.codeVisible=!0},onInputCode:function(e){console.log("code=",e),/^\d{6}$/.test(e.detail.value)?this.loginVisible=!1:this.loginVisible=!0},sendCaptcha:function(e){if(console.log("button e=",e),!this.sendCaptchaEnabled)return;this.sendCaptchaEnabled=!1;const t={phone:this.phoneNumber};console.log("params===",t),N(t).then((e=>{console.log("res=",e)})),this.codeMessage="重新发送";const o=setInterval((()=>{if(this.counterTimer<=0)return this.counterTimer=60,this.sendCaptchaEnabled=!0,clearInterval(o),void(this.codeMessage="获取验证码");this.counterTimer--}),1e3)},formSubmit:function(e){console.log("e=",e),console.log("form发生了submit事件，携带数据为："+JSON.stringify(e.detail.value));const t=e.detail.value,o=this;console.log("window.navigator=",window.navigator.userAgent),window.navigator.__defineGetter__("userAgent",(()=>"myBroser")),setTimeout((()=>{console.log("window.navigator1=",window.navigator.userAgent)}),200),E(t).then((e=>{console.log("res========",e);const{code:t,token:s}=e.data;200===t&&(console.log("成功"),j(s),o.$store.dispatch("user/GetUserInfo"),w({url:"/pages/index/index"}))}))},miniProLogin:function(e){console.log("e===",e),x({provider:"weixin",success:function(e){console.log("loginRes=",e.authResult)}})},wechatLogin:function(){I({title:"待上线",duration:2e3})},qqLogin:function(){I({title:"待上线",duration:2e3})},weiboLogin:function(){I({title:"待上线",duration:2e3})},getInfo:function(e){console.log("登录e=",e),x({provider:"weixin",success:function(e){console.log("loginRes====",e);const{code:t}=e;loginWechat({code:t}).then("res===",res)}})},openDemo:function(){this.demoVisible=!0},onClose:function(){this.demoVisible=!1}}},[["render",function(e,o,s,a,i,r){const f=V,g=u,_=v,b=M,w=S,y=T,k=L("show-modal"),C=L("vuew"),x=A(m("uni-link"),G);return t(),d(_,{class:"login-wraper"},{default:c((()=>[h(_,{class:"image-wraper"},{default:c((()=>[p(' <image\r\n        style="width: 100%; height: 100%"\r\n        src="../../static/images/login-bg.gif"\r\n        mode=""\r\n      ></image> '),h(f,{class:"image",src:"/assets/logo.8ed403c9.png"}),h(g,{class:"logo-title"},{default:c((()=>[n("蔓草兴趣")])),_:1})])),_:1}),h(_,{class:"login"},{default:c((()=>[h(y,{onSubmit:r.formSubmit,onReset:e.formReset,class:"login-in"},{default:c((()=>[h(_,{class:"row-flex uni-form-item uni-column"},{default:c((()=>[h(g,{class:"title"},{default:c((()=>[n("手机号：")])),_:1}),h(b,{class:"uni-input",name:"phone",placeholder:"请输入手机号",onInput:r.onInput},null,8,["onInput"])])),_:1}),h(_,{class:"row-flex uni-form-item uni-column"},{default:c((()=>[h(g,{class:"title"},{default:c((()=>[n("验证码：")])),_:1}),h(b,{class:"uni-input",name:"code",placeholder:"请输入验证码",onInput:r.onInputCode},null,8,["onInput"]),h(w,{class:"code",disabled:!i.sendCaptchaEnabled||i.codeVisible,onClick:r.sendCaptcha},{default:c((()=>[n(l(i.codeMessage),1),i.sendCaptchaEnabled?p("v-if",!0):(t(),d(g,{key:0},{default:c((()=>[n("("+l(i.counterTimer)+"s)",1)])),_:1}))])),_:1},8,["disabled","onClick"])])),_:1}),h(_,{class:"uni-btn-v"},{default:c((()=>[h(w,{"form-type":"submit",type:"primary",class:"btn-block",disabled:i.loginVisible},{default:c((()=>[n(" 登录 ")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["onSubmit","onReset"]),i.demoVisible?(t(),d(k,{key:0,title:"请选择账号",content:"请任意选择一个账号登录",onClose:r.onClose},null,8,["onClose"])):p("v-if",!0),h(C,{class:"demo"},{default:c((()=>[h(w,{class:"demo-title",onClick:r.openDemo},{default:c((()=>[n("点击可使用演示账号登录")])),_:1},8,["onClick"])])),_:1})])),_:1}),h(_,{class:"gov-wraper"},{default:c((()=>[h(x,{class:"gov",showUnderLine:!1,href:"https://beian.miit.gov.cn/",text:"粤ICP备2021179573号"})])),_:1})])),_:1})}],["__scopeId","data-v-7a375118"]]);export{H as default};
//# sourceMappingURL=pages-login-index.d708f88a.js.map
