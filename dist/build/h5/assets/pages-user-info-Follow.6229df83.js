import{r as a,o as l,b as e,c as o,d as s,g as t,e as n,f as u,F as i,a2 as d,a1 as c,ag as r,P as f,m as p,i as v,t as _,z as m,j as g,l as w,p as I}from"./index.5db6d7a1.js";import{d as h,c as F,i as C,j,e as k}from"./communication.2a2ffb84.js";import{_ as x}from"./plugin-vue_export-helper.21dcd24c.js";var U=x({name:"follow",onLoad:function(a){console.log("options===",a),this.propsOptions=a},setup(e){let o=a([]),s=a(null),t=a(!1),n=a("关注"),u=a("");const i=a=>{let l={followId:a.user_id};console.log("params===",l),k(l).then((a=>{console.log("data1===",a),200===a.data.code&&(t.value=a.data.isFollow,a.data.isFollow?n.value="已关注":n.value="关注")}))},p=a=>{const l={userids:a};0===parseInt(s.value.type)?(r({title:"关注"}),u.value="关注",C(l).then((a=>{200===a.data.code&&(o.value=a.data.followsInfo,o.value=o.value.filter((a=>a)),console.log("infoList.value====",o.value),o.value.forEach((a=>{i(a)})))}))):1===parseInt(s.value.type)&&(r({title:"粉丝"}),u.value="粉丝",j(l).then((a=>{console.log("getFansInfo===",a),200===a.data.code&&(o.value=a.data.fansInfo,o.value=o.value.filter((a=>a)),o.value.forEach((a=>{i(a)})))})))};return l((()=>{console.log("follow props=====================================================",s),p(JSON.parse(decodeURIComponent(s.value.userids)))})),{propsOptions:s,infoList:o,followText:n,isFlollow:t,following:a=>{if(t.value)return void d({content:"确认不再关注？",success:function(l){if(l.confirm){let l={followId:a.user_id};h(l).then((a=>{200===a.data.code&&(n.value="关注",t.value=!1,p(JSON.parse(decodeURIComponent(s.value.userids))))}))}else l.cancel&&console.log("用户点击取消")}});let l={followId:a.user_id};F(l).then((a=>{console.log("data===",a),200===a.data.code?(n.value="已关注",t.value=!0):400===a.data.code&&c({title:a.data.msg,icon:"none",duration:2e3})}))},goUserDetail:a=>{console.log("info======",a),f({url:`/pages/user/info/User?id=${a.user_id}&title=${u.value}`})}}}},[["render",function(a,l,d,c,r,f){const h=w,F=p,C=I;return e(),o(F,{class:"info-list"},{default:s((()=>[t(F,{class:"ul"},{default:s((()=>[(e(!0),n(i,null,u(c.infoList,(a=>(e(),o(F,{class:"li",key:a.id,onClick:l=>c.goUserDetail(a)},{default:s((()=>[t(F,{class:"userinfo-wraper"},{default:s((()=>[t(F,{class:"avatar-wraper"},{default:s((()=>[t(h,{class:"avatar",mode:"aspectFit",src:a.avatar||""},null,8,["src"])])),_:2},1024),t(F,{class:"publish-info"},{default:s((()=>[t(F,{class:"title"},{default:s((()=>[v(_(a.title),1)])),_:2},1024),t(F,{class:"userinfo"},{default:s((()=>[t(C,{class:"username"},{default:s((()=>[v(_(a.username),1)])),_:2},1024)])),_:2},1024),t(F,{class:"userinfo"},{default:s((()=>[t(C,{class:"username"},{default:s((()=>[v(_(a.motto),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),t(F,{class:m({follow:!c.isFlollow,active:c.isFlollow}),onClick:g((l=>c.following(a)),["stop"])},{default:s((()=>[t(C,null,{default:s((()=>[v(_(c.followText),1)])),_:1})])),_:2},1032,["class","onClick"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})}],["__scopeId","data-v-f586a2c8"]]);export{U as default};
//# sourceMappingURL=pages-user-info-Follow.6229df83.js.map
