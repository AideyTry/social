import{r as a,M as e,o as l,b as s,c as t,d as n,h as u,g as i,e as o,f as r,N as c,i as d,t as f,u as p,F as m,p as _,m as v,l as g,x as h,w as b,z as y,C as k,D as w,E as x,O as C,G as I,P as F}from"./index.5db6d7a1.js";import{a as $,b as j}from"./communication.2a2ffb84.js";import{g as D,a as O}from"./publish.96d4d4e3.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";const P={name:"infoList"};var S=N(Object.assign(P,{props:{list:{type:Array,default:[]},activeIndex:{type:Number,default:0}},setup(h){const b=h;let y=a([]);return e((()=>b.list),(a=>{console.log("state=",a),y.value=a}),{deep:!0}),l((()=>{console.log("props=",b)})),(a,e)=>{const l=_,h=v,k=g;return s(),t(h,{class:"info-list"},{default:n((()=>[u(' <uni-list>\r\n      <uni-list-item\r\n        v-for="item in infoList"\r\n        :key="item.id"\r\n        :title="item.username"\r\n        :note="item.title"\r\n        :thumb="item.avatar"\r\n        thumb-size="lg"\r\n      ></uni-list-item>\r\n    </uni-list> '),i(h,{class:"ul"},{default:n((()=>[(s(!0),o(m,null,r(p(y),(e=>(s(),t(h,{class:"li",key:e.id,onClick:a=>(a=>{console.log("item=",a),0===b.activeIndex?uni.navigateTo({url:`/pages/user/info/PublicDetail?id=${a.id}&hobby=${a.hobby}`}):uni.navigateTo({url:`/pages/user/info/LikeDetail?id=${a.id}&hobby=${a.hobby}`})})(e)},{default:n((()=>[i(h,{class:"comment"},{default:n((()=>[u(' <svg class="replay-icon" aria-hidden="true">\r\n            <use xlink:href="#icon-pinglunhuifu"></use>\r\n          </svg> '),c("span",{class:"iconfont replay-icon"},""),i(h,null,{default:n((()=>[i(l,null,{default:n((()=>[d(f(e.comments||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(h,{class:"publish-info"},{default:n((()=>[i(h,{class:"title"},{default:n((()=>[d(f(e.title),1)])),_:2},1024),i(h,{class:"userinfo"},{default:n((()=>[i(k,{class:"avatar",mode:"aspectFit",src:e.avatar||""},null,8,["src"]),i(l,{class:"username"},{default:n((()=>[d(f(e.username),1)])),_:2},1024),i(l,{class:"update-time"},{default:n((()=>[d(f(a.$filters.commentTime(e.create_time||""))+" 更新",1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(h,{class:"img"},{default:n((()=>[i(k,{class:"img-url",mode:"aspectFit",src:e.url||""},null,8,["src"])])),_:2},1024)])),_:2},1032,["onClick"])))),128)),p(y).length<=0?(s(),t(h,{key:0,class:"li empty"},{default:n((()=>[d("暂无数据")])),_:1})):u("v-if",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-f301d8ec"]]);const L={onShow:function(){k()>0?w({index:2,text:"···"}):x({index:2})},onPullDownRefresh(){this.getFollowsData(),this.getFansData(),C()}};var R=N(Object.assign(L,{setup(e){const o=I(),r=h((()=>o.state.user.userInfo)).value,m=()=>{F({url:"/pages/user/setting/Setting"})},k=()=>{F({url:"/pages/user/info/index"})};let w=a([]),x=a([]);const C=()=>{const a=[];for(let e of w.value)a.push(e.follow_id);F({url:`/pages/user/info/Follow?type=0&userids=${encodeURIComponent(JSON.stringify(a))}`})},N=()=>{const a=[];for(let e of x.value)a.push(e.user_id);F({url:`/pages/user/info/Follow?type=1&userids=${encodeURIComponent(JSON.stringify(a))}`})};let P=a(0),L=a([]);a([]);const R=a=>{P.value=a};return b((()=>{0===P.value?(L.value=[],D().then((a=>{console.log("data getPublish=",a),200===a.data.code&&(L.value=a.data.data)}))):(L.value=[],O().then((a=>{console.log("data likes=",a),200===a.data.code&&(L.value=a.data.data)})))}),P.value),l((()=>{$().then((a=>{console.log("getfollows =",a),200===a.data.code&&(w.value=a.data.follows)})),j().then((a=>{console.log("getfans =",a),200===a.data.code&&(x.value=a.data.fans)}))})),(a,e)=>{const l=g,o=_,h=v;return s(),t(h,{class:"userinfo-wraper"},{default:n((()=>[i(h,{class:"userinfo"},{default:n((()=>[i(h,{class:"avatar-warper",onClick:k},{default:n((()=>[i(l,{src:p(r).avatar?p(r).avatar:"/static/images/default_avatar.png",class:"avatar"},null,8,["src"]),p(r).avatar?u("v-if",!0):(s(),t(o,{key:0,class:"avatar-title"},{default:n((()=>[d("请上传图片")])),_:1}))])),_:1}),i(h,{class:"userinfo-detail"},{default:n((()=>[i(h,{class:"title-wraper"},{default:n((()=>[i(o,{class:"username"},{default:n((()=>[d("用户名："+f(p(r).username),1)])),_:1}),i(h,{onClick:m,class:"config-wraper"},{default:n((()=>[c("span",{class:"iconfont"},"  "),i(o,null,{default:n((()=>[d("设置")])),_:1})])),_:1})])),_:1}),i(h,{class:"motto"},{default:n((()=>[i(o,null,{default:n((()=>[d("签   名：")])),_:1}),i(o,null,{default:n((()=>[d(f(p(r).motto),1)])),_:1})])),_:1})])),_:1})])),_:1}),i(h,{class:"fans-wraper"},{default:n((()=>[i(h,{class:"follows",onClick:C},{default:n((()=>[i(o,null,{default:n((()=>[d("关注")])),_:1}),d(" "),i(o,null,{default:n((()=>[d(f(p(w).length),1)])),_:1})])),_:1}),i(h,{class:"fans",onClick:N},{default:n((()=>[i(o,null,{default:n((()=>[d("粉丝")])),_:1}),d(" "),i(o,null,{default:n((()=>[d(f(p(x).length),1)])),_:1})])),_:1})])),_:1}),i(h,{class:"publish-wraper"},{default:n((()=>[i(h,{class:"my-publishs",onClick:e[0]||(e[0]=a=>R(0))},{default:n((()=>[i(o,null,{default:n((()=>[d("我发布的")])),_:1}),i(h,{class:y({active:0===p(P)})},null,8,["class"])])),_:1}),i(h,{class:"my-likes",onClick:e[1]||(e[1]=a=>R(1))},{default:n((()=>[i(o,null,{default:n((()=>[d("我喜欢的")])),_:1}),i(h,{class:y({active:1===p(P)})},null,8,["class"])])),_:1})])),_:1}),i(h,null,{default:n((()=>[i(S,{list:p(L),activeIndex:p(P)},null,8,["list","activeIndex"])])),_:1}),u("v-if",!0)])),_:1})}}}),[["__scopeId","data-v-9b62efe2"]]);export{R as default};
//# sourceMappingURL=pages-user-index.1735212f.js.map
