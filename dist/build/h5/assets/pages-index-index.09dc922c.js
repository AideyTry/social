import{D as e,E as a,F as l,G as t,o as s,c as o,w as i,H as n,I as c,J as d,e as u,K as r,L as g,M as f,N as p,O as v,P as h,Q as m,g as b,f as y,R as k,S as _,T as w,U as x,V as S,W as z,X as N,Y as C,Z as j,_ as I,$ as T,a0 as F,a1 as M}from"./vendor.3b43a146.js";import{_ as O}from"./uni-icons.af752859.js";import{r as $}from"./uni-app.es.54819d9d.js";import{_ as D,a as W}from"./uni-list.cfd41f10.js";import{g as A,a as E}from"./hobby.22c36fee.js";import{s as V}from"./communication.b0962ff9.js";import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.abf20ebc.js";const K={name:"waterFall"};var L=H(Object.assign(K,{props:{list:{type:Array,default:[]}},setup(x){const S=x;let z=e([]),N=e(328),C=e(2),j=e(20),I=e(20),T=e([]),F=e(null),M=e(null);const O=()=>{T.value=new Array(C.value);for(let e=0;e<T.value.length;e++)T.value[e]=0;$()},$=async()=>{for(let e=0;e<S.list.length;e++){let a=new Image;a.src=S.list[e].url,console.log("waterfall==",M.value);const l=await new Promise((l=>{a.onload=t=>{console.log("e=",t);let s={};s.height=N.value/a.width*a.height+160,s.id=S.list[e].id,s.src=S.list[e].url,s.title=S.list[e].title,s.avatar=S.list[e].avatar,s.username=S.list[e].username,s.likes=S.list[e].likes,z.value.push(s),D(s),l(s)}}));console.log("img==",l)}},D=e=>{const a=Math.min.apply(null,T.value);let l=T.value.indexOf(a);e.top=T.value[l],e.left=l*(j.value+N.value),T.value[l]+=e.height+I.value,console.log("imageData==",e)},W=e=>{console.log("item=",e);let a=b("like")||[];if(a.includes(e.id)){console.log("isOK=",a);for(let l=0;l<a.length;l++)a[l]===e.id&&a.splice(l,1);e.likes-=1,e.likeFlag=!1,y("like",a)}else e.likes+=1,e.likeFlag=!0,console.log("likeIds=",a),a.unshift(e.id),y("like",a);const l={hobby:4,hobbyId:e.id};V(l).then((e=>{console.log("like data=",e)}))};return a((()=>{console.log("list1=",S.list),O()})),l((()=>{console.log("list2=",S.list)})),t((()=>{O()})),(e,a)=>{const l=k,t=_,b=w;return s(),o(t,{class:"waterfall"},{default:i((()=>[(s(!0),n(h,null,c(r(z),(e=>(s(),o(t,{class:"waterfall-item",style:d({top:e.top+"rpx",left:e.left+"rpx"}),key:e.id,onClick:a=>(e=>{m({url:`/pages/index/HobbyDetailMountain?id=${e.id}`})})(e)},{default:i((()=>[u(l,{mode:"widthFix",style:d({width:r(N)+"rpx"}),src:e.src},null,8,["style","src"]),u(t,{class:"hobby-title",ref_for:!0,ref_key:"hobbyTitle",ref:F},{default:i((()=>[g(f(e.title),1)])),_:2},1536),u(t,{class:"hobby-info"},{default:i((()=>[u(t,{class:"info"},{default:i((()=>[u(l,{class:"avatar",mode:"aspectFit",src:e.avatar},null,8,["src"]),u(b,null,{default:i((()=>[g(f(e.username),1)])),_:2},1024)])),_:2},1024),u(t,null,{default:i((()=>[e.likeFlag?(s(),n("svg",{key:0,class:"icon","aria-hidden":"true",onClick:p((a=>W(e)),["stop"])},[v("use",{"xlink:href":"#icon-xihuan1"})],8,["onClick"])):(s(),n("svg",{key:1,class:"icon","aria-hidden":"true",onClick:p((a=>W(e)),["stop"])},[v("use",{"xlink:href":"#icon-xihuan"})],8,["onClick"])),u(b,{style:{"margin-left":"10rpx"}},{default:i((()=>[g(f(e.likes),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["style","onClick"])))),128))])),_:1})}}}),[["__scopeId","data-v-39282664"]]);const P={name:"McTabs",mounted(){console.log("this===",this)}};var q=H({components:{McTabs:H(Object.assign(P,{setup(l){x((e=>({"3baf8416":r(H)})));const t=e([{title:"英语",content:[]},{title:"狼人杀",content:[]},{title:"剧本杀",content:[]},{title:"登山",content:[]},{title:"旅游",content:[]}]);let p=e(0),v=e(0);const b=S([]),y={hobby0:e=>G(e),hobby1:e=>ee(e),hobby2:e=>te(e),hobby3:e=>X(e),hobby4:e=>ie(e)},M=e=>{console.log("e=",e);const{detail:{current:a}}=e;console.log("current=",a)},V=e=>{const{detail:{current:a}}=e;p.value=a,v.value=b[p.value].width,y[`hobby${a}`]({pageNum:1,pageSize:100}),console.log("e=",e),console.log("navItemWidth.value=====",v.value)};a((()=>{const e=document.querySelectorAll(".nav-item");e.length>0&&(e.forEach((e=>{console.log("width=",e.offsetWidth),b.push({width:e.offsetWidth})})),v.value=b[p.value].width,console.log("items===",e),console.log("navItemWidth===",v.value),G({pageNum:1,pageSize:10}))}));const H=z((()=>`${v.value}rpx`));let K=e([]),P=e(1),q=e(10),B=e(0);var G=({pageNum:e=1,pageSize:a=10})=>{A({pageNum:e,pageSize:a}).then((e=>{console.log("data===",e),200===e.data.code&&(K.value=K.value.concat(e.data.data),B.value=e.data.total)}))};const J=e=>{Math.ceil(B.value/q.value)<=P.value||(P.value++,G({pageNum:P.value,pageSize:q.value}))},Q=e=>{console.log("item===",e),m({url:`/pages/index/VideoDetail?id=${e.id}`})};let R=e([]),U=e(0);const X=({pageNum:e=1,pageSize:a=10})=>{const l={pageNum:e,pageSize:a,hobby:4};console.log("hobby"),E(l).then((e=>{console.log("data===",e),200===e.data.code&&(console.log("data.data.data=",e.data.data),R.value=e.data.data,U.value=e.data.total)}))};let Y=e([]),Z=e(0);const ee=({pageNum:e=1,pageSize:a=10})=>{const l={pageNum:e,pageSize:a,hobby:2};console.log("hobby"),E(l).then((e=>{console.log("data===",e),200===e.data.code&&(console.log("data.data.data=",e.data.data),Y.value=e.data.data,Z.value=e.data.total)}))};let ae=e([]),le=e(0);const te=({pageNum:e=1,pageSize:a=10})=>{const l={pageNum:e,pageSize:a,hobby:3};console.log("hobby"),E(l).then((e=>{console.log("data===",e),200===e.data.code&&(console.log("data.data.data=",e.data.data),ae.value=e.data.data,le.value=e.data.total)}))};let se=e([]),oe=e(0);const ie=({pageNum:e=1,pageSize:a=10})=>{const l={pageNum:e,pageSize:a,hobby:5};console.log("hobby"),E(l).then((e=>{console.log("data===",e),200===e.data.code&&(console.log("data.data.data=",e.data.data),se.value=e.data.data,oe.value=e.data.total)}))};return(e,a)=>{const l=w,m=_,b=I,y=k,x=$(N("uni-icons"),O),S=$(N("uni-list-item"),D),z=$(N("uni-list"),W),A=T,E=F;return s(),o(m,{class:"tabs"},{default:i((()=>[u(b,{"scroll-x":"","scroll-with-animaiton":"","enable-flex":!0,onScroll:M,class:"nav-wraper"},{default:i((()=>[u(m,{class:"nav"},{default:i((()=>[(s(!0),n(h,null,c(t.value,((e,a)=>(s(),o(m,{class:C(["nav-item",r(p)==a?"nav-item-act":""]),key:a,onClick:e=>(e=>{p.value=e})(a)},{default:i((()=>[u(l,null,{default:i((()=>[g(f(e.title),1)])),_:2},1024),r(p)==a?(s(),o(m,{key:0,class:"nav-line",style:d(`{width: ${r(v)}rpx}`)},null,8,["style"])):j("v-if",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),u(E,{current:r(p),duration:300,class:"swiper",onChange:V},{default:i((()=>[(s(!0),n(h,null,c(t.value,((e,a)=>(s(),o(A,{key:a},{default:i((()=>[u(b,{"scroll-y":"true",class:"swiper-scroll",onScrolltolower:J},{default:i((()=>[0===a?(s(),o(z,{key:0},{default:i((()=>[(s(!0),n(h,null,c(r(K),(e=>(s(),o(S,{title:e.title,ellipsis:e.title,note:e.description,key:e.id,direction:"column",class:"content-item"},{header:i((()=>[u(m,{class:"uni-thumb uni-content list-picture"},{default:i((()=>[e.img?(s(),o(y,{key:0,class:"slot-image",src:e.img,mode:"widthFix",onClick:a=>Q(e)},null,8,["src","onClick"])):j("v-if",!0),e.hintTitle||e.dateSrc?(s(),o(m,{key:1,class:"hint"},{default:i((()=>[j(' <text v-if="item.hintTitle">By</text> '),e.hintTitle?(s(),o(l,{key:0,class:"hint-title"},{default:i((()=>[g(f(e.hintTitle),1)])),_:2},1024)):j("v-if",!0),u(l,{class:"hint-date"},{default:i((()=>[g(f(e.dateSrc),1)])),_:2},1024)])),_:2},1024)):j("v-if",!0)])),_:2},1024)])),body:i((()=>[u(m,{class:"content-body"},{default:i((()=>[u(m,{class:"title-wraper",onClick:a=>Q(e)},{default:i((()=>[u(l,{class:"title"},{default:i((()=>[g(f(e.title),1)])),_:2},1024),u(m,{class:"video"},{default:i((()=>[u(x,{style:{"vertical-align":"middle"},type:"videocam",size:"20",color:"#999"}),u(l,null,{default:i((()=>[g("VIDEO")])),_:1})])),_:1})])),_:2},1032,["onClick"]),u(m,{class:"description"},{default:i((()=>[g(f(e.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["title","ellipsis","note"])))),128))])),_:2},1024)):1===a?(s(),n(h,{key:1},[j(' <view v-else-if="index === 3"> '),u(L,{list:r(Y)},null,8,["list"])],2112)):2===a?(s(),o(L,{key:2,list:r(ae)},null,8,["list"])):3===a?(s(),o(L,{key:3,list:r(R)},null,8,["list"])):4===a?(s(),o(L,{key:4,list:r(se)},null,8,["list"])):(s(),n(h,{key:5},[j(" </view> "),u(m,null,{default:i((()=>[g("待上线")])),_:1})],2112))])),_:2},1024),j(" <slot></slot> ")])),_:2},1024)))),128))])),_:1},8,["current"])])),_:1})}}}),[["__scopeId","data-v-f0cb1c18"]])},data:()=>({title:"蔓草"}),onLoad(){}},[["render",function(e,a,l,t,n,c){const d=M("McTabs"),r=_;return s(),o(r,{class:"content"},{default:i((()=>[u(d),j(' <button @click="open">打开弹窗</button> ')])),_:1})}],["__scopeId","data-v-1f2bafd6"]]);export{q as default};
