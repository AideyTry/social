{"version":3,"file":"pages-user-setting-Setting.24aa5dd3.js","sources":["../../../../src/pages/user/setting/Setting.vue"],"sourcesContent":["<template>\r\n  <view class=\"setting-wrapper\">\r\n    <view class=\"setting\" @click=\"onEdit\">\r\n      <text>编辑</text>\r\n      <span class=\"iconfont\"> &#xe662; </span>\r\n    </view>\r\n    <view class=\"setting\" @click=\"onAbout\">\r\n      <text>关于蔓草</text>\r\n      <span class=\"iconfont\"> &#xe662; </span>\r\n    </view>\r\n    <view class=\"logout-wraper\">\r\n      <button @click=\"onCancel\" class=\"cancel\">帐户注销</button>\r\n      <button @click=\"onLogout\" class=\"logout\">退出登录</button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport { removeToken } from \"@/utils/auth\";\r\nimport { deletedUser } from \"@/api/user.js\";\r\nexport default {\r\n  setup() {\r\n    const onEdit = () => {\r\n      //#ifdef APP-PLUS || H5\r\n      uni.navigateTo({\r\n        url: \"/pages/user/info/index\",\r\n      });\r\n      //#endif\r\n      //#ifdef MP-WEIXIN\r\n      uni.navigateTo({\r\n        url: \"/pages/userInfo/infoIndex/InfoIndex\",\r\n      });\r\n      //#endif\r\n    };\r\n    const onAbout = () => {\r\n      //#ifdef APP-PLUS || H5\r\n      uni.navigateTo({\r\n        url: \"/pages/user/about/about\",\r\n      });\r\n      //#endif\r\n      //#ifdef MP-WEIXIN\r\n      uni.navigateTo({\r\n        url: \"/pages/userInfo/about/about\",\r\n      });\r\n      //#endif\r\n    };\r\n    const onCancel = () => {\r\n      uni.showModal({\r\n        title: \"注销\",\r\n        content: \"注销帐户将不存在，确认注销吗？\",\r\n        success: function (res) {\r\n          if (res.confirm) {\r\n            deletedUser().then((res) => {\r\n              console.log(\"res==================================\", res);\r\n              if (res.data.code === 200) {\r\n                uni.showToast({\r\n                  title: \"注销成功\",\r\n                  duration: 2000,\r\n                });\r\n                new Promise((resolve, reject) => {\r\n                  removeToken();\r\n                  resolve();\r\n                }).then(() => {\r\n                  //#ifdef H5\r\n                  location.reload();\r\n                  //#endif\r\n                  //#ifdef APP-PLUS || MP-WEIXIN\r\n                  uni.reLaunch({\r\n                    url: \"/pages/login/index\",\r\n                  });\r\n                  //#endif\r\n                });\r\n              }\r\n            });\r\n          } else if (res.cancel) {\r\n            console.log(\"用户点击取消\");\r\n          }\r\n        },\r\n      });\r\n    };\r\n    const onLogout = () => {\r\n      uni.showModal({\r\n        title: \"退出\",\r\n        content: \"确认退出当前登录吗？\",\r\n        success: function (res) {\r\n          if (res.confirm) {\r\n            new Promise((resolve, reject) => {\r\n              removeToken();\r\n              resolve();\r\n            }).then(() => {\r\n              //#ifdef H5\r\n              location.reload();\r\n              //#endif\r\n              //#ifdef APP-PLUS || MP-WEIXIN\r\n              uni.reLaunch({\r\n                url: \"/pages/login/index\",\r\n              });\r\n              //#endif\r\n            });\r\n          } else if (res.cancel) {\r\n            console.log(\"用户点击取消\");\r\n          }\r\n        },\r\n      });\r\n    };\r\n    return {\r\n      onEdit,\r\n      onAbout,\r\n      onCancel,\r\n      onLogout,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.setting-wrapper {\r\n  padding: 40rpx;\r\n  .setting {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 20rpx;\r\n    border-bottom: 1rpx solid #dbdbdb;\r\n  }\r\n  .logout-wraper {\r\n    margin-top: 60rpx;\r\n    .cancel {\r\n      background-color: #ccc;\r\n      color: #fff;\r\n    }\r\n    .logout {\r\n      margin-top: 30rpx;\r\n      background-color: #000;\r\n      color: #fff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":["setup","onEdit","url","onAbout","onCancel","title","content","success","res","confirm","then","res2","log","data","code","duration","Promise","resolve","reject","reload","cancel","onLogout","_createBlock","_component_v_uni_view","class","_createVNode","onClick","$setup","_component_v_uni_text","_createElementVNode","_component_v_uni_button"],"mappings":"2MAsBEA,WAoFS,CACLC,OApFa,OAEE,CACbC,IAAK,4BAkFPC,QAzEc,OAEC,CACbD,IAAK,6BAuEPE,SA9De,OACD,CACZC,MAAO,KACPC,QAAS,kBACTC,QAAS,SAAUC,GACbA,EAAIC,YACQC,MAAMC,YACVC,IAAI,wCAAyCD,GAC/B,MAAlBA,EAAIE,KAAKC,SACG,CACZT,MAAO,OACPU,SAAU,UAERC,SAAQ,CAACC,EAASC,gBAGnBR,MAAK,cAEGS,gBAUNX,EAAIY,gBACLR,IAAI,cAkClBS,SA7Be,OACD,CACZhB,MAAO,KACPC,QAAS,aACTC,QAAS,SAAUC,GACbA,EAAIC,YACFO,SAAQ,CAACC,EAASC,gBAGnBR,MAAK,cAEGS,YAQFX,EAAIY,gBACLR,IAAI,+EApGtBU,EAaOC,GAbDC,MAAM,+BACV,KAAAC,EAGOF,GAHDC,MAAM,UAAWE,QAAOC,sBAC5B,KAAAF,EAAeG,mBAAT,OAAA,eACNC,EAAwC,QAAlCL,MAAM,YAAW,8BAEzBC,EAGOF,GAHDC,MAAM,UAAWE,QAAOC,uBAC5B,KAAAF,EAAiBG,mBAAX,OAAA,iBACNC,EAAwC,QAAlCL,MAAM,YAAW,8BAEzBC,EAGOF,GAHDC,MAAM,6BACV,KAAAC,EAAsDK,GAA7CJ,QAAOC,WAAUH,MAAM,sBAAS,OAAA,+BACzCC,EAAsDK,GAA7CJ,QAAOC,WAAUH,MAAM,sBAAS,OAAA"}