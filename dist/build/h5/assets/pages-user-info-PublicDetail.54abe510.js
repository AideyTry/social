import{a6 as a,X as o,W as e,D as s,E as t,a1 as l,o as n,H as i,e as d,w as r,N as u,O as c,c as f,Q as b,I as p,M as h,a4 as y,T as m,S as _,U as v,as as I,$ as g,a0 as j,R as k,n as w,l as x}from"./vendor.70a942df.js";import{b as C}from"./hobby.78a7a4ba.js";import{d as D}from"./publish.13ed9561.js";import{C as E}from"./Comment.c0d00590.js";import{V}from"./VideoPlayer.eb1645c3.js";import{f as O}from"./index.da08a463.js";import{_ as P}from"./plugin-vue_export-helper.21dcd24c.js";import"./communication.ee1a0e8e.js";var T=P({components:{Comment:E,VideoPlayer:V},onLoad:function(a){console.log("options===",a)},onReady:function(){},setup(l){console.log("props=",l);const n=a(),i=o((()=>n.state.user.userInfo)).value,d=e({poster:"",src:""});let r=s([{content:"https://social-1308251497.cos.ap-guangzhou.myqcloud.com/images/4.jfif"}]);s(0),s("default");let u=s({});const c=()=>{y({url:"/pages/user/index"})};let f=s(null),b=s(["编辑","删除"]),p=s(0);return t((()=>{console.log("userInfo===",i),(a=>{const{id:o,hobby:e}=a;C({id:o,hobby:e}).then((a=>{console.log("data===",a),200===a.data.code&&(u.value=a.data.data,f.value=O(a.data.data.create_time),console.log("hobbyInfo.value===",u.value),console.log("data.data.data.url===",a.data.data.url),d.poster=a.data.data.url,d.src=a.data.data.video_url)}))})({id:l.id,hobby:l.hobby})})),{hobbyInfo:u,info:r,publishDate:f,options:d,goBack:c,onEdit:a=>{const{detail:{value:o}}=a;var e;console.log("value=",o),p.value=o,1===p.value?(e=l,console.log("info==",e),w({title:"删除",content:"确定删除？",success:function(a){if(a.confirm){const a={hobby:l.hobby,id:l.id};D(a).then((a=>{200===a.data.code&&(x({title:"删除成功",duration:2e3}),c())}))}else a.cancel}})):(a=>{console.log("info==",a),k({url:`/pages/user/info/EditDetail?id=${a.id}&hobby=${a.hobby}`})})(l)},operations:b,activeOperationIndex:p}}},[["render",function(a,o,e,s,t,y){const k=m,w=_,x=v,C=I,D=g,E=j,V=l("VideoPlayer"),O=l("Comment");return n(),i("div",{class:"hobby-detail"},[d(k,{class:"author-wraper"},{default:r((()=>[d(k,{class:"author"},{default:r((()=>[d(k,{onClick:s.goBack},{default:r((()=>[u("返回")])),_:1},8,["onClick"]),d(k,{class:"author-info"},{default:r((()=>[d(w,{class:"avatar",mode:"aspectFit",src:s.hobbyInfo.avatar||""},null,8,["src"]),d(x,null,{default:r((()=>[u(c(s.hobbyInfo.username||""),1)])),_:1})])),_:1}),d(k,null,{default:r((()=>[d(C,{range:s.operations,value:s.activeOperationIndex,onChange:s.onEdit},{default:r((()=>[d(x,null,{default:r((()=>[u("...")])),_:1})])),_:1},8,["range","value","onChange"])])),_:1})])),_:1})])),_:1}),0===s.hobbyInfo.fileType?(n(),f(k,{key:0,class:"swiper-box"},{default:r((()=>[d(E,{class:"swiper-box","indicator-dots":s.hobbyInfo.photos.length>1},{default:r((()=>[(n(!0),i(b,null,p(s.hobbyInfo.photos,((a,o)=>(n(),f(D,{key:o},{default:r((()=>[d(k,{class:"swiper-item"},{default:r((()=>[d(w,{src:a,class:"image",mode:"aspectFit"},null,8,["src"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["indicator-dots"])])),_:1})):h("v-if",!0),1===s.hobbyInfo.fileType?(n(),f(k,{key:1,class:"swiper-box"},{default:r((()=>[d(k,{class:"swiper-item"},{default:r((()=>[(n(),f(V,{options:{src:s.hobbyInfo.video_url,poster:s.hobbyInfo.url},key:s.hobbyInfo.id},null,8,["options"]))])),_:1})])),_:1})):h("v-if",!0),d(k,{class:"content-wraper"},{default:r((()=>[d(k,{class:"content"},{default:r((()=>[d(k,{class:"title"},{default:r((()=>[u(c(s.hobbyInfo.title),1)])),_:1}),d(k,{class:"main"},{default:r((()=>[u(c(s.hobbyInfo.content),1)])),_:1}),d(k,{class:"publish-date"},{default:r((()=>[d(x,null,{default:r((()=>[u("发布于: ")])),_:1}),d(x,null,{default:r((()=>[u(c(s.publishDate),1)])),_:1})])),_:1})])),_:1})])),_:1}),d(k,{class:"comment-wraper"},{default:r((()=>[s.hobbyInfo.id?(n(),f(O,{hobbyInfo:s.hobbyInfo,key:s.hobbyInfo.id},null,8,["hobbyInfo"])):h("v-if",!0)])),_:1})])}],["__scopeId","data-v-04b728c0"]]);export{T as default};
