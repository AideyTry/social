import{z as e,A as s,a3 as t,_ as a,o,c as n,w as r,e as l,a6 as c,P as u}from"./vendor.99a7c6c2.js";import{C as i,o as d}from"./ChatContent.9f306e63.js";import{_ as g}from"./plugin-vue_export-helper.21dcd24c.js";var p=g({components:{ChatContent:i},setup(a){let o=e("");const n=e([]);return s((()=>{t({title:a.title}),d.getHistoryMessageList({groupID:"",startClientMsgID:"",count:1e4,userID:"13817373289"}).then((({data:e})=>{console.log("历史数据=",JSON.parse(e)),n.value=[...JSON.parse(e).reverse()]})).catch((e=>{})),d.on("OnRecvNewMessage",(e=>{const s=JSON.parse(e.data);101===s.contentType&&n.value.unshift(s)}))})),{inputString:o,messageInfo:n,onConfirm:e=>{console.log("event=",e);const{value:s}=e.detail;o.value=s;const t={title:"",desc:"",ex:"",iOSPushSound:"",iOSBadgeCount:!1};console.log("props.userID=",a.userID),d.createTextMessage(s).then((e=>{console.log("message=",JSON.parse(e.data));const s={recvID:a.userID,groupID:"",offlinePushInfo:t,message:e.data};d.sendMessage(s).then((({data:e,errCode:s})=>{const t=JSON.parse(e);n.value.unshift(t),o.value=""})).catch((e=>{console.log("err=",e)}))})).catch((e=>{console.log("text err=",e)}))}}}},[["render",function(e,s,t,i,d,g){const p=a("ChatContent"),m=c,f=u;return o(),n(f,{class:"chat-wraper"},{default:r((()=>[(o(),n(p,{key:i.messageInfo,msgList:i.messageInfo},null,8,["msgList"])),l(f,{class:"send-msg"},{default:r((()=>[l(m,{type:"text",placeholder:"请输入消息",modelValue:i.inputString,"onUpdate:modelValue":s[0]||(s[0]=e=>i.inputString=e),class:"send",onConfirm:i.onConfirm},null,8,["modelValue","onConfirm"])])),_:1})])),_:1})}],["__scopeId","data-v-795cdc48"]]);export{p as default};
//# sourceMappingURL=pages-message-Chat.4b2d87de.js.map
