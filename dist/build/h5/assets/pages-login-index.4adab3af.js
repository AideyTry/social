import{ak as e,o as t,D as n,$ as o,J as s,K as i,V as a,F as l,c as r,w as d,Q as c,p as u,al as h,l as f,U as p,e as g,I as m,O as b,P as w,a6 as _,a9 as v,aj as y}from"./vendor.34c9d7f1.js";import{_ as S}from"./plugin-vue_export-helper.21dcd24c.js";import{r as k}from"./uni-app.es.bcea8a55.js";import{s as C,c as I,d as x}from"./index.d686a517.js";var L=S({name:"uniLink",props:{href:{type:String,default:""},text:{type:String,default:""},download:{type:String,default:""},showUnderLine:{type:[Boolean,String],default:!0},copyTips:{type:String,default:"已自动复制网址，请在手机浏览器里粘贴该网址"},color:{type:String,default:"#999999"},fontSize:{type:[Number,String],default:14}},computed:{isShowA(){return this._isH5=!0,!(!this.isMail()&&!this.isTel()||!0!==this._isH5)}},created(){this._isH5=null},methods:{isMail(){return this.href.startsWith("mailto:")},isTel(){return this.href.startsWith("tel:")},openURL(){window.open(this.href)},makePhoneCall(t){e({phoneNumber:t})}}},[["render",function(e,u,h,f,p,g){const m=c;return g.isShowA?(t(),n("a",{key:0,class:a(["uni-link",{"uni-link--withline":!0===h.showUnderLine||"true"===h.showUnderLine}]),href:h.href,style:l({color:h.color,fontSize:h.fontSize+"px"}),download:h.download},[o(e.$slots,"default",{},(()=>[s(i(h.text),1)]),!0)],14,["href","download"])):(t(),r(m,{key:1,class:a(["uni-link",{"uni-link--withline":!0===h.showUnderLine||"true"===h.showUnderLine}]),style:l({color:h.color,fontSize:h.fontSize+"px"}),onClick:g.openURL},{default:d((()=>[o(e.$slots,"default",{},(()=>[s(i(h.text),1)]),!0)])),_:3},8,["class","style","onClick"]))}],["__scopeId","data-v-11527474"]]);var U=S({data:()=>({codeVisible:!0,loginVisible:!0,sendCaptchaEnabled:!0,codeMessage:"获取验证码",counterTimer:60,phoneNumber:null}),methods:{onInput:function(e){console.log("input e=",e),/^1[3456789]\d{9}$/.test(e.detail.value)?(this.codeVisible=!1,this.phoneNumber=e.detail.value):this.codeVisible=!0},onInputCode:function(e){console.log("code=",e),/^\d{6}$/.test(e.detail.value)?this.loginVisible=!1:this.loginVisible=!0},sendCaptcha:function(e){if(console.log("button e=",e),!this.sendCaptchaEnabled)return;this.sendCaptchaEnabled=!1;const t={phone:this.phoneNumber};console.log("params===",t),C(t).then((e=>{console.log("res=",e)})),this.codeMessage="重新发送";const n=setInterval((()=>{if(this.counterTimer<=0)return this.counterTimer=60,this.sendCaptchaEnabled=!0,clearInterval(n),void(this.codeMessage="获取验证码");this.counterTimer--}),1e3)},formSubmit:function(e){console.log("e=",e),console.log("form发生了submit事件，携带数据为："+JSON.stringify(e.detail.value));const t=e.detail.value,n=this;console.log("window.navigator=",window.navigator.userAgent),window.navigator.__defineGetter__("userAgent",(()=>"myBroser")),setTimeout((()=>{console.log("window.navigator1=",window.navigator.userAgent)}),200),I(t).then((e=>{console.log("res========",e);const{code:t,token:o}=e.data;200===t&&(console.log("成功"),x(o),n.$store.dispatch("user/GetUserInfo"),u({url:"/pages/index/index"}))}))},miniProLogin:function(e){console.log("e===",e),h({provider:"weixin",success:function(e){console.log("loginRes=",e.authResult)}})},wechatLogin:function(){f({title:"待上线",duration:2e3})},qqLogin:function(){f({title:"待上线",duration:2e3})},weiboLogin:function(){f({title:"待上线",duration:2e3})},getInfo:function(e){console.log("登录e=",e),h({provider:"weixin",success:function(e){console.log("loginRes====",e);const{code:t}=e;loginWechat({code:t}).then("res===",res)}})}}},[["render",function(e,n,o,a,l,u){const h=b,f=c,S=w,C=_,I=v,x=y,U=k(p("uni-link"),L);return t(),r(S,{class:"login-wraper"},{default:d((()=>[g(S,{class:"image-wraper"},{default:d((()=>[m(' <image\r\n        style="width: 100%; height: 100%"\r\n        src="../../static/images/login-bg.gif"\r\n        mode=""\r\n      ></image> '),g(h,{class:"image",src:"/assets/logo.8ed403c9.png"}),g(f,{class:"logo-title"},{default:d((()=>[s("蔓草兴趣")])),_:1})])),_:1}),g(S,{class:"login"},{default:d((()=>[g(x,{onSubmit:u.formSubmit,onReset:e.formReset,class:"login-in"},{default:d((()=>[g(S,{class:"row-flex uni-form-item uni-column"},{default:d((()=>[g(f,{class:"title"},{default:d((()=>[s("手机号：")])),_:1}),g(C,{class:"uni-input",name:"phone",placeholder:"请输入手机号",onInput:u.onInput},null,8,["onInput"])])),_:1}),g(S,{class:"row-flex uni-form-item uni-column"},{default:d((()=>[g(f,{class:"title"},{default:d((()=>[s("验证码：")])),_:1}),g(C,{class:"uni-input",name:"code",placeholder:"请输入验证码",onInput:u.onInputCode},null,8,["onInput"]),g(I,{class:"code",disabled:!l.sendCaptchaEnabled||l.codeVisible,onClick:u.sendCaptcha},{default:d((()=>[s(i(l.codeMessage),1),l.sendCaptchaEnabled?m("v-if",!0):(t(),r(f,{key:0},{default:d((()=>[s("("+i(l.counterTimer)+"s)",1)])),_:1}))])),_:1},8,["disabled","onClick"])])),_:1}),g(S,{class:"uni-btn-v"},{default:d((()=>[g(I,{"form-type":"submit",type:"primary",class:"btn-block",disabled:l.loginVisible},{default:d((()=>[s(" 登录 ")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["onSubmit","onReset"])])),_:1}),g(S,{class:"gov-wraper"},{default:d((()=>[g(U,{class:"gov",showUnderLine:!1,href:"https://beian.miit.gov.cn/",text:"粤ICP备2021179573号"})])),_:1})])),_:1})}],["__scopeId","data-v-da1dc74c"]]);export{U as default};
//# sourceMappingURL=pages-login-index.4adab3af.js.map
