import{ac as e,c as t,g as s,H as n,i as o,t as a,n as l,p as i,d as c,e as d,v as u,E as r,r as f,k as h,m,f as p,q as g,X as _,a8 as b,u as w,ad as v,ae as k,J as y,x as C,a3 as S,a4 as x,$ as I,Z as L,af as V,ag as U,ah as A,P as M,y as T,U as R,a9 as E,b as N}from"./index.caabeb3a.js";import{_ as $}from"./plugin-vue_export-helper.21dcd24c.js";import{r as j}from"./uni-app.es.84be360c.js";import{_ as z,a as H}from"./uni-forms.6adea248.js";var P=$({name:"uniLink",props:{href:{type:String,default:""},text:{type:String,default:""},download:{type:String,default:""},showUnderLine:{type:[Boolean,String],default:!0},copyTips:{type:String,default:"已自动复制网址，请在手机浏览器里粘贴该网址"},color:{type:String,default:"#999999"},fontSize:{type:[Number,String],default:14}},computed:{isShowA(){return this._isH5=!0,!(!this.isMail()&&!this.isTel()||!0!==this._isH5)}},created(){this._isH5=null},methods:{isMail(){return this.href.startsWith("mailto:")},isTel(){return this.href.startsWith("tel:")},openURL(){window.open(this.href)},makePhoneCall(t){e({phoneNumber:t})}}},[["render",function(e,r,f,h,m,p){const g=u;return p.isShowA?(t(),s("a",{key:0,class:l(["uni-link",{"uni-link--withline":!0===f.showUnderLine||"true"===f.showUnderLine}]),href:f.href,style:i({color:f.color,fontSize:f.fontSize+"px"}),download:f.download},[n(e.$slots,"default",{},(()=>[o(a(f.text),1)]),!0)],14,["href","download"])):(t(),c(g,{key:1,class:l(["uni-link",{"uni-link--withline":!0===f.showUnderLine||"true"===f.showUnderLine}]),style:i({color:f.color,fontSize:f.fontSize+"px"}),onClick:p.openURL},{default:d((()=>[n(e.$slots,"default",{},(()=>[o(a(f.text),1)]),!0)])),_:3},8,["class","style","onClick"]))}],["__scopeId","data-v-11527474"]]);const q={name:"showModal"};var B=$(Object.assign(q,{props:{title:{type:String,default:""},content:{type:String,default:""}},emits:["close"],setup(e,{emit:s}){const n=e,l=r(),i=f(null);let V=h({username:"Aiden"});const U=e=>{const{detail:{value:t}}=e;i.value.setValue("username",t)},A=()=>{s("close")},M=()=>{i.value.validate().then((e=>{const t={username:e.username,password:"111111"};console.log("params=======",t),v(t).then((e=>{console.log("res========",e);const{code:t,token:n}=e.data;200===t&&(s("close"),console.log("成功"),k(n),l.dispatch("user/GetUserInfo"),y({url:"/pages/index/index"}))}))})).catch((e=>{console.log("表单错误信息：",e)}))};return(e,s)=>{const l=C,r=u,f=S,h=x,v=I,k=j(m("uni-forms-item"),z),y=j(m("uni-forms"),H),T=L;return t(),c(l,{class:"_showModal"},{default:d((()=>[p(l,{class:"_shade"}),p(l,{class:"_modalBox"},{default:d((()=>[p(l,{class:"_modal"},{default:d((()=>[g(' <slot name="title"> '),p(l,{class:"title-wraper"},{default:d((()=>[p(l,{class:"title"},{default:d((()=>[p(r,null,{default:d((()=>[o(a(n.title),1)])),_:1})])),_:1}),g(' <svg class="close-icon" aria-hidden="true" @click.stop="onClose">\r\n              <use xlink:href="#icon-guanbi1"></use>\r\n              </svg> '),_("span",{class:"iconfont close-icon",onClick:b(A,["stop"])},"",8,["onClick"])])),_:1}),g(" </slot> "),p(l,{class:"content-hint"},{default:d((()=>[o(a(n.content),1)])),_:1}),p(y,{ref_key:"form",ref:i,modelValue:w(V)},{default:d((()=>[g(' <slot name="content"> '),p(k,{name:"username"},{default:d((()=>[p(v,{name:"radio",onChange:U},{default:d((()=>[p(h,null,{default:d((()=>[p(f,{value:"Aiden",checked:"Aiden"===w(V).username},null,8,["checked"]),p(r,null,{default:d((()=>[o("Aiden")])),_:1})])),_:1}),p(h,null,{default:d((()=>[p(f,{value:"Lucy"}),p(r,null,{default:d((()=>[o("Lucy")])),_:1})])),_:1})])),_:1})])),_:1}),g(" </slot> ")])),_:1},8,["modelValue"]),g(' <slot name="btn"> '),p(l,{class:"btnbox"},{default:d((()=>[p(T,{onClick:M,type:"primary",class:"btn"},{default:d((()=>[o("确定")])),_:1})])),_:1}),g(" </slot> ")])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-258b3eca"]]);var G=$({components:{ShowModal:B},data:()=>({codeVisible:!0,loginVisible:!0,demoVisible:!1,sendCaptchaEnabled:!0,codeMessage:"获取验证码",counterTimer:60,phoneNumber:null}),methods:{onInput:function(e){console.log("input e=",e),/^1[3456789]\d{9}$/.test(e.detail.value)?(this.codeVisible=!1,this.phoneNumber=e.detail.value):this.codeVisible=!0},onInputCode:function(e){console.log("code=",e),/^\d{6}$/.test(e.detail.value)?this.loginVisible=!1:this.loginVisible=!0},sendCaptcha:function(e){if(console.log("button e=",e),!this.sendCaptchaEnabled)return;this.sendCaptchaEnabled=!1;const t={phone:this.phoneNumber};console.log("params===",t),V(t).then((e=>{console.log("res=",e)})),this.codeMessage="重新发送";const s=setInterval((()=>{if(this.counterTimer<=0)return this.counterTimer=60,this.sendCaptchaEnabled=!0,clearInterval(s),void(this.codeMessage="获取验证码");this.counterTimer--}),1e3)},formSubmit:function(e){console.log("e=",e),console.log("form发生了submit事件，携带数据为："+JSON.stringify(e.detail.value));const t=e.detail.value,s=this;console.log("window.navigator=",window.navigator.userAgent),window.navigator.__defineGetter__("userAgent",(()=>"myBroser")),setTimeout((()=>{console.log("window.navigator1=",window.navigator.userAgent)}),200),U(t).then((e=>{console.log("res========",e);const{code:t,token:n}=e.data;200===t&&(console.log("成功"),k(n),s.$store.dispatch("user/GetUserInfo"),y({url:"/pages/index/index"}))}))},miniProLogin:function(e){console.log("e===",e),A({provider:"weixin",success:function(e){console.log("loginRes=",e.authResult)}})},wechatLogin:function(){M({title:"待上线",duration:2e3})},qqLogin:function(){M({title:"待上线",duration:2e3})},weiboLogin:function(){M({title:"待上线",duration:2e3})},getInfo:function(e){console.log("登录e=",e),A({provider:"weixin",success:function(e){console.log("loginRes====",e);const{code:t}=e;loginWechat({code:t}).then("res===",res)}})},openDemo:function(){this.demoVisible=!0},onClose:function(){this.demoVisible=!1}}},[["render",function(e,s,n,l,i,r){const f=T,h=u,_=C,b=R,w=L,v=E,k=N("show-modal"),y=N("vuew"),S=j(m("uni-link"),P);return t(),c(_,{class:"login-wraper"},{default:d((()=>[p(_,{class:"image-wraper"},{default:d((()=>[g(' <image\r\n        style="width: 100%; height: 100%"\r\n        src="../../static/images/login-bg.gif"\r\n        mode=""\r\n      ></image> '),p(f,{class:"image",src:"/assets/logo.8ed403c9.png"}),p(h,{class:"logo-title"},{default:d((()=>[o("蔓草兴趣")])),_:1})])),_:1}),p(_,{class:"login"},{default:d((()=>[p(v,{onSubmit:r.formSubmit,onReset:e.formReset,class:"login-in"},{default:d((()=>[p(_,{class:"row-flex uni-form-item uni-column"},{default:d((()=>[p(h,{class:"title"},{default:d((()=>[o("手机号：")])),_:1}),p(b,{class:"uni-input",name:"phone",placeholder:"请输入手机号",onInput:r.onInput},null,8,["onInput"])])),_:1}),p(_,{class:"row-flex uni-form-item uni-column"},{default:d((()=>[p(h,{class:"title"},{default:d((()=>[o("验证码：")])),_:1}),p(b,{class:"uni-input",name:"code",placeholder:"请输入验证码",onInput:r.onInputCode},null,8,["onInput"]),p(w,{class:"code",disabled:!i.sendCaptchaEnabled||i.codeVisible,onClick:r.sendCaptcha},{default:d((()=>[o(a(i.codeMessage),1),i.sendCaptchaEnabled?g("v-if",!0):(t(),c(h,{key:0},{default:d((()=>[o("("+a(i.counterTimer)+"s)",1)])),_:1}))])),_:1},8,["disabled","onClick"])])),_:1}),p(_,{class:"uni-btn-v"},{default:d((()=>[p(w,{"form-type":"submit",type:"primary",class:"btn-block",disabled:i.loginVisible},{default:d((()=>[o(" 登录 ")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["onSubmit","onReset"]),i.demoVisible?(t(),c(k,{key:0,title:"请选择账号",content:"请任意选择一个账号登录",onClose:r.onClose},null,8,["onClose"])):g("v-if",!0),p(y,{class:"demo"},{default:d((()=>[p(w,{class:"demo-title",onClick:r.openDemo},{default:d((()=>[o("点击可使用演示账号登录")])),_:1},8,["onClick"])])),_:1})])),_:1}),p(_,{class:"gov-wraper"},{default:d((()=>[p(S,{class:"gov",showUnderLine:!1,href:"https://beian.miit.gov.cn/",text:"粤ICP备2021179573号"})])),_:1})])),_:1})}],["__scopeId","data-v-7a375118"]]);export{G as default};
//# sourceMappingURL=pages-login-index.093d54fe.js.map
