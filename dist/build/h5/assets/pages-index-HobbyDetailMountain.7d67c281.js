import{D as a,E as e,o,H as l,e as t,w as s,N as n,O as u,K as c,a6 as d,Q as i,I as r,c as f,M as b,U as m,T as h,S as p,a7 as y,a8 as _,X as v,W as I,a1 as w,Z as g,n as x,a9 as j}from"./vendor.05fa844a.js";import{b as k}from"./hobby.9d021430.js";import{a as F,b as V,d as C,c as T,e as D}from"./communication.2aa0167f.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import{V as P}from"./VideoPlayer.342496ce.js";import{f as U}from"./index.94207e84.js";const $={name:"comment"};var q=O({components:{Comment:O(Object.assign($,{props:{hobbyInfo:{type:Object,default:{}}},setup(_){const v=_;let I=a(""),w=a(0),g=a([]);console.log("props=",v);const x=a=>{console.log("e=",a);const{detail:{value:e}}=a;let o={comment:e,detailUserId:v.hobbyInfo.user_id,hobbyId:v.hobbyInfo.hobby_4_id};F(o).then((a=>{200===a.statusCode&&(I.value="",j())}))},j=()=>{let a={hobbyId:v.hobbyInfo.hobby_4_id};V(a).then((a=>{console.log("data666666===",a),200===a.data.code&&(g.value=a.data.data,w.value=a.data.data.length)}))};return e((()=>{j()})),(a,e)=>{const v=m,j=h,k=p,F=y;return o(),l("div",{class:"comment"},[t(j,{class:"total"},{default:s((()=>[t(v,null,{default:s((()=>[n("共")])),_:1}),t(v,null,{default:s((()=>[n(u(c(w)),1)])),_:1}),t(v,null,{default:s((()=>[n("条评论")])),_:1})])),_:1}),t(j,{class:"my-comment"},{default:s((()=>[t(k,{class:"avatar",mode:"aspectFit",src:_.hobbyInfo.avatar||""},null,8,["src"]),t(F,{modelValue:c(I),"onUpdate:modelValue":e[0]||(e[0]=a=>d(I)?I.value=a:I=a),type:"text",class:"comment-input",placeholder:"喜欢就给个评论支持一下呗~",onConfirm:x},null,8,["modelValue"])])),_:1}),(o(!0),l(i,null,r(c(g),(e=>(o(),f(j,{class:"other-comment",key:e.id},{default:s((()=>[t(j,null,{default:s((()=>[t(k,{class:"avatar",mode:"aspectFit",src:e.avatar||""},null,8,["src"])])),_:2},1024),t(j,{class:"comment-info"},{default:s((()=>[t(j,{class:"userinfo"},{default:s((()=>[t(v,null,{default:s((()=>[n(u(e.username),1)])),_:2},1024),e.isAuthor?(o(),f(v,{key:0,class:"is-author"},{default:s((()=>[n("作者")])),_:1})):b("v-if",!0)])),_:2},1024),t(j,{class:"comment-content"},{default:s((()=>[t(v,null,{default:s((()=>[n(u(e.comment),1)])),_:2},1024)])),_:2},1024),t(j,null,{default:s((()=>[t(v,null,{default:s((()=>[n(u(a.$filters.commentTime(e.create_time)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])}}}),[["__scopeId","data-v-0b10064a"]]),VideoPlayer:P},onLoad:function(a){console.log("options===",a)},onReady:function(){},setup(o){console.log("props=",o);const l=_(),t=v((()=>l.state.user.userInfo)).value,s=I({poster:"",src:""});let n=a([{content:"https://social-1308251497.cos.ap-guangzhou.myqcloud.com/images/4.jfif"}]);a(0),a("default");let u=a({});let c=a(!1),d=a("关注");let i=a(null);const r=()=>{let a={followId:u.value.user_id};console.log("params===",a),D(a).then((a=>{console.log("data1===",a),200===a.data.code&&(c.value=a.data.isFollow,a.data.isFollow?d.value="已关注":d.value="关注")}))};return e((()=>{console.log("userInfo===",t),(a=>{const{hobby:e}=a;({hobby2:()=>j({title:"狼人杀"}),hobby3:()=>j({title:"剧本杀"}),hobby4:()=>j({title:"登山"}),hobby5:()=>j({title:"旅游"}),hobby6:()=>j({title:"视频"}),hobby7:()=>j({title:"电影"})})[`hobby${e}`]()})(o),(a=>{const{id:e,hobby:o}=a;k({id:e,hobby:o}).then((a=>{console.log("data===",a),200===a.data.code&&(u.value=a.data.data,i.value=U(a.data.data.create_time),console.log("hobbyInfo.value===",u.value),console.log("data.data.data.url===",a.data.data.url),s.poster=a.data.data.url,s.src=a.data.data.video_url,r())}))})({id:o.id,hobby:o.hobby})})),{followText:d,isFlollow:c,following:()=>{if(c.value)return void x({content:"确认不再关注？",success:function(a){if(a.confirm){let a={followId:u.value.user_id};C(a).then((a=>{200===a.data.code&&(d.value="关注",c.value=!1)}))}else a.cancel&&console.log("用户点击取消")}});console.log("userInfo===",t);let a={followId:u.value.user_id};T(a).then((a=>{console.log("data===",a),200===a.data.code&&(d.value="已关注",c.value=!0)}))},hobbyInfo:u,info:n,publishDate:i,options:s}}},[["render",function(a,e,c,d,i,r){const y=p,_=w("VideoPlayer"),v=h,I=m,x=w("Comment");return o(),l("div",{class:"hobby-detail"},[b(' <uni-swiper-dot\r\n      :info="info"\r\n      :current="current"\r\n      field="content"\r\n      :mode="mode"\r\n    >\r\n      <swiper class="swiper-box" @change="change">\r\n        <swiper-item v-for="(item, index) in info" :key="index">\r\n          <view class="swiper-item">\r\n            <image :src="item.content" class="image"></image>\r\n          </view>\r\n        </swiper-item>\r\n      </swiper>\r\n    </uni-swiper-dot> '),t(v,{class:"swiper-box"},{default:s((()=>[t(v,{class:"swiper-item"},{default:s((()=>[0===d.hobbyInfo.fileType?(o(),f(y,{key:0,src:d.hobbyInfo.url,class:"image"},null,8,["src"])):b("v-if",!0),1===d.hobbyInfo.fileType?(o(),f(_,{options:{src:d.hobbyInfo.video_url,poster:d.hobbyInfo.url},key:d.hobbyInfo.id},null,8,["options"])):b("v-if",!0)])),_:1})])),_:1}),t(v,{class:"author-wraper"},{default:s((()=>[t(v,{class:"author"},{default:s((()=>[t(v,{class:"author-info"},{default:s((()=>[t(y,{class:"avatar",mode:"aspectFit",src:d.hobbyInfo.avatar||""},null,8,["src"]),t(I,null,{default:s((()=>[n(u(d.hobbyInfo.username||""),1)])),_:1})])),_:1}),t(v,{class:g({follow:!d.isFlollow,active:d.isFlollow}),onClick:d.following},{default:s((()=>[t(I,null,{default:s((()=>[n(u(d.followText),1)])),_:1})])),_:1},8,["class","onClick"])])),_:1})])),_:1}),t(v,{class:"content-wraper"},{default:s((()=>[t(v,{class:"content"},{default:s((()=>[t(v,{class:"title"},{default:s((()=>[n(u(d.hobbyInfo.title),1)])),_:1}),t(v,{class:"main"},{default:s((()=>[n(u(d.hobbyInfo.content),1)])),_:1}),t(v,{class:"publish-date"},{default:s((()=>[t(I,null,{default:s((()=>[n("发布于: ")])),_:1}),t(I,null,{default:s((()=>[n(u(d.publishDate),1)])),_:1})])),_:1})])),_:1})])),_:1}),t(v,{class:"comment-wraper"},{default:s((()=>[d.hobbyInfo.hobby_4_id?(o(),f(x,{key:0,hobbyInfo:d.hobbyInfo},null,8,["hobbyInfo"])):b("v-if",!0)])),_:1})])}],["__scopeId","data-v-b7e04a5a"]]);export{q as default};
