import{a0 as o,W as a,V as l,C as e,D as s,a1 as t,o as n,G as d,c as i,w as c,e as u,P as f,H as b,L as r,M as h,N as y,Y as p,t as m,l as _,R as v,S as I,$ as w,T as g,a6 as j,_ as x}from"./vendor.9ff48645.js";import{b as k}from"./hobby.f03e1bd4.js";import{d as C,a as F,b as T}from"./communication.b4e1ff51.js";import{C as V}from"./Comment.c9a65f8b.js";import{V as P}from"./VideoPlayer.86f23a77.js";import{f as D}from"./index.50eaf64b.js";import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";var R=L({components:{Comment:V,VideoPlayer:P},onLoad:function(o){console.log("options===",o)},onReady:function(){},setup(t){console.log("props=",t);const n=o(),d=a((()=>n.state.user.userInfo)).value,i=l({poster:"",src:""});let c=e([{content:"https://social-1308251497.cos.ap-guangzhou.myqcloud.com/images/4.jfif"}]),u=e({});let f=e(!1),b=e("关注");let r=e(null);const h=()=>{let o={followId:u.value.user_id};console.log("params===",o),T(o).then((o=>{console.log("data1===",o),200===o.data.code&&(f.value=o.data.isFollow,o.data.isFollow?b.value="已关注":b.value="关注")}))};return s((()=>{console.log("userInfo===",d),(o=>{console.log("obj===================================================================================",o);const{hobby:a}=o;({hobby2:()=>j({title:"狼人杀"}),hobby3:()=>j({title:"剧本杀"}),hobby4:()=>j({title:"登山"}),hobby5:()=>j({title:"旅游"}),hobby6:()=>j({title:"视频"}),hobby7:()=>j({title:"电影"})})[`hobby${a}`]()})(t),(o=>{const{id:a,hobby:l}=o;k({id:a,hobby:l}).then((o=>{console.log("data===",o),200===o.data.code&&(u.value=o.data.data,r.value=D(o.data.data.create_time),console.log("hobbyInfo.value===",u.value),console.log("data.data.data.url===",o.data.data.url),i.poster=o.data.data.url,i.src=o.data.data.video_url,h())}))})({id:t.id,hobby:t.hobby})})),{followText:b,isFlollow:f,following:()=>{if(f.value)return void m({content:"确认不再关注？",success:function(o){if(o.confirm){let o={followId:u.value.user_id};C(o).then((o=>{200===o.data.code&&(b.value="关注",f.value=!1)}))}else o.cancel&&console.log("用户点击取消")}});console.log("userInfo===",d);let o={followId:u.value.user_id};F(o).then((o=>{console.log("data===",o),200===o.data.code?(b.value="已关注",f.value=!0):400===o.data.code&&_({title:o.data.msg,icon:"none",duration:2e3})}))},hobbyInfo:u,info:c,publishDate:r,options:i}}},[["render",function(o,a,l,e,s,m){const _=v,j=I,k=x,C=w,F=t("VideoPlayer"),T=g,V=t("Comment");return n(),d("div",{class:"hobby-detail"},[0===e.hobbyInfo.fileType?(n(),i(j,{key:0,class:"swiper-box"},{default:c((()=>[u(C,{class:"swiper-box","indicator-dots":e.hobbyInfo.photos.length>1},{default:c((()=>[(n(!0),d(f,null,b(e.hobbyInfo.photos,((o,a)=>(n(),i(k,{key:a},{default:c((()=>[u(j,{class:"swiper-item"},{default:c((()=>[u(_,{src:o,class:"image",mode:"aspectFit"},null,8,["src"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["indicator-dots"])])),_:1})):r("v-if",!0),1===e.hobbyInfo.fileType?(n(),i(j,{key:1,class:"swiper-box"},{default:c((()=>[u(j,{class:"swiper-item"},{default:c((()=>[(n(),i(F,{options:{src:e.hobbyInfo.video_url,poster:e.hobbyInfo.url},key:e.hobbyInfo.id},null,8,["options"]))])),_:1})])),_:1})):r("v-if",!0),u(j,{class:"author-wraper"},{default:c((()=>[u(j,{class:"author"},{default:c((()=>[u(j,{class:"author-info"},{default:c((()=>[u(_,{class:"avatar",mode:"aspectFit",src:e.hobbyInfo.avatar||""},null,8,["src"]),u(T,null,{default:c((()=>[h(y(e.hobbyInfo.username||""),1)])),_:1})])),_:1}),u(j,{class:p({follow:!e.isFlollow,active:e.isFlollow}),onClick:e.following},{default:c((()=>[u(T,null,{default:c((()=>[h(y(e.followText),1)])),_:1})])),_:1},8,["class","onClick"])])),_:1})])),_:1}),u(j,{class:"content-wraper"},{default:c((()=>[u(j,{class:"content"},{default:c((()=>[u(j,{class:"title"},{default:c((()=>[h(y(e.hobbyInfo.title),1)])),_:1}),u(j,{class:"main"},{default:c((()=>[h(y(e.hobbyInfo.content),1)])),_:1}),u(j,{class:"publish-date"},{default:c((()=>[u(T,null,{default:c((()=>[h("发布于: ")])),_:1}),u(T,null,{default:c((()=>[h(y(e.publishDate),1)])),_:1})])),_:1})])),_:1})])),_:1}),u(j,{class:"comment-wraper"},{default:c((()=>[e.hobbyInfo.id?(n(),i(V,{hobbyInfo:e.hobbyInfo,key:e.hobbyInfo.id},null,8,["hobbyInfo"])):r("v-if",!0)])),_:1})])}],["__scopeId","data-v-ce639240"]]);export{R as default};
//# sourceMappingURL=pages-index-HobbyDetailMountain.648d8b45.js.map
