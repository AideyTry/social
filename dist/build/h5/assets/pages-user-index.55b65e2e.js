import{D as a,ac as l,E as s,o as e,c as t,w as n,M as o,e as u,H as i,I as r,L as c,N as d,O as f,K as m,Q as p,R as _,U as v,T as g,S as h,a9 as b,X as y,G as k,Z as w,ad as C}from"./vendor.2a2b33f0.js";import{r as x,a as I}from"./index.ed016f60.js";import{f as j,h as $}from"./communication.9103250d.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";const O={name:"infoList"};var T=F(Object.assign(O,{props:{list:{type:Array,default:[]}},setup(b){const y=b;let k=a([]);return l((()=>y.list),(a=>{console.log("state=",a),k.value=a}),{deep:!0}),s((()=>{console.log("props=",y)})),(a,l)=>{const s=v,b=g,y=h;return e(),t(b,{class:"info-list"},{default:n((()=>[o(' <uni-list>\r\n      <uni-list-item\r\n        v-for="item in infoList"\r\n        :key="item.id"\r\n        :title="item.username"\r\n        :note="item.title"\r\n        :thumb="item.avatar"\r\n        thumb-size="lg"\r\n      ></uni-list-item>\r\n    </uni-list> '),u(b,{class:"ul"},{default:n((()=>[(e(!0),i(p,null,r(m(k),(l=>(e(),t(b,{class:"li",key:l.id,onClick:a=>(a=>{console.log("item=",a),_({url:`/pages/index/HobbyDetailMountain?id=${a.id}&hobby=${a.hobby}`})})(l)},{default:n((()=>[u(b,{class:"comment"},{default:n((()=>[(e(),i("svg",{class:"replay-icon","aria-hidden":"true"},[c("use",{"xlink:href":"#icon-pinglunhuifu"})])),u(b,null,{default:n((()=>[u(s,null,{default:n((()=>[d(f(l.comments||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),u(b,{class:"publish-info"},{default:n((()=>[u(b,{class:"title"},{default:n((()=>[d(f(l.title),1)])),_:2},1024),u(b,{class:"userinfo"},{default:n((()=>[u(y,{class:"avatar",mode:"aspectFit",src:l.avatar||""},null,8,["src"]),u(s,{class:"username"},{default:n((()=>[d(f(l.username),1)])),_:2},1024),u(s,{class:"update-time"},{default:n((()=>[d(f(a.$filters.commentTime(l.create_time))+" 更新",1)])),_:2},1024)])),_:2},1024)])),_:2},1024),u(b,{class:"img"},{default:n((()=>[u(y,{class:"img-url",mode:"aspectFit",src:l.url||""},null,8,["src"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})}}}),[["__scopeId","data-v-1e32f88b"]]);var E=F({setup(l){const i=b(),r=y((()=>i.state.user.userInfo)).value,c=()=>{new Promise(((a,l)=>{I(),a()})).then((()=>{location.reload()}))},p=()=>{_({url:"/pages/user/info/index"})};let F=a([]),O=a([]);const E=()=>{const a=[];for(let l of F.value)a.push(l.follow_id);_({url:`/pages/user/info/Follow?type=0&userids=${encodeURIComponent(JSON.stringify(a))}`})},G=()=>{const a=[];for(let l of O.value)a.push(l.user_id);_({url:`/pages/user/info/Follow?type=1&userids=${encodeURIComponent(JSON.stringify(a))}`})};let L=a(0),M=a([]);const N=()=>{var a;M.value=[],(console.log("params===",a),x("/publishs/getPublish","GET",a)).then((a=>{console.log("data getPublish=",a),200===a.data.code&&(M.value=a.data.data)}))};a([]);const P=()=>{var a;M.value=[],(console.log("params===",a),x("/publishs/getMylikes","GET",a)).then((a=>{console.log("data likes=",a),200===a.data.code&&(M.value=a.data.data)}))},R=a=>{L.value=a};return k((()=>{0===L.value?N():P()}),L.value),s((()=>{j().then((a=>{console.log("getfollows =",a),200===a.data.code&&(F.value=a.data.follows)})),$().then((a=>{console.log("getfans =",a),200===a.data.code&&(O.value=a.data.fans)})),N()})),(a,l)=>{const s=h,i=v,_=g,b=C;return e(),t(_,{class:"userinfo-wraper"},{default:n((()=>[u(_,{class:"userinfo"},{default:n((()=>[u(_,{class:"avatar-warper",onClick:p},{default:n((()=>[u(s,{src:m(r).avatar?m(r).avatar:"/static/images/default_avatar.png",class:"avatar"},null,8,["src"]),m(r).avatar?o("v-if",!0):(e(),t(i,{key:0,class:"avatar-title"},{default:n((()=>[d("请上传图片")])),_:1}))])),_:1}),u(_,{class:"userinfo-detail"},{default:n((()=>[u(i,null,{default:n((()=>[d("用户名："+f(m(r).username),1)])),_:1}),u(i,null,{default:n((()=>[d("签  名: "+f(m(r).motto),1)])),_:1})])),_:1})])),_:1}),u(_,{class:"fans-wraper"},{default:n((()=>[u(_,{class:"follows",onClick:E},{default:n((()=>[u(i,null,{default:n((()=>[d("关注")])),_:1}),d(" "),u(i,null,{default:n((()=>[d(f(m(F).length),1)])),_:1})])),_:1}),u(_,{class:"fans",onClick:G},{default:n((()=>[u(i,null,{default:n((()=>[d("粉丝")])),_:1}),d(" "),u(i,null,{default:n((()=>[d(f(m(O).length),1)])),_:1})])),_:1})])),_:1}),u(_,{class:"publish-wraper"},{default:n((()=>[u(_,{class:"my-publishs",onClick:l[0]||(l[0]=a=>R(0))},{default:n((()=>[u(i,null,{default:n((()=>[d("我发布的")])),_:1}),u(_,{class:w({active:0===m(L)})},null,8,["class"])])),_:1}),u(_,{class:"my-likes",onClick:l[1]||(l[1]=a=>R(1))},{default:n((()=>[u(i,null,{default:n((()=>[d("我喜欢的")])),_:1}),u(_,{class:w({active:1===m(L)})},null,8,["class"])])),_:1})])),_:1}),u(_,null,{default:n((()=>[u(T,{list:m(M)},null,8,["list"])])),_:1}),u(b,{onClick:c,style:{"margin-top":"20rpx"}},{default:n((()=>[d("退出")])),_:1})])),_:1})}}},[["__scopeId","data-v-629ac61c"]]);export{E as default};
