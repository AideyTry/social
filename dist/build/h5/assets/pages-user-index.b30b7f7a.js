import{D as a,ab as l,E as s,o as e,c as t,w as u,M as n,e as o,H as i,I as r,L as c,N as d,O as f,K as m,Q as _,U as p,T as v,S as g,a8 as h,X as b,G as k,Z as y,R as w,ac as x}from"./vendor.05fa844a.js";import{r as j,a as C}from"./index.94207e84.js";import{f as I,h as T}from"./communication.2aa0167f.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";const G={name:"infoList"};var L=E(Object.assign(G,{props:{list:{type:Array,default:[]}},setup(h){const b=h;let k=a([]);return l((()=>b.list),(a=>{console.log("state=",a),k.value=a}),{deep:!0}),s((()=>{console.log("props=",b)})),(a,l)=>{const s=p,h=v,b=g;return e(),t(h,{class:"info-list"},{default:u((()=>[n(' <uni-list>\r\n      <uni-list-item\r\n        v-for="item in infoList"\r\n        :key="item.id"\r\n        :title="item.username"\r\n        :note="item.title"\r\n        :thumb="item.avatar"\r\n        thumb-size="lg"\r\n      ></uni-list-item>\r\n    </uni-list> '),o(h,{class:"ul"},{default:u((()=>[(e(!0),i(_,null,r(m(k),(l=>(e(),t(h,{class:"li",key:l.id},{default:u((()=>[o(h,{class:"comment"},{default:u((()=>[(e(),i("svg",{class:"replay-icon","aria-hidden":"true"},[c("use",{"xlink:href":"#icon-pinglunhuifu"})])),o(h,null,{default:u((()=>[o(s,null,{default:u((()=>[d("2")])),_:1})])),_:1})])),_:1}),o(h,{class:"publish-info"},{default:u((()=>[o(h,{class:"title"},{default:u((()=>[d(f(l.title),1)])),_:2},1024),o(h,{class:"userinfo"},{default:u((()=>[o(b,{class:"avatar",mode:"aspectFit",src:l.url||""},null,8,["src"]),o(s,{class:"username"},{default:u((()=>[d(f(l.username),1)])),_:2},1024),o(s,{class:"update-time"},{default:u((()=>[d(f(a.$filters.commentTime(l.create_time))+" 更新",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})}}}),[["__scopeId","data-v-3df28f29"]]);var P=E({setup(l){const i=h(),r=b((()=>i.state.user.userInfo)).value,c=()=>{new Promise(((a,l)=>{C(),a()})).then((()=>{location.reload()}))},_=()=>{w({url:"/pages/user/info/index"})};let E=a(0),G=a(0),P=a(0),M=a([]);const O=()=>{var a;M.value=[],(console.log("params===",a),j("/publishs/getPublish","GET",a)).then((a=>{console.log("data getPublish=",a),200===a.data.code&&(M.value=a.data.data)}))};a([]);const z=()=>{var a;M.value=[],(console.log("params===",a),j("/publishs/getMylikes","GET",a)).then((a=>{console.log("data likes=",a),200===a.data.code&&(M.value=a.data.data)}))},A=a=>{P.value=a};return k((()=>{0===P.value?O():z()}),P.value),s((()=>{I().then((a=>{console.log("getfollows =",a),200===a.data.code&&(E.value=a.data.follows)})),T().then((a=>{console.log("getfans =",a),200===a.data.code&&(G.value=a.data.fans)})),O()})),(a,l)=>{const s=g,i=p,h=v,b=x;return e(),t(h,{class:"userinfo-wraper"},{default:u((()=>[o(h,{class:"userinfo"},{default:u((()=>[o(h,{class:"avatar-warper",onClick:_},{default:u((()=>[o(s,{src:m(r).avatar?m(r).avatar:"/static/images/default_avatar.png",class:"avatar"},null,8,["src"]),m(r).avatar?n("v-if",!0):(e(),t(i,{key:0,class:"avatar-title"},{default:u((()=>[d("请上传图片")])),_:1}))])),_:1}),o(h,{class:"userinfo-detail"},{default:u((()=>[o(i,null,{default:u((()=>[d("用户名："+f(m(r).username),1)])),_:1}),o(i,null,{default:u((()=>[d("签  名: "+f(m(r).motto),1)])),_:1})])),_:1})])),_:1}),o(h,{class:"fans-wraper"},{default:u((()=>[o(h,{class:"follows"},{default:u((()=>[o(i,null,{default:u((()=>[d("关注")])),_:1}),d(" "),o(i,null,{default:u((()=>[d(f(m(E)),1)])),_:1})])),_:1}),o(h,{class:"fans"},{default:u((()=>[o(i,null,{default:u((()=>[d("粉丝")])),_:1}),d(" "),o(i,null,{default:u((()=>[d(f(m(G)),1)])),_:1})])),_:1})])),_:1}),o(h,{class:"publish-wraper"},{default:u((()=>[o(h,{class:"my-publishs",onClick:l[0]||(l[0]=a=>A(0))},{default:u((()=>[o(i,null,{default:u((()=>[d("我发布的")])),_:1}),o(h,{class:y({active:0===m(P)})},null,8,["class"])])),_:1}),o(h,{class:"my-likes",onClick:l[1]||(l[1]=a=>A(1))},{default:u((()=>[o(i,null,{default:u((()=>[d("我喜欢的")])),_:1}),o(h,{class:y({active:1===m(P)})},null,8,["class"])])),_:1})])),_:1}),o(h,null,{default:u((()=>[o(L,{list:m(M)},null,8,["list"])])),_:1}),o(b,{onClick:c,style:{"margin-top":"20rpx"}},{default:u((()=>[d("退出")])),_:1})])),_:1})}}},[["__scopeId","data-v-53aab4b2"]]);export{P as default};
