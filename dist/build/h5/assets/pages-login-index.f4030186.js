import{aa as e,b as t,e as o,K as l,i as s,t as i,A as a,n,c,d as r,q as d,H as p,r as u,x as h,z as f,g as m,h as g,R as b,j as _,u as x,ab as w,ac as k,M as v,p as y,a0 as C,a1 as S,X as $,Y as V,ad as I,ae as L,af as z,ag as M,a4 as R,k as T,m as U,V as j,I as A,a7 as P}from"./index.4f21874d.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";import{r as N}from"./uni-app.es.186d8cb4.js";import{_ as O,a as H}from"./uni-forms.24d536c2.js";import"./uni-icons.770916ad.js";var q=E({name:"uniLink",props:{href:{type:String,default:""},text:{type:String,default:""},download:{type:String,default:""},showUnderLine:{type:[Boolean,String],default:!0},copyTips:{type:String,default:"已自动复制网址，请在手机浏览器里粘贴该网址"},color:{type:String,default:"#999999"},fontSize:{type:[Number,String],default:14}},computed:{isShowA(){return this._isH5=!0,!(!this.isMail()&&!this.isTel()||!0!==this._isH5)}},created(){this._isH5=null},methods:{isMail(){return this.href.startsWith("mailto:")},isTel(){return this.href.startsWith("tel:")},openURL(){window.open(this.href)},makePhoneCall(t){e({phoneNumber:t})}}},[["render",function(e,p,u,h,f,m){const g=d;return m.isShowA?(t(),o("a",{key:0,class:a(["uni-link",{"uni-link--withline":!0===u.showUnderLine||"true"===u.showUnderLine}]),href:u.href,style:n({color:u.color,fontSize:u.fontSize+"px"}),download:u.download},[l(e.$slots,"default",{},(()=>[s(i(u.text),1)]),!0)],14,["href","download"])):(t(),c(g,{key:1,class:a(["uni-link",{"uni-link--withline":!0===u.showUnderLine||"true"===u.showUnderLine}]),style:n({color:u.color,fontSize:u.fontSize+"px"}),onClick:m.openURL},{default:r((()=>[l(e.$slots,"default",{},(()=>[s(i(u.text),1)]),!0)])),_:3},8,["class","style","onClick"]))}],["__scopeId","data-v-11527474"]]);const B={name:"showModal"};var W=E(Object.assign(B,{props:{title:{type:String,default:""},content:{type:String,default:""}},emits:["close"],setup(e,{emit:o}){const l=e,a=p(),n=u(null);let I=h({username:"Aiden"});const L=e=>{const{detail:{value:t}}=e;n.value.setValue("username",t)},z=()=>{o("close")},M=()=>{n.value.validate().then((e=>{const t={username:e.username,password:"111111"};console.log("params=======",t),w(t).then((e=>{console.log("res========",e);const{code:t,token:l}=e.data;200===t&&(o("close"),console.log("成功"),k(l),a.dispatch("user/GetUserInfo"),v({url:"/pages/index/index"}))}))})).catch((e=>{console.log("表单错误信息：",e)}))};return(e,o)=>{const a=y,p=d,u=C,h=S,w=$,k=N(f("uni-forms-item"),O),v=N(f("uni-forms"),H),R=V;return t(),c(a,{class:"_showModal"},{default:r((()=>[m(a,{class:"_shade"}),m(a,{class:"_modalBox"},{default:r((()=>[m(a,{class:"_modal"},{default:r((()=>[g(' <slot name="title"> '),m(a,{class:"title-wraper"},{default:r((()=>[m(a,{class:"title"},{default:r((()=>[m(p,null,{default:r((()=>[s(i(l.title),1)])),_:1})])),_:1}),g(' <svg class="close-icon" aria-hidden="true" @click.stop="onClose">\r\n              <use xlink:href="#icon-guanbi1"></use>\r\n              </svg> '),b("span",{class:"iconfont close-icon",onClick:_(z,["stop"])},"",8,["onClick"])])),_:1}),g(" </slot> "),m(a,{class:"content-hint"},{default:r((()=>[s(i(l.content),1)])),_:1}),m(v,{ref_key:"form",ref:n,modelValue:x(I)},{default:r((()=>[g(' <slot name="content"> '),m(k,{name:"username"},{default:r((()=>[m(w,{name:"radio",onChange:L},{default:r((()=>[m(h,null,{default:r((()=>[m(u,{value:"Aiden",checked:"Aiden"===x(I).username},null,8,["checked"]),m(p,null,{default:r((()=>[s("Aiden")])),_:1})])),_:1}),m(h,null,{default:r((()=>[m(u,{value:"Lucy"}),m(p,null,{default:r((()=>[s("Lucy")])),_:1})])),_:1})])),_:1})])),_:1}),g(" </slot> ")])),_:1},8,["modelValue"]),g(' <slot name="btn"> '),m(a,{class:"btnbox"},{default:r((()=>[m(R,{onClick:M,type:"primary",class:"btn"},{default:r((()=>[s("确定")])),_:1})])),_:1}),g(" </slot> ")])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-258b3eca"]]);var D=E({props:{visible:Boolean,color:{type:String,default:"#303133"},placement:{type:String,default:"top"},content:{type:String,default:""},show:{type:Boolean,default:!1}},data(){return{isShow:this.visible,title:"Hello",arrowLeft:0,query:null,style:{},arrowStyle:{}}},onLoad(){},watch:{isShow:{handler(e){this.$emit("update:visible",e)},immediate:!0},visible:{handler(e){this.isShow=e,e&&this.$nextTick((()=>{this.handleClick()}))},immediate:!0}},mounted(){},methods:{close(){this.isShow=!1},fixedWrap(){this.isShow=!1},handleClick(){I().in(this).selectAll(".zb_tooltip_content,.zb_tooltip__popper").boundingClientRect((async e=>{let{left:t,bottom:o,right:l,top:s,width:i,height:a}=e[0],n=e[1],c={},r={};switch(this.placement){case"top":n.width>i?c.left=`-${(n.width-i)/2}px`:c.left=Math.abs(n.width-i)/2+"px",c.bottom=`${a+8}px`,r.left=n.width/2-6+"px";break;case"top-start":c.left="0px",c.bottom=`${a+8}px`;break;case"top-end":c.right="0px",c.bottom=`${a+8}px`,r.right="8px";break;case"bottom":n.width>i?c.left=`-${(n.width-i)/2}px`:c.left=Math.abs(n.width-i)/2+"px",c.top=`${a+8}px`,r.left=n.width/2-6+"px";break;case"bottom-start":c.left="0px",c.top=`${a+8}px`,r.left="8px";break;case"bottom-end":c.right="0px",c.top=`${a+8}px`,r.right="8px";break;case"right":c.left=`${i+8}px`,n.height>a?c.top=`-${(n.height-a)/2}px`:c.top=`${Math.abs((n.height-a)/2)}px`,r.top=n.height/2-6+"px";break;case"right-start":c.left=`${i+8}px`,c.top="0px",r.top="8px";break;case"right-end":c.left=`${i+8}px`,c.bottom="0px",r.bottom="8px";break;case"left":c.right=`${i+8}px`,n.height>a?c.top=`-${(n.height-a)/2}px`:c.top=`${Math.abs((n.height-a)/2)}px`,r.top=n.height/2-6+"px";break;case"left-start":c.right=`${i+8}px`,c.top="0px",r.top="8px";break;case"left-end":c.right=`${i+8}px`,c.bottom="0px",r.bottom="8px"}this.style=c,this.arrowStyle=r,this.isShow=!0})).exec()}}},[["render",function(e,o,d,p,u,h){const f=y;return t(),c(f,{class:"zb-tooltip",style:n({"--theme-bg-color":d.color})},{default:r((()=>[m(f,{class:"zb_tooltip_content"},{default:r((()=>[l(e.$slots,"default",{},void 0,!0),m(f,{class:"zb_tooltip__popper",style:n([u.style,{visibility:u.isShow?"visible":"hidden",color:"white"===d.color?"":"#fff",boxShadow:"white"===d.color?"0 3px 6px -4px #0000001f, 0 6px 16px #00000014, 0 9px 28px 8px #0000000d":""}])},{default:r((()=>[l(e.$slots,"content",{},(()=>[s(i(d.content),1)]),!0),m(f,{class:a(["zb_popper__icon",[{zb_popper__up:0===d.placement.indexOf("bottom"),zb_popper__arrow:0===d.placement.indexOf("top"),zb_popper__right:0===d.placement.indexOf("right"),zb_popper__left:0===d.placement.indexOf("left")}]]),style:n([u.arrowStyle])},null,8,["style","class"])])),_:3},8,["style"])])),_:3})])),_:3},8,["style"])}],["__scopeId","data-v-2f1ee06b"]]);var G=E({components:{ShowModal:W,mcTooltip:D},data:()=>({codeVisible:!0,loginVisible:!0,demoVisible:!1,sendCaptchaEnabled:!0,codeMessage:"获取验证码",counterTimer:60,phoneNumber:null,protocolChecked:!1,tooltipVisible:!1,timer:null}),methods:{onInput:function(e){console.log("input e=",e),/^1[3456789]\d{9}$/.test(e.detail.value)?(this.codeVisible=!1,this.phoneNumber=e.detail.value):this.codeVisible=!0},onInputCode:function(e){console.log("code=",e),/^\d{6}$/.test(e.detail.value)?this.loginVisible=!1:this.loginVisible=!0},sendCaptcha:function(e){if(console.log("button e=",e),!this.sendCaptchaEnabled)return;this.sendCaptchaEnabled=!1;const t={phone:this.phoneNumber};console.log("params===",t),L(t).then((e=>{console.log("res=",e)})),this.codeMessage="重新发送";const o=setInterval((()=>{if(this.counterTimer<=0)return this.counterTimer=60,this.sendCaptchaEnabled=!0,clearInterval(o),void(this.codeMessage="获取验证码");this.counterTimer--}),1e3)},formSubmit:function(e){console.log("e=",e),console.log("form发生了submit事件，携带数据为："+JSON.stringify(e.detail.value));const t=e.detail.value,o=this;if(!o.protocolChecked)return o.tooltipVisible=!0,console.log("this.tooltipVisible===",o.tooltipVisible),void(o.timer=setTimeout((()=>{o.tooltipVisible=!1,console.log("this.tooltipVisible2222===",o.tooltipVisible)}),2e3));z(t).then((e=>{console.log("res========",e);const{code:t,token:l}=e.data;200===t&&(console.log("成功"),o.timer=null,k(l),o.$store.dispatch("user/GetUserInfo"),v({url:"/pages/index/index"}))}))},miniProLogin:function(e){console.log("e===",e),M({provider:"weixin",success:function(e){console.log("loginRes=",e.authResult)}})},wechatLogin:function(){R({title:"待上线",duration:2e3})},qqLogin:function(){R({title:"待上线",duration:2e3})},weiboLogin:function(){R({title:"待上线",duration:2e3})},getInfo:function(e){console.log("登录e=",e),M({provider:"weixin",success:function(e){console.log("loginRes====",e);const{code:t}=e;loginWechat({code:t}).then("res===",res)}})},openDemo:function(){this.demoVisible=!0},onClose:function(){this.demoVisible=!1},protocolChange:function(e){console.log("value===",e),this.protocolChecked=!e.detail.value,this.protocolChecked&&(this.tooltipVisible=!1)},goProtocol:function(){T({url:"/pages/protocol/Protocol"})},goPrivacy:function(){T({url:"/pages/privacy/Privacy"})}}},[["render",function(e,o,l,n,p,u){const h=U,b=d,x=y,w=j,k=V,v=C,I=S,L=$,z=A("mc-tooltip"),M=P,R=A("show-modal"),T=A("vuew"),E=N(f("uni-link"),q);return t(),c(x,{class:"login-wraper"},{default:r((()=>[m(x,{class:"image-wraper"},{default:r((()=>[g(' <image\r\n        style="width: 100%; height: 100%"\r\n        src="../../static/images/login-bg.gif"\r\n        mode=""\r\n      ></image> '),m(h,{class:"image",src:"/assets/logo.8ed403c9.png"}),m(b,{class:"logo-title"},{default:r((()=>[s("蔓草兴趣")])),_:1})])),_:1}),m(x,{class:"login"},{default:r((()=>[m(M,{onSubmit:u.formSubmit,onReset:e.formReset,class:"login-in"},{default:r((()=>[m(x,{class:"row-flex uni-form-item uni-column"},{default:r((()=>[m(b,{class:"title"},{default:r((()=>[s("手机号：")])),_:1}),m(w,{class:"uni-input",name:"phone",placeholder:"请输入手机号",onInput:u.onInput},null,8,["onInput"])])),_:1}),m(x,{class:"row-flex uni-form-item uni-column"},{default:r((()=>[m(b,{class:"title"},{default:r((()=>[s("验证码：")])),_:1}),m(w,{class:"uni-input",name:"code",placeholder:"请输入验证码",onInput:u.onInputCode},null,8,["onInput"]),m(k,{class:"code",disabled:!p.sendCaptchaEnabled||p.codeVisible,onClick:u.sendCaptcha},{default:r((()=>[s(i(p.codeMessage),1),p.sendCaptchaEnabled?g("v-if",!0):(t(),c(b,{key:0},{default:r((()=>[s("("+i(p.counterTimer)+"s)",1)])),_:1}))])),_:1},8,["disabled","onClick"])])),_:1}),m(x,{class:"uni-btn-v"},{default:r((()=>[m(k,{"form-type":"submit",type:"primary",class:"btn-block",disabled:p.loginVisible},{default:r((()=>[s(" 登录 ")])),_:1},8,["disabled"])])),_:1}),m(z,{placement:"top-start",visible:p.tooltipVisible,content:"请先勾选同意后再进行登录"},{default:r((()=>[m(x,{class:a({"protocol-wraper":!0,shake:p.tooltipVisible})},{default:r((()=>[m(L,{onChange:u.protocolChange},{default:r((()=>[m(I,null,{default:r((()=>[m(v,{value:p.protocolChecked,checked:p.protocolChecked},null,8,["value","checked"]),m(b,{class:"agreement"},{default:r((()=>[s("我已阅读并同意")])),_:1}),m(b,{class:"protocol",onClick:_(u.goProtocol,["stop"])},{default:r((()=>[s("用户协议")])),_:1},8,["onClick"]),s("和"),m(b,{class:"privacy",onClick:_(u.goPrivacy,["stop"])},{default:r((()=>[s("隐私政策")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["onChange"])])),_:1},8,["class"])])),_:1},8,["visible"])])),_:1},8,["onSubmit","onReset"]),p.demoVisible?(t(),c(R,{key:0,title:"请选择账号",content:"请任意选择一个账号登录",onClose:u.onClose},null,8,["onClose"])):g("v-if",!0),m(T,{class:"demo"},{default:r((()=>[m(k,{class:"demo-title",onClick:u.openDemo},{default:r((()=>[s(" 点击可使用演示账号登录 ")])),_:1},8,["onClick"])])),_:1}),m(x,{class:"QR-code"},{default:r((()=>[m(x,{class:"android-code"},{default:r((()=>[m(x,{class:"code-title"},{default:r((()=>[m(b,null,{default:r((()=>[s("Android")])),_:1})])),_:1}),m(h,{src:"/static/wechat_mini.jpg",class:"avatar"})])),_:1}),m(x,{class:"wechat-code"},{default:r((()=>[m(x,{class:"code-title"},{default:r((()=>[m(b,null,{default:r((()=>[s("微信小程序体验版")])),_:1})])),_:1}),m(h,{src:"/static/wechat_mini.jpg",class:"avatar"})])),_:1})])),_:1})])),_:1}),m(x,{class:"gov-wraper"},{default:r((()=>[m(E,{class:"gov",showUnderLine:!1,href:"https://beian.miit.gov.cn/",text:"粤ICP备2021179573号"})])),_:1})])),_:1})}],["__scopeId","data-v-6d1535e9"]]);export{G as default};
//# sourceMappingURL=pages-login-index.f4030186.js.map
