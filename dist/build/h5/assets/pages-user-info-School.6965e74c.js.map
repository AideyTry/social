{"version":3,"file":"pages-user-info-School.6965e74c.js","sources":["../../../../src/uni_modules/uni-search-bar/components/uni-search-bar/i18n/index.js","../../../../src/uni_modules/uni-search-bar/components/uni-search-bar/uni-search-bar.vue","../../../../src/pages/user/info/School.vue"],"sourcesContent":["import en from './en.json'\r\nimport zhHans from './zh-Hans.json'\r\nimport zhHant from './zh-Hant.json'\r\nexport default {\r\n\ten,\r\n\t'zh-Hans': zhHans,\r\n\t'zh-Hant': zhHant\r\n}\n","s<template>\r\n\t<view class=\"uni-searchbar\">\r\n\t\t<view :style=\"{borderRadius:radius+'px',backgroundColor: bgColor}\" class=\"uni-searchbar__box\" @click=\"searchClick\">\r\n\t\t\t<view class=\"uni-searchbar__box-icon-search\">\r\n\t\t\t\t<slot name=\"searchIcon\">\r\n\t\t\t\t\t<uni-icons color=\"#c0c4cc\" size=\"18\" type=\"search\" />\r\n\t\t\t\t</slot>\r\n\t\t\t</view>\r\n\t\t\t<input v-if=\"show || searchVal\" :focus=\"showSync\" :placeholder=\"placeholderText\" :maxlength=\"maxlength\" class=\"uni-searchbar__box-search-input\"\r\n\t\t\t confirm-type=\"search\" type=\"text\" v-model=\"searchVal\" @confirm=\"confirm\" @blur=\"blur\" @focus=\"emitFocus\" />\r\n\t\t\t<text v-else class=\"uni-searchbar__text-placeholder\">{{ placeholder }}</text>\r\n\t\t\t<view v-if=\"show && (clearButton==='always'||clearButton==='auto'&&searchVal!=='')\" class=\"uni-searchbar__box-icon-clear\"\r\n\t\t\t @click=\"clear\">\r\n\t\t\t\t<slot name=\"clearIcon\">\r\n\t\t\t\t\t<uni-icons color=\"#c0c4cc\" size=\"20\" type=\"clear\" />\r\n\t\t\t\t</slot>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<text @click=\"cancel\" class=\"uni-searchbar__cancel\" v-if=\"cancelButton ==='always' || show && cancelButton ==='auto'\">{{cancelTextI18n}}</text>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\tinitVueI18n\r\n\t} from '@dcloudio/uni-i18n'\r\n\timport messages from './i18n/index.js'\r\n\tconst {\tt\t} = initVueI18n(messages)\r\n\r\n\t/**\r\n\t * SearchBar 搜索栏\r\n\t * @description 搜索栏组件，通常用于搜索商品、文章等\r\n\t * @tutorial https://ext.dcloud.net.cn/plugin?id=866\r\n\t * @property {Number} radius 搜索栏圆角\r\n\t * @property {Number} maxlength 输入最大长度\r\n\t * @property {String} placeholder 搜索栏Placeholder\r\n\t * @property {String} clearButton = [always|auto|none] 是否显示清除按钮\r\n\t * \t@value always 一直显示\r\n\t * \t@value auto 输入框不为空时显示\r\n\t * \t@value none 一直不显示\r\n\t * @property {String} cancelButton = [always|auto|none] 是否显示取消按钮\r\n\t * \t@value always 一直显示\r\n\t * \t@value auto 输入框不为空时显示\r\n\t * \t@value none 一直不显示\r\n\t * @property {String} cancelText 取消按钮的文字\r\n\t * @property {String} bgColor 输入框背景颜色\r\n\t * @property {Boolean} focus 是否自动聚焦\r\n\t * @event {Function} confirm uniSearchBar 的输入框 confirm 事件，返回参数为uniSearchBar的value，e={value:Number}\r\n\t * @event {Function} input uniSearchBar 的 value 改变时触发事件，返回参数为uniSearchBar的value，e=value\r\n\t * @event {Function} cancel 点击取消按钮时触发事件，返回参数为uniSearchBar的value，e={value:Number}\r\n\t * @event {Function} clear 点击清除按钮时触发事件，返回参数为uniSearchBar的value，e={value:Number}\r\n\t * @event {Function} blur input失去焦点时触发事件，返回参数为uniSearchBar的value，e={value:Number}\r\n\t */\r\n\r\n\texport default {\r\n\t\tname: \"UniSearchBar\",\r\n\t\temits:['input','update:modelValue','clear','cancel','confirm','blur','focus'],\r\n\t\tprops: {\r\n\t\t\tplaceholder: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: \"\"\r\n\t\t\t},\r\n\t\t\tradius: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 5\r\n\t\t\t},\r\n\t\t\tclearButton: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: \"auto\"\r\n\t\t\t},\r\n\t\t\tcancelButton: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: \"auto\"\r\n\t\t\t},\r\n\t\t\tcancelText: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '取消'\r\n\t\t\t},\r\n\t\t\tbgColor: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: \"#F8F8F8\"\r\n\t\t\t},\r\n\t\t\tmaxlength: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 100\r\n\t\t\t},\r\n\t\t\tvalue: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: \"\"\r\n\t\t\t},\r\n\t\t\tmodelValue: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: \"\"\r\n\t\t\t},\r\n\t\t\tfocus: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshow: false,\r\n\t\t\t\tshowSync: false,\r\n\t\t\t\tsearchVal: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\tcancelTextI18n() {\r\n\t\t\t\treturn this.cancelText || t(\"uni-search-bar.cancel\")\r\n\t\t\t},\r\n\t\t\tplaceholderText() {\r\n\t\t\t\treturn this.placeholder || t(\"uni-search-bar.placeholder\")\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\n\t\t\t// #ifndef VUE3\n\t\t\tvalue: {\n\t\t\t\timmediate: true,\n\t\t\t\thandler(newVal) {\n\t\t\t\t\tthis.searchVal = newVal\n\t\t\t\t\tif (newVal) {\n\t\t\t\t\t\tthis.show = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t// #endif\r\n\t\t\t// #ifdef VUE3\n\t\t\tmodelValue: {\n\t\t\t\timmediate: true,\n\t\t\t\thandler(newVal) {\n\t\t\t\t\tthis.searchVal = newVal\n\t\t\t\t\tif (newVal) {\n\t\t\t\t\t\tthis.show = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t// #endif\r\n\t\t\tfocus: {\r\n\t\t\t\timmediate: true,\r\n\t\t\t\thandler(newVal) {\r\n\t\t\t\t\tif (newVal) {\r\n\t\t\t\t\t\tthis.show = true;\r\n\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\tthis.showSync = true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsearchVal(newVal, oldVal) {\n\t\t\t\t// #ifndef VUE3\n\t\t\t\tthis.$emit(\"input\", newVal)\n\t\t\t\t// #endif\n\t\t\t\t// #ifdef VUE3\n\t\t\t\tthis.$emit(\"update:modelValue\", newVal)\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsearchClick() {\r\n\t\t\t\tif (this.show) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.show = true;\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.showSync = true\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tclear() {\r\n\t\t\t\tthis.$emit(\"clear\", {\r\n\t\t\t\t\tvalue: this.searchVal\r\n\t\t\t\t})\r\n\t\t\t\tthis.searchVal = \"\"\r\n\t\t\t},\r\n\t\t\tcancel() {\r\n\t\t\t\tthis.$emit(\"cancel\", {\r\n\t\t\t\t\tvalue: this.searchVal\r\n\t\t\t\t});\r\n\t\t\t\tthis.searchVal = \"\"\r\n\t\t\t\tthis.show = false\r\n\t\t\t\tthis.showSync = false\r\n\t\t\t\t// #ifndef APP-PLUS\r\n\t\t\t\tuni.hideKeyboard()\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tplus.key.hideSoftKeybord()\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tconfirm() {\r\n\t\t\t\t// #ifndef APP-PLUS\r\n\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tplus.key.hideSoftKeybord()\r\n\t\t\t\t// #endif\r\n\t\t\t\tthis.$emit(\"confirm\", {\r\n\t\t\t\t\tvalue: this.searchVal\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tblur() {\r\n\t\t\t\t// #ifndef APP-PLUS\r\n\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tplus.key.hideSoftKeybord()\r\n\t\t\t\t// #endif\r\n\t\t\t\tthis.$emit(\"blur\", {\r\n\t\t\t\t\tvalue: this.searchVal\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\temitFocus(e) {\r\n\t\t\t\tthis.$emit(\"focus\", e.detail)\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t$uni-searchbar-height: 36px;\r\n\r\n\t.uni-searchbar {\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tdisplay: flex;\r\n\t\t/* #endif */\r\n\t\tflex-direction: row;\r\n\t\tposition: relative;\r\n\t\tpadding: 10px;\r\n\t\t// background-color: #fff;\r\n\t}\r\n\r\n\t.uni-searchbar__box {\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tdisplay: flex;\r\n\t\tbox-sizing: border-box;\r\n\t\t/* #endif */\r\n\t\toverflow: hidden;\r\n\t\tposition: relative;\r\n\t\tflex: 1;\r\n\t\tjustify-content: center;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\theight: $uni-searchbar-height;\r\n\t\tpadding: 5px 8px 5px 0px;\r\n\t}\r\n\r\n\t.uni-searchbar__box-icon-search {\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tdisplay: flex;\r\n\t\t/* #endif */\r\n\t\tflex-direction: row;\r\n\t\t// width: 32px;\r\n\t\tpadding: 0 8px;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tcolor: #B3B3B3;\r\n\t}\r\n\r\n\t.uni-searchbar__box-search-input {\r\n\t\tflex: 1;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.uni-searchbar__box-icon-clear {\r\n\t\talign-items: center;\r\n\t\tline-height: 24px;\r\n\t\tpadding-left: 8px;\r\n\t\t/* #ifdef H5 */\r\n\t\tcursor: pointer;\r\n\t\t/* #endif */\r\n\t}\r\n\r\n\t.uni-searchbar__text-placeholder {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #B3B3B3;\r\n\t\tmargin-left: 5px;\r\n\t}\r\n\r\n\t.uni-searchbar__cancel {\r\n\t\tpadding-left: 10px;\r\n\t\tline-height: $uni-searchbar-height;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #333333;\r\n\t\t/* #ifdef H5 */\r\n\t\tcursor: pointer;\r\n\t\t/* #endif */\r\n\t}\r\n</style>\r\n","<!--\r\n * @Author: Aiden(戴林波)\r\n * @Date: 2021-12-29 14:06:11\r\n * @LastEditTime: 2022-01-05 16:11:37\r\n * @LastEditors: Aiden(戴林波)\r\n * @Description: \r\n * @Email: jason_dlb@sina.cn\r\n-->\r\n<template>\r\n  <div class=\"school\">\r\n    <uni-search-bar placeholder=\"请输入学校名称\" @confirm=\"search\" v-model=\"schoolName\"></uni-search-bar>\r\n    <uni-list v-if=\"schools.length\">\r\n      <uni-list-item\r\n        v-for=\"item in schools\"\r\n        :key=\"item.code\"\r\n        :title=\"item.name\"\r\n        :clickable=\"true\"\r\n        @click=\"onChecked(item)\"\r\n        style=\"text-align: center\"\r\n      ></uni-list-item>\r\n      <uni-list-item\r\n        v-if=\"isShowMore\"\r\n        :clickable=\"true\"\r\n        title=\"加载更多...\"\r\n        style=\"text-align: center\"\r\n        @click=\"onLoadMore\"\r\n      ></uni-list-item>\r\n    </uni-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"school\",\r\n};\r\n</script>\r\n\r\n<script setup>\r\nimport { ref, reactive } from \"vue\";\r\nimport { getSchool } from \"../../../api/user\";\r\n\r\nlet schools = ref([]);\r\nlet pageNum = ref(1)\r\nlet queryString = ref('')\r\nlet schoolName = ref('')\r\nlet isShowMore = ref(false)\r\n\r\nconst searchSchool = (query, page) => {\r\n    const params = {\r\n    name: query,\r\n    page: String(page),\r\n  }\r\n  getSchool(params).then((data) => {\r\n    console.log(\"data===\", data);\r\n    schools.value = [...schools.value, ...data.data.data];\r\n    console.log('schools.value=====', schools.value)\r\n    isShowMore.value = true\r\n    if(data.data.data.length < 10){\r\n      isShowMore.value = false\r\n    }\r\n    if(page === 1 && schools.value.length === 0){\r\n      schools.value = [{name: '其他学校'}]\r\n    }\r\n    console.log('schools=', schools)\r\n  })\r\n}\r\n\r\nconst search = (e) => {\r\n  console.log(\"e===\", e);\r\n  const { value } = e;\r\n  queryString.value = value\r\n  schools.value = []\r\n  searchSchool(value, 1)\r\n};\r\nconst onLoadMore = () => {\r\n  pageNum.value++\r\n  console.log('pageNum.value===', pageNum.value)\r\n  searchSchool(queryString.value, pageNum.value)\r\n\r\n}\r\nconst onChecked = (item) => {\r\n  schoolName.value = item.name\r\n  schools.value = []\r\n  uni.$emit('schoolUpdate',{schoolName:schoolName.value})\r\n  uni.navigateBack()\r\n//     uni.navigateTo({\r\n//     url: `/pages/user/info/Editor?schoolName=${schoolName.value}`\r\n// });\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>"],"names":["en","t","initVueI18n","messages","name","emits","props","placeholder","type","String","default","radius","Number","clearButton","cancelButton","cancelText","bgColor","maxlength","value","modelValue","focus","Boolean","data","show","showSync","searchVal","computed","cancelTextI18n","this","placeholderText","watch","immediate","handler","newVal","$nextTick","oldVal","$emit","methods","searchClick","clear","cancel","confirm","blur","emitFocus","e","detail","style","_normalizeStyle","class","color","size","key","onConfirm","onBlur","onClick","schools","ref","pageNum","queryString","schoolName","isShowMore","searchSchool","query","page","params","then","log","length","search","onLoadMore","item"],"mappings":"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"}