import{D as e,E as a,o,H as l,e as t,w as s,O as n,P as c,K as d,a6 as u,Q as r,I as i,c as f,N as m,U as b,T as p,S as h,a7 as _,a8 as y,X as v,W as w,a1 as I,Z as g,n as x}from"./vendor.fd2db051.js";import{b as j}from"./hobby.b59fabb0.js";import{a as k,b as F,d as V,c as C,e as T}from"./communication.b8ceee7c.js";import{_ as P}from"./plugin-vue_export-helper.21dcd24c.js";import{V as D}from"./VideoPlayer.90024321.js";import{f as O}from"./index.1709f4c2.js";const U={name:"comment"};var q=P({components:{Comment:P(Object.assign(U,{props:{hobbyInfo:{type:Object,default:{}}},setup(y){const v=y;let w=e(""),I=e(0),g=e([]);console.log("props=",v);const x=e=>{console.log("e=",e);const{detail:{value:a}}=e;let o={comment:a,detailUserId:v.hobbyInfo.user_id,hobbyId:v.hobbyInfo.hobby_4_id};k(o).then((e=>{200===e.statusCode&&(w.value="",j())}))},j=()=>{let e={hobbyId:v.hobbyInfo.hobby_4_id};F(e).then((e=>{console.log("data666666===",e),200===e.data.code&&(g.value=e.data.data,I.value=e.data.data.length)}))};return a((()=>{j()})),(e,a)=>{const v=b,j=p,k=h,F=_;return o(),l("div",{class:"comment"},[t(j,{class:"total"},{default:s((()=>[t(v,null,{default:s((()=>[n("共")])),_:1}),t(v,null,{default:s((()=>[n(c(d(I)),1)])),_:1}),t(v,null,{default:s((()=>[n("条评论")])),_:1})])),_:1}),t(j,{class:"my-comment"},{default:s((()=>[t(k,{class:"avatar",mode:"aspectFit",src:y.hobbyInfo.avatar||""},null,8,["src"]),t(F,{modelValue:d(w),"onUpdate:modelValue":a[0]||(a[0]=e=>u(w)?w.value=e:w=e),type:"text",class:"comment-input",placeholder:"喜欢就给个评论支持一下呗~",onConfirm:x},null,8,["modelValue"])])),_:1}),(o(!0),l(r,null,i(d(g),(a=>(o(),f(j,{class:"other-comment",key:a.id},{default:s((()=>[t(j,null,{default:s((()=>[t(k,{class:"avatar",mode:"aspectFit",src:a.avatar||""},null,8,["src"])])),_:2},1024),t(j,{class:"comment-info"},{default:s((()=>[t(j,{class:"userinfo"},{default:s((()=>[t(v,null,{default:s((()=>[n(c(a.username),1)])),_:2},1024),a.isAuthor?(o(),f(v,{key:0,class:"is-author"},{default:s((()=>[n("作者")])),_:1})):m("v-if",!0)])),_:2},1024),t(j,{class:"comment-content"},{default:s((()=>[t(v,null,{default:s((()=>[n(c(a.comment),1)])),_:2},1024)])),_:2},1024),t(j,null,{default:s((()=>[t(v,null,{default:s((()=>[n(c(e.$filters.commentTime(a.create_time)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])}}}),[["__scopeId","data-v-0b10064a"]]),VideoPlayer:D},onLoad:function(e){console.log("options===",e)},setup(o){console.log("props=",o);const l=y(),t=v((()=>l.state.user.userInfo)).value,s=w({poster:"",src:""});let n=e([{content:"https://social-1308251497.cos.ap-guangzhou.myqcloud.com/images/4.jfif"}]);e(0),e("default");let c=e({});let d=e(!1),u=e("关注");let r=e(null);const i=()=>{let e={followId:c.value.user_id};console.log("params===",e),T(e).then((e=>{console.log("data1===",e),200===e.data.code&&(d.value=e.data.isFollow,e.data.isFollow?u.value="已关注":u.value="关注")}))};return a((()=>{console.log("userInfo===",t),(e=>{const{id:a,hobby:o}=e;j({id:a,hobby:o}).then((e=>{console.log("data===",e),200===e.data.code&&(c.value=e.data.data,r.value=O(e.data.data.create_time),s.poster=e.data.data.url,s.src=e.data.data.video_url,i())}))})({id:o.id,hobby:o.hobby})})),{followText:u,isFlollow:d,following:()=>{if(d.value)return void x({content:"确认不再关注？",success:function(e){if(e.confirm){let e={followId:c.value.user_id};V(e).then((e=>{200===e.data.code&&(u.value="关注",d.value=!1)}))}else e.cancel&&console.log("用户点击取消")}});console.log("userInfo===",t);let e={followId:c.value.user_id};C(e).then((e=>{console.log("data===",e),200===e.data.code&&(u.value="已关注",d.value=!0)}))},hobbyInfo:c,info:n,publishDate:r,options:s}}},[["render",function(e,a,d,u,r,i){const _=h,y=I("VideoPlayer"),v=p,w=b,x=I("Comment");return o(),l("div",{class:"hobby-detail"},[m(' <uni-swiper-dot\r\n      :info="info"\r\n      :current="current"\r\n      field="content"\r\n      :mode="mode"\r\n    >\r\n      <swiper class="swiper-box" @change="change">\r\n        <swiper-item v-for="(item, index) in info" :key="index">\r\n          <view class="swiper-item">\r\n            <image :src="item.content" class="image"></image>\r\n          </view>\r\n        </swiper-item>\r\n      </swiper>\r\n    </uni-swiper-dot> '),t(v,{class:"swiper-box"},{default:s((()=>[t(v,{class:"swiper-item"},{default:s((()=>[0===u.hobbyInfo.fileType?(o(),f(_,{key:0,src:u.hobbyInfo.url,class:"image"},null,8,["src"])):(o(),f(y,{options:u.options,key:u.hobbyInfo.id},null,8,["options"]))])),_:1})])),_:1}),t(v,{class:"author-wraper"},{default:s((()=>[t(v,{class:"author"},{default:s((()=>[t(v,{class:"author-info"},{default:s((()=>[t(_,{class:"avatar",mode:"aspectFit",src:u.hobbyInfo.avatar||""},null,8,["src"]),t(w,null,{default:s((()=>[n(c(u.hobbyInfo.username||""),1)])),_:1})])),_:1}),t(v,{class:g({follow:!u.isFlollow,active:u.isFlollow}),onClick:u.following},{default:s((()=>[t(w,null,{default:s((()=>[n(c(u.followText),1)])),_:1})])),_:1},8,["class","onClick"])])),_:1})])),_:1}),t(v,{class:"content-wraper"},{default:s((()=>[t(v,{class:"content"},{default:s((()=>[t(v,{class:"title"},{default:s((()=>[n(c(u.hobbyInfo.title),1)])),_:1}),t(v,{class:"main"},{default:s((()=>[n(c(u.hobbyInfo.content),1)])),_:1}),t(v,{class:"publish-date"},{default:s((()=>[t(w,null,{default:s((()=>[n("发布于: ")])),_:1}),t(w,null,{default:s((()=>[n(c(u.publishDate),1)])),_:1})])),_:1})])),_:1})])),_:1}),t(v,{class:"comment-wraper"},{default:s((()=>[u.hobbyInfo.hobby_4_id?(o(),f(x,{key:0,hobbyInfo:u.hobbyInfo},null,8,["hobbyInfo"])):m("v-if",!0)])),_:1})])}],["__scopeId","data-v-55c57410"]]);export{q as default};
