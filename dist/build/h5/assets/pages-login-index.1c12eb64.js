import{o as t,c as e,w as s,e as n,L as i,M as o,Y as a,J as l,T as r,S as c,p as u,an as d,l as p,X as h,Z as f,R as g,a7 as m,ab as b,am as _}from"./vendor.50101467.js";import{_ as v}from"./plugin-vue_export-helper.21dcd24c.js";import{r as y}from"./uni-app.es.3a2ad635.js";import{s as w,c as S,d as x}from"./index.d162092e.js";var I=v({name:"UniTitle",props:{type:{type:String,default:""},title:{type:String,default:""},align:{type:String,default:"left"},color:{type:String,default:"#333333"},stat:{type:[Boolean,String],default:""}},data:()=>({}),computed:{textAlign(){let t="center";switch(this.align){case"left":t="flex-start";break;case"center":t="center";break;case"right":t="flex-end"}return t}},watch:{title(t){this.isOpenStat()&&uni.report&&uni.report("title",this.title)}},mounted(){this.isOpenStat()&&uni.report&&uni.report("title",this.title)},methods:{isOpenStat(){""===this.stat&&(this.isStat=!1);let t="boolean"==typeof this.stat&&this.stat||"string"==typeof this.stat&&""!==this.stat;return""===this.type&&(this.isStat=!0,"false"===this.stat.toString()&&(this.isStat=!1)),""!==this.type&&(this.isStat=!0,this.isStat=!!t),this.isStat}}},[["render",function(u,d,p,h,f,g){const m=r,b=c;return t(),e(b,{class:"uni-title__box",style:l({"align-items":g.textAlign})},{default:s((()=>[n(m,{class:a(["uni-title__base",["uni-"+p.type]]),style:l({color:p.color})},{default:s((()=>[i(o(p.title),1)])),_:1},8,["class","style"])])),_:1},8,["style"])}],["__scopeId","data-v-78f6f244"]]);var C=v({data:()=>({codeVisible:!1,loginVisible:!0,sendCaptchaEnabled:!0,codeMessage:"获取验证码",counterTimer:60,phoneNumber:null}),methods:{onInput:function(t){console.log("input e=",t),/^1[3456789]\d{9}$/.test(t.detail.value)?(this.codeVisible=!0,this.phoneNumber=t.detail.value):this.codeVisible=!1},onInputCode:function(t){console.log("code=",t),/^\d{6}$/.test(t.detail.value)?this.loginVisible=!1:this.loginVisible=!0},sendCaptcha:function(t){if(console.log("button e=",t),!this.sendCaptchaEnabled)return;this.sendCaptchaEnabled=!1;const e={phone:this.phoneNumber};console.log("params===",e),w(e).then((t=>{console.log("res=",t)})),this.codeMessage="重新发送";const s=setInterval((()=>{if(this.counterTimer<=0)return this.counterTimer=60,this.sendCaptchaEnabled=!0,clearInterval(s),void(this.codeMessage="获取验证码");this.counterTimer--}),1e3)},formSubmit:function(t){console.log("e=",t),console.log("form发生了submit事件，携带数据为："+JSON.stringify(t.detail.value));const e=t.detail.value,s=this;console.log("window.navigator=",window.navigator.userAgent),window.navigator.__defineGetter__("userAgent",(()=>"myBroser")),setTimeout((()=>{console.log("window.navigator1=",window.navigator.userAgent)}),200),S(e).then((t=>{console.log("res========",t);const{code:e,token:n}=t.data;200===e&&(console.log("成功"),x(n),s.$store.dispatch("user/GetUserInfo"),u({url:"/pages/index/index"}))}))},miniProLogin:function(t){console.log("e===",t),d({provider:"weixin",success:function(t){console.log("loginRes=",t.authResult)}})},wechatLogin:function(){p({title:"待上线",duration:2e3})},qqLogin:function(){p({title:"待上线",duration:2e3})},weiboLogin:function(){p({title:"待上线",duration:2e3})},getInfo:function(t){console.log("登录e=",t),d({provider:"weixin",success:function(t){console.log("loginRes====",t);const{code:e}=t;loginWechat({code:e}).then("res===",res)}})}}},[["render",function(a,l,u,d,p,v){const w=y(h("uni-title"),I),S=g,x=c,C=r,T=m,k=b,R=_;return t(),e(x,{class:"login-wraper"},{default:s((()=>[n(w,{type:"h1",align:"center",title:"蔓草兴趣"}),n(x,{class:"image"},{default:s((()=>[n(S,{style:{width:"100%",height:"100%"},src:"/assets/login-bg.66dcff35.gif",mode:""})])),_:1}),n(x,{class:"login"},{default:s((()=>[n(R,{onSubmit:v.formSubmit,onReset:a.formReset,class:"login-in"},{default:s((()=>[n(x,{class:"row-flex uni-form-item uni-column"},{default:s((()=>[n(C,{class:"title"},{default:s((()=>[i("手机号：")])),_:1}),n(T,{class:"uni-input",name:"phone",placeholder:"请输入手机号",onInput:v.onInput},null,8,["onInput"])])),_:1}),n(x,{class:"row-flex uni-form-item uni-column"},{default:s((()=>[n(C,{class:"title"},{default:s((()=>[i("验证码：")])),_:1}),n(T,{class:"uni-input",name:"code",placeholder:"请输入验证码",onInput:v.onInputCode},null,8,["onInput"]),n(k,{class:"code",disabled:!p.sendCaptchaEnabled,onClick:v.sendCaptcha},{default:s((()=>[i(o(p.codeMessage),1),p.sendCaptchaEnabled?f("v-if",!0):(t(),e(C,{key:0},{default:s((()=>[i("("+o(p.counterTimer)+"s)",1)])),_:1}))])),_:1},8,["disabled","onClick"])])),_:1}),n(x,{class:"uni-btn-v"},{default:s((()=>[n(k,{"form-type":"submit",type:"primary",class:"btn-block",disabled:p.loginVisible},{default:s((()=>[i(" 登录 ")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})}],["__scopeId","data-v-4ee94012"]]);export{C as default};
