import{Z as e,T as a,z as s,A as o,o as t,c as l,w as n,D as r,E as c,M as u,N as i,P as m,e as d,J as f,K as g,O as p,Q as v}from"./vendor.99a7c6c2.js";import{o as h}from"./openIM.fd559ab0.js";import{g as _}from"./index.9bd1fc8b.js";import{C}from"./ChatContent.6323ae75.js";import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";var D=I({components:{ChatContent:C},setup(){const t=e(),l=a((()=>t.state.user.userInfo)).value;let n=s(null);const r=s([]);return o((()=>{((e,a)=>{console.log("userID, token=====================",e,a);const s={userID:e,token:a,url:"wss://mancao.social:20038",platformID:5};h.login(s).then((e=>{console.log("login suc...",e),0===e.errCode&&h.getAllConversationList().then((({data:e})=>{console.log("data====",JSON.parse(e)),r.value=JSON.parse(e)})).catch((e=>{console.log("err=",e)})),n.value=e.operationID})).catch((e=>{console.log("login failed...",e)}))})(l.phone,_())})),{defaultAvatar:"/static/images/default_avatar.png",operationID:n,convers:r,goChat:e=>{console.log("item=",e),i({url:`/pages/message/Chat?userID=${e.userID}&title=${e.showName}`})}}}},[["render",function(e,a,s,o,i,h){const _=p,C=v,I=m;return t(),l(I,null,{default:n((()=>[(t(!0),r(u,null,c(o.convers,(a=>(t(),l(I,{key:a.userID,class:"conver",onClick:e=>o.goChat(a)},{default:n((()=>[d(I,{class:"conver-msg"},{default:n((()=>[d(_,{src:a.faceURL&&a.faceURL.includes("https://")?a.faceURL:o.defaultAvatar,class:"chat_bg_msg_icon"},null,8,["src"]),d(I,{class:"content-wraper"},{default:n((()=>[d(C,null,{default:n((()=>[f(g(a.showName),1)])),_:2},1024),d(C,null,{default:n((()=>[f(g(e.$filters.commentTime(a.latestMsgSendTime)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),d(C,{class:"conver-time"},{default:n((()=>[f(g(e.$filters.commentTime(a.latestMsgSendTime)),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})}],["__scopeId","data-v-5042cec7"]]);export{D as default};
//# sourceMappingURL=pages-message-index.fa6762ea.js.map
